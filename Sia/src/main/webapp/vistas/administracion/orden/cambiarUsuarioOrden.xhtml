<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"       
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:my="http://www.mytags.com/schema/mytags"
      >

    <body>
        <ui:composition template="./../../../WEB-INF/facelets/templates/templateGrupos.xhtml">
            <h:panelGroup  rendered="#{empty sesion.usuario}" styleClass="altura">
                <ui:include src="./../../../login.xhtml"/>
            </h:panelGroup>
            <ui:define name="contenido">
                <div id="page">
                    <div class="row">
                        <ui:include src="../menuAdministracion.xhtml" rendered="#{not empty sesion.usuario}" />
                    </div>
                    <div class="row">  
                        <h:form id="frmCambioUsuarioOrden" rendered="#{not empty sesion.usuario}" 
                                  styleClass="textoIzquierda">
                            <div class="col-lg-12">
                                <div class="col-lg-4"></div>
                                <div class="col-lg-6">
                                    <h2 class="page-header">Transferir Trabajo</h2>
                                </div>
                            </div> 
                            <div class="col-lg-12 col-xs-12">
                                <p:selectOneRadio id="campo" value="#{devolverOrdenCompraBean.idCampo}" 
                                                    valueChangeListener="#{devolverOrdenCompraBean.cambiarSeleccionCampo}" 
                                                     
                                                    layout="lineDirection" >
                                    <f:selectItems value="#{devolverOrdenCompraBean.listaCampo}"/> 
                                </p:selectOneRadio>
                            </div>
                            <div class="col-lg-12 col-xs-12">
                                <p:selectOneRadio value="#{devolverOrdenCompraBean.tipoTrabajo}" 
                                                    valueChangeListener="#{devolverOrdenCompraBean.cambiarTipoTrabajo}" >
                                    <f:selectItem itemLabel="Ordenes de Compra y/o Servicios" itemValue="ocs"/>
                                    <f:selectItem itemLabel="Requisiciones" itemValue="req"/>
                                    <f:selectItem itemLabel="Solicitudes de viajes" itemValue="viaje"/>
                                    <f:selectItem itemLabel="Inventario" itemValue="inv"/>
                                </p:selectOneRadio>
                            </div>
                            <div class="col-lg-12 col-xs-12">
                                <p:panelGrid columns="3">
                                    <p:panelGrid style="text-align: center;">
                                        <h:outputLabel value="Usuario actual" />
                                        <p:panelGrid columns="3">
                                            <p:inputText id="autocompleteUsuario" size="40"
                                                           onclick="autocompletarUsuario(this, 'hidenDesUsuario', 'frmCambioUsuarioOrden');"/>
                                            <h:inputHidden id="hidenDesUsuario" value="#{devolverOrdenCompraBean.usuarioSolicita}"/>
                                        </p:panelGrid>  
                                    </p:panelGrid>
                                    <p:panelGrid style="text-align: center;">
                                        <h:outputLabel value="Usuario aprobarÃ¡"/>
                                        <p:panelGrid columns="2">
                                            <p:inputText id="autoUsuarioAprobara" size="40"
                                                           onclick="autocompletarUsuario(this, 'hidenDesUsuarioAprobara', 'frmCambioUsuarioOrden');"/>
                                            <h:inputHidden id="hidenDesUsuarioAprobara" value="#{devolverOrdenCompraBean.usuarioAprobara}"/>
                                        </p:panelGrid>  
                                    </p:panelGrid>
                                    <h:panelGroup rendered="#{devolverOrdenCompraBean.tipoTrabajo eq 'ocs'}">
                                        <p:panelGrid>
                                            <h:commandLink onclick="return validaPasar('seleccion');" styleClass="btn btn-default"
                                                           actionListener="#{devolverOrdenCompraBean.pasarOrdenesCompra(actionEvent)}">
                                                <p:graphicImage url="./resources/imagenes/check.png" styleClass="imagenSinBorde"/>
                                            </h:commandLink>
                                                           <h:commandLink onclick="return validaPasar(
                                                            'seleccion');" 
                                                           value="Pasar OC/S"
                                                           actionListener="#{devolverOrdenCompraBean.pasarOrdenesCompra(actionEvent)}" styleClass="link"/>
                                        </p:panelGrid>
                                    </h:panelGroup>
                                    <h:panelGroup rendered="#{devolverOrdenCompraBean.tipoTrabajo eq 'req'}">
                                        <p:panelGrid style="text-align: center;">
                                            <h:commandLink onclick="return validaPasar('seleccion');" styleClass="btn btn-default"
                                                           actionListener="#{devolverOrdenCompraBean.pasarRequisiciones(actionEvent)}">
                                                <p:graphicImage url="./resources/imagenes/check.png" styleClass="imagenSinBorde"/>
                                            </h:commandLink>
                                                           <h:commandLink onclick="return validaPasar(
                                                            'seleccion');" 
                                                           value="Pasar Requisiciones"
                                                           actionListener="#{devolverOrdenCompraBean.pasarRequisiciones(actionEvent)}" styleClass="link"/>
                                        </p:panelGrid>
                                    </h:panelGroup>
                                    <h:panelGroup rendered="#{devolverOrdenCompraBean.tipoTrabajo eq 'viaje'}">
                                        <p:panelGrid style="text-align: center;">
                                            <h:commandLink onclick="return validaPasar('seleccion');" styleClass="btn btn-default"
                                                           actionListener="#{devolverOrdenCompraBean.pasarSolicitudes(actionEvent)}">
                                                <p:graphicImage url="./resources/imagenes/check.png" styleClass="imagenSinBorde"/>
                                            </h:commandLink>
                                                           <h:commandLink onclick="return validaPasar('s
                                                            eleccion');" 
                                                           value="Pasar Solicitudes"
                                                           actionListener="#{devolverOrdenCompraBean.pasarSolicitudes(actionEvent)}" styleClass="link"/>
                                        </p:panelGrid>

                                    </h:panelGroup>
                                    <h:panelGroup rendered="#{devolverOrdenCompraBean.tipoTrabajo eq 'inv'}">
                                        <p:panelGrid style="text-align: center;">
                                            <h:commandLink onclick="return validaPasar('seleccion');" styleClass="btn btn-default"
                                                           actionListener="#{devolverOrdenCompraBean.pasarSolicitudMaterial(actionEvent)}">
                                                <p:graphicImage url="./resources/imagenes/check.png" styleClass="imagenSinBorde"/>
                                            </h:commandLink>
                                            <h:commandLink onclick="return validaPasar('seleccion');" 
                                                           value="Pasar Solicitud de material"
                                                           actionListener="#{devolverOrdenCompraBean.pasarSolicitudMaterial(actionEvent)}" styleClass="link"/>
                                        </p:panelGrid>

                                    </h:panelGroup>
                                </p:panelGrid>
                            </div>
                            <div class="col-lg-12 col-xs-12">
                                <!--selectedPanel="#{devolverOrdenCompraBean.tipoTrabajo}"-->
                                <p:panel  >
                                    <h:panelGroup id="ocs">
                                        <ui:include src="/vistas/administracion/orden/fragmento/pasarOCS.xhtml"/>
                                    </h:panelGroup>
                                    <h:panelGroup id="req">
                                        <ui:include src="/vistas/administracion/orden/fragmento/pasarRequisiciones.xhtml"/>
                                    </h:panelGroup>
                                    <h:panelGroup id="viaje">
                                        <ui:include src="/vistas/administracion/solicitudViaje/fragmento/pasarSolicitudViaje.xhtml"/>
                                    </h:panelGroup>
                                    <h:panelGroup id="inv">
                                        <ui:include src="../../administracion/inventario/pasarSolicitudMaterial.xhtml"/>
                                    </h:panelGroup>
                                </p:panelStack>
                            </div>
                        </h:form>
                    </div>
                </div>
            </ui:define>
        </ui:composition>

    </body>
</html>
