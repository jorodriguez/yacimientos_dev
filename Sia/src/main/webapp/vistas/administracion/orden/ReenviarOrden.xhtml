<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"       
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      >
    <body>
        <ui:composition template="./../../../WEB-INF/facelets/templates/templateSistema.xhtml">
            <ui:define name="menu" rendered="#{not empty sesion.usuario}">
                <h:form rendered="#{not empty sesion.usuario}">                
                    <ui:include src="../menuAdministracion.xhtml"/>
                </h:form>
            </ui:define>
            <ui:define name="contenido">
                <h:panelGroup  rendered="#{empty sesion.usuario}" styleClass="altura">
                    <ui:include src="./../../../login.xhtml"/>
                </h:panelGroup>  
                <h:form rendered="#{not empty sesion.usuario}" styleClass="textoIzquierda">
                    <br/>
                    <center>
                        <br/>
                        <h:outputText value="Re-enviar OC/S" styleClass="tituloEncabezado"/>
                        <br/><br/>
                        <p:panelGrid columns="3">
                            <p:panelGrid columns="1">
                                <h:outputText value="Orden C/S"/>
                                <h:outputText/>
                            </p:panelGrid>
                            <p:panelGrid columns="1" >
                                <p:inputText value="#{devolverOrdenCompraBean.consecutivo}" size="12" />
                                <h:outputText value="OC12-1234" style="font-size: x-small; float: right;"/>
                            </p:panelGrid>
                            <p:panelGrid columns="1">
                                <p:commandButton value="Búscar" styleClass="btn btn-default" actionListener="#{devolverOrdenCompraBean.buscarOrdenReenviar(event)}"/>
                                <h:outputText/>
                            </p:panelGrid>
                        </p:panelGrid>
                        <h:messages infoClass="textoMensajeError" errorClass="textoMensajeError"/>
                    </center>
                     <br/><br/>
                     <h:panelGroup rendered="#{devolverOrdenCompraBean.orden != null  and devolverOrdenCompraBean.orden.autorizacionesOrden.estatus.id != 150}">
                         <p:panelGrid >
                             <h:outputText value="No es posible re-enviar la OC/S" styleClass="f11Negrita"/>
                         </p:panelGrid>
                     </h:panelGroup>
                     <h:panelGroup rendered="#{devolverOrdenCompraBean.orden != null}">                        
                         <p:panelGrid columns="1" rendered="#{devolverOrdenCompraBean.orden.autorizacionesOrden.estatus.id eq 150}">
                            <p:commandButton value="Click aquí para re-enviar la OC/S" styleClass="btn btn-default" 
                                               actionListener="#{devolverOrdenCompraBean.reeviarOrden(event)}" />
                            <p:confirmDialog id="pnlCon" header="Confirmar" message="La operación va a re-enviar la OC/S, ¿está seguro?"/>
                        </p:panelGrid>
                       
                        
                            
                        <p:panelGrid columns="4">
                            <f:facet name="header"><h:outputText value="Autorizaciones" style="color: #4F82DF; font-size: 11px; font-weight: bold;"/></f:facet>
                            <h:outputText value="Solicitada el:"/>
                            <p:inputText disabled="true" value="#{devolverOrdenCompraBean.orden.autorizacionesOrden.fechaSolicito}">
                                <f:convertDateTime dateStyle="default" type="date"/>
                            </p:inputText>
                            <h:outputText value="Por:"/>
                            <p:inputText disabled="true" size="50" value="#{devolverOrdenCompraBean.orden.autorizacionesOrden.solicito.nombre}"/>

                            <h:outputText value="Vo. Bo. el:"/>
                            <p:inputText disabled="true" value="#{devolverOrdenCompraBean.orden.autorizacionesOrden.fechaAutorizoGerencia}">
                                <f:convertDateTime dateStyle="default" type="date"/>
                            </p:inputText>
                            <h:outputText value="Por:"/>
                            <p:inputText disabled="true" size="50" value="#{devolverOrdenCompraBean.orden.autorizacionesOrden.autorizaGerencia.nombre}"/>

                            <h:outputText value="Revisada el:"/>
                            <p:inputText disabled="true" value="#{devolverOrdenCompraBean.orden.autorizacionesOrden.fechaAutorizoMpg}">
                                <f:convertDateTime dateStyle="default" type="date"/>
                            </p:inputText>
                            <h:outputText value="Por:"/>
                            <p:inputText disabled="true" size="50" value="#{devolverOrdenCompraBean.orden.autorizacionesOrden.autorizaMpg.nombre}"/>

                            <h:outputText value="Aprobada el:"/>
                            <p:inputText disabled="true" value="#{devolverOrdenCompraBean.orden.autorizacionesOrden.fechaAutorizoIhsa}">
                                <f:convertDateTime dateStyle="default" type="date"/>
                            </p:inputText>
                            <h:outputText value="Por:"/>
                            <p:inputText disabled="true" size="50" value="#{devolverOrdenCompraBean.orden.autorizacionesOrden.autorizaIhsa.nombre}"/>

                            <h:outputText value="Autorizada el:"/>
                            <p:inputText disabled="true" value="#{devolverOrdenCompraBean.orden.autorizacionesOrden.fechaAutorizoCompras}">
                                <f:convertDateTime dateStyle="default" type="date"/>
                            </p:inputText>
                            <h:outputText value="Por:"/>
                            <p:inputText disabled="true" size="50" value="#{devolverOrdenCompraBean.orden.autorizacionesOrden.autorizaCompras.nombre}"/>
                        </p:panelGrid>
                        <br/><br/>
                        <p:panel >
                            <f:facet name="first">
                                <p:panelGrid columns="2">
                                    <f:facet name="header"><h:outputText value="Datos de la orden de compra" style="color: #4F82DF; font-size: 11px; font-weight: bold;"/></f:facet>
                                    <h:outputText value="Consecutivo"/>
                                    <p:inputText value="#{devolverOrdenCompraBean.orden.consecutivo}" disabled="true" size="7"/>
                                    <h:outputText value="Proyecto OT"/>
                                    <p:inputText value="#{devolverOrdenCompraBean.orden.proyectoOt.nombre}" disabled="true" size="30"/>
                                    <h:outputText value="Proveedor"/>
                                    <p:inputText value="#{devolverOrdenCompraBean.orden.proveedor.nombre}" disabled="true" size="30"/>
                                    <h:outputText value="Gerencia"/>
                                    <p:inputText value="#{devolverOrdenCompraBean.orden.gerencia.nombre}" disabled="true" size="25"/>
                                    <h:outputText value="Analista"/>
                                    <p:inputText value="#{devolverOrdenCompraBean.orden.analista.nombre}" disabled="true" size="20"/>
                                    <h:outputText value="Destino"/>
                                    <p:inputText value="#{devolverOrdenCompraBean.orden.destino}" disabled="true" size="35"/>
                                    <h:outputText value="Condción de pago"/>
                                    <p:inputTextarea cols="45" rows="2" value="#{devolverOrdenCompraBean.orden.condicionPago.nombre}" disabled="true" />
                                    <h:outputText value="Estatus"/>
                                    <p:inputText value="#{devolverOrdenCompraBean.orden.autorizacionesOrden.estatus.nombre}" size="20" disabled="true"/>
                                    <h:outputText value="Total en pesos"/>
                                    <p:inputText value="#{devolverOrdenCompraBean.orden.total}" size="10" disabled="true"/>
                                    <h:outputText value="Total dólares"/>
                                    <p:inputText value="#{devolverOrdenCompraBean.orden.totalUsd}" size="10" disabled="true">
                                       <f:convertNumber currencySymbol="$" maxFractionDigits="2" type="currency" groupingUsed="true" />
                                    </p:inputText>
                                </p:panelGrid>
                            </f:facet>
                            <f:facet name="second">
                                <p:panelGrid columns="2">
                                    <f:facet name="header"><h:outputText value="Datos de la Requisición" style="color: #4F82DF; font-size: 11px; font-weight: bold;"/></f:facet>
                                    <h:outputText value="Consecutivo"/>
                                    <p:inputText value="#{devolverOrdenCompraBean.orden.requisicion.consecutivo}" disabled="true" size="7"/>
                                    <h:outputText value="Proyecto OT"/>
                                    <p:inputText value="#{devolverOrdenCompraBean.orden.requisicion.proyectoOt.nombre}" disabled="true" size="35"/>
                                    <h:outputText value="Tipo de obra"/>
                                    <p:inputText value="#{devolverOrdenCompraBean.orden.requisicion.tipoObra.nombre}" disabled="true" size="45"/>
                                    <h:outputText value="Proveedor"/>
                                    <p:inputText value="#{devolverOrdenCompraBean.orden.requisicion.proveedor}" disabled="true" size="35"/>
                                    <h:outputText value="Monto en MN"/>
                                    <p:inputText value="$ #{devolverOrdenCompraBean.orden.requisicion.montoMn}" disabled="true" size="15"/>
                                    <h:outputText value="Monto en USD"/>
                                    <p:inputText value="$ #{devolverOrdenCompraBean.orden.requisicion.montoUsd}" disabled="true" size="15"/>
                                    <h:outputText value="Estatus"/>
                                    <p:inputText value="#{devolverOrdenCompraBean.orden.requisicion.estatus.nombre}" disabled="true"/>
                                </p:panelGrid>
                            </f:facet>
                        </p:panel>
                        <br/>

                    </h:panelGroup>
                     <br/><br/>
                </h:form>
            </ui:define>

        </ui:composition>

    </body>
</html>
