<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html" 
      xmlns:p="http://primefaces.org/ui"
      xmlns:my="http://www.mytags.com/schema/mytags"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <h:body>
        <ui:composition template="./../../../WEB-INF/facelets/templates/templateGrupos.xhtml">
            <ui:define name="contenido">
                <div id="page">
                    <div class="row"> 
                        <h:form  >
                            <div class="col-lg-12">
                                <div class="col-lg-4"></div>
                                <div class="col-lg-6">
                                    <h2 class="page-header">Catálogo de Módulos</h2>
                                </div>
                            </div>
                            <center><h:messages errorClass="mensaje" infoClass="mensaje"/></center>  
                            <div class="col-lg-12 col-xs-12">
                                <p:commandLink type="submit" title="Crear Módulo" action="#{moduloBean.mostrarPopupCrear}" styleClass="btn btn-default" >
                                    <p:graphicImage url="resources/imagenes/button_create.png" alt="Crear Módulo" styleClass="imagenSinBorde" width="16px" height="16px" />
                                </p:commandLink><br/>
                                <p:commandLink value="Crear Módulo" styleClass="linkPequenio" action="#{moduloBean.mostrarPopupCrear}" />
                            </div>
                            <div class="col-lg-12 col-xs-12">
                                <my:dataGrid id="dataGridModulo" rows="10"  value="#{moduloBean.modulosDataModel}" showPaginator="true" textoResultado="Mostrando módulos del " textoPagina="página" textoDe="de" >
                                    <my:column columnName="nombre" headerValue="Nombre"
                                               itemValue="#{data.nombre}" isColumSort="true"/>
                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="Ruta"/>
                                        </f:facet>
                                        <h:outputText value="#{data['ruta']}" />
                                    </p:column>
                                    <p:column>
                                        <p:commandLink value="Modificar" action="#{moduloBean.mostrarPopupActualizar}" styleClass="link" />
                                    </p:column>
                                    <p:column>
                                        <p:commandLink value="Eliminar" action="#{moduloBean.mostrarPopupEliminar}" styleClass="link" />
                                    </p:column>
                                    <p:column>
                                        <p:commandLink value="Detalle"  action="#{moduloBean.mostrarDetallesModulo()}" />
                                    </p:column>                
                                </my:dataGrid>
                            </div>
                        </h:form>

                        <h:form>
                            <p:dialog header="Crear Módulo" 
                                      widgetVar="dlgDatos">
                                <center><h:messages errorClass="mensaje" infoClass="mensaje"/></center>  
                                <table width="300px" cellpadding="0" cellspacing="0">
                                    <tr>
                                        <td align="right"><h:outputLabel value="Nombre: "/></td>
                                        <td><p:inputText id="nombreModulo" value="#{moduloBean.nombreModulo}" style="width: 200px" styleClass="f11" maxlength="32"/></td>
                                    </tr>
                                    <tr>
                                        <td align="right"><h:outputLabel value="Ruta: "/></td>
                                        <td><p:inputText id="rutaModulo" value="#{moduloBean.rutaModulo}" style="width: 200px" styleClass="f11" maxlength="64" /></td>
                                    </tr>
                                </table>
                                <center>
                                    <p:panelGrid columns="2">
                                        <p:commandButton value="Crear" action="#{moduloBean.crearModulo}" styleClass="btn btn-info"/>
                                        <p:commandButton value="Cancelar" action="#{moduloBean.cancelarCrearModulo}" styleClass="btn btn-default"/>        
                                    </p:panelGrid>                        
                                </center>
                                </>
                        </h:form>

                        <h:form>
                            <p:dialog header="Actualizar Módulo" >
                                <center><h:messages errorClass="mensaje" infoClass="mensaje"/></center>  
                            <table width="300px" cellpadding="0" cellspacing="0">
                                <tr>
                                    <td align="right"><h:outputLabel value="Nombre: "/></td>
                                    <td><p:inputText id="nombreModulo" value="#{moduloBean.nombreModulo}" style="width: 200px" styleClass="f11" maxlength="15"/></td>
                                </tr>
                                <tr>
                                    <td align="right"><h:outputLabel value="Ruta: "/></td>
                                    <td><p:inputText id="rutaModulo" value="#{moduloBean.rutaModulo}" style="width: 200px" styleClass="f11" maxlength="35" /></td>
                                </tr>
                            </table>
                            <center>
                                <p:panelGrid columns="2">
                                    <p:commandButton value="Actualizar" action="#{moduloBean.actualizarModulo}" styleClass="btn btn-info"/>
                                    <p:commandButton value="Cancelar" action="#{moduloBean.cancelarActualizarModulo}" styleClass="btn btn-default"/>        
                                </p:panelGrid>                        
                            </center>
                            </p:dialog>
                        </h:form>        

                        <h:form>
                            <p:dialog header="Eliminar Módulo" widgetVar="dkgEliminar">
                                <center><h:messages errorClass="mensaje" infoClass="mensaje"/></center>  
                                <p:panelGrid columns="3">
                                    <h:outputText value="Está seguro que desea eliminar el Módulo " />
                                    <h:outputText value="#{moduloBean.moduloSeleccionado.nombre}" style="font-weight: bold;" />
                                    <h:outputText value="?" />
                                </p:panelGrid>

                                <center>
                                    <p:panelGrid columns="2">
                                        <p:commandButton value="Confirmar" action="#{moduloBean.eliminarModulo}" styleClass="btn btn-info"/>
                                        <p:commandButton value="Cancelar" action="#{moduloBean.cancelarEliminarModulo}" styleClass="btn btn-default"/>        
                                    </p:panelGrid>                        
                                </center>
                            </p:dialog>
                        </h:form> 
                    </div>
                </div>
            </ui:define>
        </ui:composition>
    </h:body>
</html>
