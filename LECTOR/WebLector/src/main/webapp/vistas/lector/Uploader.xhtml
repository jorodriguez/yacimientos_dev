<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <body>
        <ui:composition>            
            <p:growl showDetail="true"/>
            <h:form id="formUpload" enctype="multipart/form-data">
                <div class="card border-0 ml-2">                        
                    <div class="card-body d-flex justify-content-center">
                        <h5 class="card-title">
                            <i class="fa fa-upload text-gray" style="font-size: 5em;"/>
             
                                    <p:fileUpload value="#{uploaderView.fileInfo}" mode="simple" skinSimple="true">
                                    </p:fileUpload>

                                    <p:commandButton value="Subir" ajax="false" action="#{uploaderView.subirArchivo()}" styleClass="mt-3 ui-button-outlined block"/>
    
                            <!--<p:fileUpload id="adjArch"
                                          label=""
                                          multiple="false"                                                    
                                          chooseIcon="fa fa-upload "
                                          chooseButtonStyleClass="ui-button-secondary"
                                          chooseButtonTitle="ss"                                          
                                          uploadLabel="Subir"
                                          uploadIcon="fa fa-upload text-gray"
                                          uploadButtonTitle="Subir"
                                          uploadButtonStyleClass="ui-button-success  "                                                                                  
                                          cancelLabel="Cancelar"
                                          cancelButtonTitle="Cancelar"                
                                          cancelButtonStyleClass="ui-button-secondary"
                                          mode="advanced"                                                                                                                                                              
                                          previewWidth="100"                                  
                                          listener="#{uploaderView.subirAdjunto}"                                          
                                          />                           
                            -->
                        </h5>               
                        <p:graphicImage value="#{uploaderView.fileInfo.content}"/>
                        
                        <p:outputPanel id="cropperPanel">

                            <h:panelGrid columns="1" rendered="#{not empty uploaderView.originalImageFile}">

                                <p:commandButton value="Crop"
                                                 action="#{uploaderView.crop}"
                                                 update="cropped messages" styleClass="my-3"/>

                                <h:panelGrid columns="2" cellpadding="7">

                                    <p:imageCropper
                                        value="#{uploaderView.croppedImage}"
                                        id="imageCropper" cache="false"
                                        image="#{uploaderView.image}"
                                        initialCoords="50,50,150,100"
                                        minSize="50,50" maxSize="350,350"/>

                                    <p:outputPanel id="cropped">
                                        <p:graphicImage cache="false"
                                                        rendered="#{not empty uploaderView.croppedImage}"
                                                        value="#{uploaderView.cropped}"/>
                                    </p:outputPanel>

                                </h:panelGrid>
                            </h:panelGrid>

                        </p:outputPanel>
                    </div>
                    <div class="card-footer text-center">
                        <small class="text-muted">Sube una foto</small>
                    </div>
                </div>
            </h:form>
            <!-- <div class="card">
                 
                 <h:form id="formUpload" enctype="multipart/form-data">
                    
                     <p:fileUpload id="adjArch"
                                   label="Credencial"
                                   multiple="false"                                  
                                   uploadLabel="Subir"                                                                                  
                                   uploadButtonTitle="Subir"
                                   uploadButtonStyleClass="ui-button-success  "                                                                                  
                                   cancelLabel="Cancelar"
                                   cancelButtonTitle="Cancelar"                
                                   cancelButtonStyleClass="ui-button-secondary"
                                   mode="advanced"                                                                                                                    
                                   fileLimitMessage="Solo puede subir 1 archivo"
                                   previewWidth="100"                                  
                                   listener="#{uploaderView.subirAdjunto}"
                                   update="data"
                                    />
 
                     <p:outputPanel id="cropperPanel">
 
                         <h:panelGrid columns="1" rendered="#{not empty uploaderView.originalImageFile}">
 
                             <p:commandButton value="Crop"
                                              action="#{uploaderView.crop}"
                                              update="cropped messages" styleClass="my-3"/>
 
                             <h:panelGrid columns="2" cellpadding="7">
 
                                 <p:imageCropper
                                     value="#{uploaderView.croppedImage}"
                                     id="imageCropper" cache="false"
                                     image="#{uploaderView.image}"
                                     initialCoords="50,50,150,100"
                                     minSize="50,50" maxSize="350,350"/>
 
                                 <p:outputPanel id="cropped">
                                     <p:graphicImage cache="false"
                                                     rendered="#{not empty uploaderView.croppedImage}"
                                                     value="#{uploaderView.cropped}"/>
                                 </p:outputPanel>
 
                             </h:panelGrid>
                         </h:panelGrid>
 
                     </p:outputPanel>
                     
                       <p:dataTable 
                                 id="data"
                                  size="small" stripedRows="true" showGridlines="true" rows="20" 
                                  styleClass="table table-bordered table-striped"
                                  value="#{uploaderView.listaItems}" var="currentRow" 
                                  >										     				    
                         <p:column>
                             <f:facet name="header">
                                 <h:outputText value=""/>
                             </f:facet>                                                
                             <h:outputText value="#{currentRow.posicion}" />
                         </p:column>
                         <p:column>
                             <h:outputText value="#{currentRow.etiqueta}" />
                         </p:column>
                         <p:column>
                             <h:outputText value="#{currentRow.valor}" />
                         </p:column>
                     </p:dataTable>
                 </h:form>
             </div> -->
        </ui:composition>

    </body>
</html>