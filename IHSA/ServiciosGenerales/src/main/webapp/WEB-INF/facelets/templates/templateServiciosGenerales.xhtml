<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"      
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <style type="text/css">
            .ui-datepicker {
                z-index: 10000004 !important;
            }

            .filaConSombra{
                background-color: #EEE;
            }

            .filaSinSombra{
                background-color: #f8f8f8;
            }
        </style>

        <!-- Font Awesome -->

        <!-- Font Awesome -->
        <link rel="stylesheet" href="/resources/css/all.min.css" />
        <!-- Theme style -->
        <link rel="stylesheet" href="/resources/css/adminlte.min.css" />
        <!-- overlayScrollbars -->
        <link rel="stylesheet" href="/resources/css/OverlayScrollbars.min.css"/>


        <!-- Google Font -->
        <link rel="stylesheet"
              href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic"></link>

        <link href="#{request.contextPath}/recursos/css/kanban.css" rel="stylesheet"  type="text/css"></link>      
        <link href="#{request.contextPath}/recursos/css/menu.css" rel="stylesheet"  type="text/css"></link>                
        <link href="#{request.contextPath}/recursos/css/bootstrap-switch.css" rel="stylesheet"></link>
        <link href="#{request.contextPath}/recursos/css/jquery-clockpicker.css" rel="stylesheet"></link>

        <!--[if lt IE 9]
                <script type="text/javascript" src="../resources/js/jQuery1.9.js"></script>
               <![endif]-->
        <!--[if (gte IE 9) | (!IE)]>        
                <script type="text/javascript" src="../resources/js/jQuery1.9.js"></script>
        <![endif]-->        
        <!--BOOTSTRAP-->
        <!-- PANEL -->
        <noscript>
            <p>Su navegador no soporta javaScript</p>
        </noscript>
        <title>Sistema Integral de Administraci√≥n</title>
        <style type="text/css">
            .ui-datepicker {
                z-index: 1000004 !important;
            }

            .ui-dialog{
                z-index: 100000044 !important;
            }

            .filaConSombra{
                background-color: #EEE;
            }

            .filaSinSombra{
                background-color: #f8f8f8;
            }
            
            .ui-selectonemenu-panel{
                z-index: 1000009 !important;
            }
            
            .ui-autocomplete-panel{
                z-index: 1000009 !important;
            }
        </style>
        <script type="text/javascript">

            function mostrarJustificacionCompleta() {
                dialogJefe.show();
            }
            var data;

            function mostrarDiv(divM) {
                $("#" + divM).css({
                    "display": "block"
                });
            }

            function ocultarDiv(divOcultar) {
                $("#" + divOcultar).css({
                    "display": "none"
                });
            }
            function graficaPagos(pagos, graficaStaff, forma, hidden, btnBuscar, titulo, total, esMoneda) {
                //alert('datos  : :: : ' + pagos); 			
                if (pagos != null) {
                    pagoGenerales(pagos, graficaStaff, forma, hidden, btnBuscar, titulo, total, esMoneda);
                } else {
                    alert('No hay datos');
                }
            }
            //<![CDATA[
            function pagoGenerales(datos, grafica, forma, hidden, btnBuscar, titulo, total, esMoneda) {
                $.each(datos, function (i, point) {
                    point.y = point.total;
                });
                var t;
                if (esMoneda === 'Si') {
                    t = 'Total: <b> $ ' + total.toFixed(2).replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,") + '</b>';
                } else {
                    t = 'Total: <b>  ' + total + '</b>';
                }

                var chart = new Highcharts.Chart({
                    title: {
                        text: titulo
                    },
                    subtitle: {
                        style: {
                            color: 'black'
                        },
                        text: t
                    },
                    yAxis: {
                        title: {
                            text: 'Total'
                        }
                    },
                    plotOptions: {
                        pie: {
                            allowPointSelect: true,
                            cursor: 'pointer',
                            colorByPoint: true,
                            dataLabels: {
                                enabled: true,
                                style: {
                                    color: (Highcharts.theme) || 'black'
                                },
                                distance: 1,
                                useHTML: true,
                                formatter: function () {
                                    var tt;
                                    if (esMoneda === 'Si') {
                                        tt = '$ ' + this.point.y.toFixed(2).replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,");
                                    } else {
                                        tt = this.point.y;
                                    }
                                    return '<div class="datalabel""><span style="color: #333333; font-size: 1.09em;"> ' + this.point.name + '</br> <b>  ' + tt + '</b></span></div>';
                                }
                            },
                            showInLegend: false
                        }
                    },
                    chart: {
                        renderTo: grafica,
                        type: 'pie'
                    },
                    series: [{
                            name: 'Total',
                            data: datos,
                            dataLabels: {
                                color: 'black'
                                        //distance: -20,
                                        //formatter: function () {
                                        //    if (this.percentage != 0)
                                        //	return Math.round(this.percentage * 100) / 100 + ' %';
                                        //}
                            },
                            point: {
                                events: {
                                    click: function () {
                                        var point = this;
                                        $("#" + forma + "\\:" + hidden).val(this.name);
                                        $("#" + forma + "\\:" + btnBuscar).click();
                                        //
                                    }
                                }
                            }
                        }]
                });
            }
            //    ]]>
            function seleccionarTodo(todos, seleccion) {
                if ($("." + todos).is(":checked")) {
                    $("." + seleccion).prop("checked", "checked");
                } else {
                    $("." + seleccion).prop("checked", "");
                }
            }
        </script>

    </h:head>
    <h:body class="hold-transition layout-top-nav">
        <div class="wrapper">
            <c:if test="#{not empty sesion.usuario}">
                <h:form id="frmmenu" >
                    <nav class="main-header navbar navbar-expand-md navbar-light navbar-white">
                        <div class="container-fluid">
                            <p:ajaxStatus onstart="PF('statusDialog').show()"
                                          onsuccess="PF('statusDialog').hide()" />
                            <p:dialog widgetVar="statusDialog" modal="true" draggable="false"
                                      closable="false" resizable="false" showHeader="false" style="z-index: 100000045;">
                                <img src="/resources/img/wait.gif" width="150px"  alt="Procesando . . . "/>
                            </p:dialog>
                            <!-- Navbar --> 
                            <a class="navbar-brand">
                                 <h:commandLink  actionListener="#{sesion.siaGo(actionEvent)}">
                                    <img  src="/resources/img/sia.png"
                                          title="#{msgs['sistema.paginaPrincipalSia']}"
                                          style="width: 50px" 
                                          class="sinBorde" 
                                          alt="logo"/>                                                                              
                                </h:commandLink>   
                                
                            </a>
                            <button class="navbar-toggler order-1" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                                <span class="navbar-toggler-icon"></span>
                            </button>
                            <div class="col-12">
                                <div class="row">
                                    <ul class="navbar-nav col-12  ">
                                        <li class="nav-item col-5">
                                            <b><i class="fa fa-user text-gray text-sm"/> #{sesion.usuario.nombre}</b>
                                            <span class="text-gray">#{sesion.nombreRhPuesto}</span>
                                            <span class="text-gray">-#{sesion.nombreRol}</span>
                                        </li>                                        
                                        <li class="nav-item col-4 d-flex justify-content-end align-items-center aling-self-center">
                                            <i class="fa fa-user-cog text-sm text-gray pr-1"/>                                            
                                            <p:commandLink value="#{sesion.usuario.apCampo.nombre}" style="text-align: justify;"
                                                           onclick="$(dialogoCambiarCampo).modal('show')"
                                                           process="@this" update="frmModcam">
                                            </p:commandLink>                                            
                                            <p:commandLink value="#{sesion.oficinaActual.nombre}" title="Oficina seleccionada" styleClass="ml-4"
                                                           onclick="$(dialogoCambiarOficina).modal('show')"                                                           
                                                           process="@this" update="frmModOficina">                                                
                                            </p:commandLink>
                                        </li>
                                        
                                        <li class="nav-item col-2 text-right" >                                         
                                            <p:commandLink  actionListener="#{sesion.siaGo(actionEvent)}" ajax="false">
                                                <i class="fa fa-home"/>
                                                <span class="text-muted"> Inicio</span>
                                            </p:commandLink>   
                                
                                            <p:commandLink action="/vistas/sgl/administrar/ticketsSgl.xhtml?faces-redirect=true"
                                                           title="Registro de tickets">
                                                <i class="fa fa-users-cog"/>
                                                <span class="text-muted">Tickets</span>                                                
                                            </p:commandLink>
                                            <p:commandLink actionListener="#{sesion.cerrarSesion(actionEvent)}"
                                                           title="Salir del sistema" styleClass="ml-3">
                                                <i class="fa fa-eye-slash text-danger" />                                                
                                            </p:commandLink>
                                        </li>
                                    </ul>
                                </div>
                                <div class="row">
                                    <div class="collapse navbar-collapse order-3 " id="navbarCollapse">
                                        <!-- Navigation -->
                                        <ui:include src="menu.xhtml"/>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </nav>
                </h:form>
                <!-- Content Wrapper. Contains page content -->
                <div class="content-wrapper">
                    <!-- Main content -->
                    <div class="content">
                        <div class="container-fluid">
                            <h1 class="center">   
                                <ui:insert  name="titulo">Titulo</ui:insert>                                    
                            </h1>
                            <h:form>
                                <div  class="row">
                                    <p:messages id="messages" showDetail="false" closable="true" 
                                                class="col-12">
                                        <p:autoUpdate />
                                    </p:messages>
                                </div>
                            </h:form>
                            <div class="row">	
                                <div class="col-lg-12">    
                                    <h:form>
                                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade" responsive="true" width="350">
                                            <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no ui-button-flat"/>
                                            <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" />
                                        </p:confirmDialog>
                                    </h:form>                                    
                                    <ui:insert name="contenido">Content</ui:insert>
                                </div>	
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /.content-wrapper -->
                <footer class="main-footer">
                    <ui:include src="pie.xhtml" />
                </footer>
                <div class="row">
                    <ui:include src="cabecera.xhtml" />
                </div>
            </c:if>
            <c:if test="#{empty sesion.usuario}">
                <ui:include src="../../../login.xhtml"/>
            </c:if>
        </div>
        <!--script type="text/javascript" src="../js/intro.min.js"></script-->

        <!-- jQuery -->
        <script src="/resources/js/jquery.min.js"></script>
        <!-- jQuery UI 1.11.4 -->
        <script>
                                                               $.noConflict(true);
                                                               // Code that uses other library's $ can follow here.
        </script>
        <script src="/resources/js/jquery-ui.min.js"></script>
        <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
        <script>
                                                               $.widget.bridge('uibutton', $.ui.button);
        </script>
        <!-- Bootstrap 4 -->
        <script src="/resources/js/bootstrap.min.js"></script>
        <!-- overlayScrollbars -->
        <script src="/resources/js/jquery.overlayScrollbars.min.js"></script>
        <!-- AdminLTE App -->
        <script src="/resources/js/adminlte.js"></script>

        <!---->
        <script src="#{request.contextPath}/recursos/js/validacionesSgl.js" type="text/javascript" ></script>

        <!-- Inicio grafica-->
        <script src="#{request.contextPath}/recursos/js/highcharts.js" type="text/javascript"></script>
        <script src="#{request.contextPath}/recursos/js/exporting.js" type="text/javascript"></script>
        <script src="#{request.contextPath}/recursos/js/exportarGrafica.js" type="text/javascript"></script>        
        <script src="#{request.contextPath}/recursos/js/generaGrafica.js" type="text/javascript"></script>     

        <!-- Fin grafica-->
        <!--js swt-->
        <script src="#{request.contextPath}/recursos/js/menu.js" type="text/javascript"></script>
        <script type="text/javascript" src="#{request.contextPath}/recursos/js/jquery.typeahead.js"></script>
        <script type="text/javascript" src="#{request.contextPath}/recursos/js/bootstrap-switch.js" ></script>

    </h:body>

</html>
