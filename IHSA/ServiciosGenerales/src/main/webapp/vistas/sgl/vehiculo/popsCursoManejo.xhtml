<ui:composition  xmlns="http://www.w3.org/1999/xhtml"
                 xmlns:ui="http://java.sun.com/jsf/facelets"
                 xmlns:p="http://primefaces.org/ui"
                 xmlns:f="http://java.sun.com/jsf/core"
                 xmlns:c="http://java.sun.com/jsp/jstl/core"
                 xmlns:h="http://java.sun.com/jsf/html"

                 >


    <!--Modal para editar Fechas-->
    <h:form id="editCurso" >
        <div class="modal fade" id="editFechas" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4>Actualizar fechas de curso</h4>
                    </div>
                    <div class="modal-body">
                        <div class="row alert alert-info">
                            <label class="col-md-2 col-xs-4">Usuario: </label> #{cursoManejoBean.nombreUsuarioSeleccionado}
                        </div>
                        <div class="row">
                            <label class="col-md-5 col-xs-6">Numero de curso: </label>
                            <div class="col-md-7 col-xs-6">
                                <input type="text" class="form-control input-number" placeholder="Numero..." id="idCursoMEdit" name="idCursoMEdit" value="#{cursoManejoBean.numeroCurso}"/>
                            </div>
                        </div>

                        <div class="row">
                            <label class="col-md-5 col-xs-6">Fecha expedici√≥n: </label>
                            <div class="col-md-7 col-xs-6">
                                <script>
                                    $(function () {
                                        $(".fechaEdiEx").datepicker({
                                            showButtonPanel: true,
                                            buttonImage: "#{msgs['sgl.ruta.imagen']}cal_button.gif",
                                            buttonImageOnly: true,
                                            numberOfMonths: 2,
                                            dateFormat: "dd/mm/yy",
                                            onSelect: function (date) {
                                                fechaSeleccinadaSalida = date;
                                            },
                                            onClose: function (selectedDate) {
                                                $(".fechaVenEd").datepicker("option", "minDate", selectedDate);
                                                $(".fechaVenEd").datepicker('show');
                                            }
                                        });
                                    });
                                </script>
                                <style>
                                    .ui-datepicker-calendar .ui-state-active {
                                        background: #6eafbf;
                                        -webkit-box-shadow: inset 0px 0px 10px 0px rgba(0, 0, 0, .1);
                                        -moz-box-shadow: inset 0px 0px 10px 0px rgba(0, 0, 0, .1);
                                        box-shadow: inset 0px 0px 10px 0px rgba(0, 0, 0, .1);
                                        color: #e0e0e0;
                                        text-shadow: 0px 1px 0px #4d7a85;
                                        filter: dropshadow(color=#4d7a85, offx=0, offy=1);
                                        border: 1px solid #55838f;
                                        position: relative;
                                        margin: -1px;
                                    }
                                    .ui-datepicker-unselectable .ui-state-default {
                                        background-image:  url(#{msgs['sgl.ruta.imagen']}flight-status-icon.png);
                                    }
                                </style>
                                <h:inputText id="fechaEdiEx" value="#{cursoManejoBean.fechaInicio}" styleClass="form-control fechaEdiEx"> 
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:inputText>
                            </div>

                        </div>
                        <div class="row">
                            <label class="col-md-5 col-xs-6">Fecha de vencimiento:</label>
                            <div class="col-md-7 col-xs-6">
                                <script>
                                    $(function () {
                                        $(".fechaVenEd").datepicker({
                                            showButtonPanel: true,
                                            buttonImage: "#{msgs['sgl.ruta.imagen']}cal_button.gif",
                                            buttonImageOnly: true,
                                            dateFormat: "dd/mm/yy",
                                            numberOfMonths: 2,
                                            onSelect: function (date) {
                                                fechaSeleccinadaSalida = date;
                                            }
                                        });
                                    });
                                </script>
                                <h:inputText id="fechaVenEd" value="#{cursoManejoBean.fechaFin}" styleClass="form-control fechaVenEd" >
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:inputText>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" onclick="ejecutarBoton('editCurso', 'terminarActualizacion');">Actualizar</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                        <p:commandLink  action="#{cursoManejoBean.finEditCurso()}" id="terminarActualizacion"/>

                    </div>
                </div>
            </div>
        </div>
    </h:form>

    <!--pop agregar cursos desde excel-->
    <h:form id="addCursosDesdeExcel">
        <div class="modal fade" id="addOrUpdateCursos" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4>Agregar curso(s)</h4>
                    </div>
                    <div class="modal-body">
                        <div class="row alert alert-info">
                            Para poder registrar un curso a un usuario, el usuario debera de estar dado de alta en el <label>SIA</label>.
                            Da click en el boton para descargar a los usuarios que no cuentan con el curso registrado.

                            <p:commandLink  action="#{cursoManejoBean.descargarUsuarios()}" />
                            <h:outputLink value="/ServiciosGenerales/generarExcelU?ZWZ2W=#{cursoManejoBean.idCampoActual}" id="descargarUsuarios">
                                <button type="button" class="btn btn-primary" >
                                    <span class="glyphicon glyphicon-download-alt"></span>
                                </button>
                            </h:outputLink>
                        </div>
                        <div class="row alert alert-warning">
                            El nombre de los usuarios debera de permanecer como se muestra en el documento descargado.
                        </div>
                        <div class="row">
                            <div class="col-md-10">
                                <p:fileUpload  id="fileEntryInsertCurso"
                                               listener="#{cursoManejoBean.leerArchivoAltaOrUpdateUsuario}"
                                               label="Subir archivo"
                                               styleClass="col-md-8 col-xs-12"/>
                            </div>
                            <button type="button" class="btn btn-default col-md-2 col-xs-12" data-dismiss="modal">
                                Cancelar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </h:form>

    <!--pop actualizar cursos desde excel-->

</ui:composition>
