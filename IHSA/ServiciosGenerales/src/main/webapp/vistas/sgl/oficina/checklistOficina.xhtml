<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html" 
     
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <body>

        <ui:composition template="./../../../WEB-INF/facelets/templates/templateServiciosGenerales.xhtml">

            <ui:define name="contenido"  >

                <h:panelGroup  rendered="#{empty sesion.usuario}" styleClass="altura">
                    <ui:include src="./../../../login.xhtml"/>
                </h:panelGroup>                     

                <h:panelGroup rendered="#{not empty sesion.usuario}"  >
                    <p class="tituloEncabezado">#{msgs['sgl.checklist.oficina.titulo']}</p>
                    <h:form styleClass="textoIzquierda" >
                        <h:panelGrid columns="1" >
                            <p:commandLink type="submit" title="Crear Checklist" actionListener="#{checklistBean.mostrarPopupCrearChecklistOficina(actionEvent)}" styleClass="btn btn-default" >
                                <h:graphicImage url="#{msgs['sgl.ruta.imagen']}button_create.png" alt="Crear Checklist" styleClass="imagenSinBorde" width="16px" height="16px" />
                            </p:commandLink>
                            <p:commandLink value="Crear Checklist" styleClass="linkPequenio" actionListener="#{checklistBean.mostrarPopupCrearChecklistOficina(actionEvent)}"/>
                        </h:panelGrid>  
                    </h:form>

                    <h:form>
                        <p:dataTable id="dataGridChecklistOficina" rows="10"  value="#{checklistBean.checklistDataModel}" 
				     var="data"
				      >
                            <p:column style="text-align: center;">
                                <f:facet name="header">
                                    <h:outputText value="Inicio Semana" />
                                </f:facet>
                                <h:outputText value="#{data.sgChecklist.fechaInicioSemana}" >
                                    <f:convertDateTime pattern="dd/MM/yyyy" />
                                </h:outputText>
                            </p:column> 
                            <p:column style="text-align: center;">
                                <f:facet name="header">
                                    <h:outputText value="Fin Semana" />
                                </f:facet>
                                <h:outputText value="#{data.sgChecklist.fechaFinSemana}" >
                                    <f:convertDateTime pattern="dd/MM/yyyy" />
                                </h:outputText>
                            </p:column>  
                            <p:column style="text-align: center;">
                                <f:facet name="header">
                                    <h:outputText value="Fecha Creación" />
                                </f:facet>
                                <h:outputText value="#{data.sgChecklist.fechaGenero}" >
                                    <f:convertDateTime pattern="dd/MM/yyyy" />
                                </h:outputText>
                            </p:column>
                            <p:column style="text-align: center;">
                                <f:facet name="header">
                                    <h:outputText value="Fecha Modificación" />
                                </f:facet>
                                <h:outputText value="#{data.sgChecklist.fechaModifico}" rendered="#{data.sgChecklist.fechaModifico != null}" >
                                    <f:convertDateTime pattern="dd/MM/yyyy" />
                                </h:outputText>
                                <h:outputText value="#{msgs['sgl.generales.noModificado']}" rendered="#{data.sgChecklist.fechaModifico == null}" />
                            </p:column>                            
                            <p:column style="text-align: center;">
                                <f:facet name="header">
                                    <h:outputText value="Modificado" />
                                </f:facet>
                                <h:graphicImage url="#{msgs['sgl.ruta.imagen']}icon_good.png" rendered="#{data.sgChecklist.modificado eq'True'}" />
                                <h:graphicImage url="#{msgs['sgl.ruta.imagen']}icon_bad.png" rendered="#{data.sgChecklist.modificado eq 'False'}" />
                            </p:column>                                 
                            <p:column>
                                <h:commandLink value="#{msgs['sistema.modificar']}" actionListener="#{checklistBean.mostrarPopupActualizarChecklistOficina(actionEvent)}" styleClass="link" />
                            </p:column>                                
                            <p:column>
                                <h:commandLink value="#{msgs['sistema.detalle']}" actionListener="#{checklistBean.mostrarPopupDetalleChecklistOficina(actionEvent)}" styleClass="link" />
                            </p:column>                                
                        </p:dataTable>

                    </h:form>

                </h:panelGroup>

                <!-- Crear ChecklistOficina -->
                <h:form styleClass="textoIzquierda">
                    <p:dialog  header="Crear Checklist de Oficina" 
                               >
                        <center><h:messages errorClass="mensaje" infoClass="mensaje"/></center>
                        <h:panelGrid columns="2" >
                            <h:outputLabel value="Oficina: " styleClass="f12" />
                            <h:outputText id="oficina" value="#{sesion.oficinaActual.nombre}" style="width: 200px" styleClass="f11" />                            
                        </h:panelGrid>
                        <p:dataTable showGridlines="true" size="small"  value="#{checklistBean.checklistVODataModel}"
                                       var="data"
                                       scrollable="true"
                                       scrollHeight="400px"
                                        >
                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="Nombre"/>
                                </f:facet>
                                <h:outputText value="#{data.caracteristicaVo.nombre}" styleClass="#{data.caracteristicaVo.principal ? 'text-primary' : ''}" />
                            </p:column>                                 
                            <p:column style="text-align: center;" >
                                <f:facet name="header">
                                    <h:outputText value="Estado"/>
                                </f:facet>
                                <p:selectBooleanCheckbox value="#{data.estado}" rendered="#{data.caracteristicaVo.principal eq 'False'}" />
                            </p:column> 
                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="Observación" />
                                </f:facet>
                                <p:inputTextarea value="#{data.observacion}" rendered="#{data.caracteristicaVo.principal eq 'False'}" maxlength="1024" style="width: 210px" />
                            </p:column>                            
                        </p:dataTable>

                        <center>
                            <h:panelGrid columns="2">
                                <p:commandButton value="#{msgs['sistema.crear']}" actionListener="#{checklistBean.createChecklistOficina(actionEvent)}" styleClass="btn btn-info"/>
                                <p:commandButton value="#{msgs['sistema.cancelar']}" actionListener="#{checklistBean.ocultarPopupCrearChecklistOficina(actionEvent)}" immediate="true" styleClass="btn btn-default"/>        
                            </h:panelGrid>            
                        </center>
                    </my:panelPopup>
                </h:form> 

                <!-- Actualizar ChecklistOficina -->
                <h:form styleClass="textoIzquierda">
                    <p:dialog  header="Actualizar Checklist de Oficina" 
                               >
                        <center><h:messages errorClass="mensaje" infoClass="mensaje"/></center>
                        <h:panelGrid columns="2" >
                            <h:outputLabel value="Oficina: " styleClass="f12" />
                            <h:outputText id="idOficina" value="#{sesion.oficinaActual.nombre}" style="width: 200px" styleClass="f11" />                            
                        </h:panelGrid>

                        <br />

                        <p:dataTable showGridlines="true" size="small"  value="#{checklistBean.checklistOficinaVODataModelForUpdate}"
                                       var="data"
                                       scrollable="true"
                                       scrollHeight="400px"
                                        >
                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="Nombre"/>
                                </f:facet>
                                <h:outputText value="#{data.caracteristicaVo.nombre}" styleClass="#{data.caracteristicaVo.principal ? 'text-primary' : '' }" />
                            </p:column>                                 
                            <p:column style="text-align: center;" >
                                <f:facet name="header">
                                    <h:outputText value="Correcto"/>
                                </f:facet>
                                <p:selectBooleanCheckbox value="#{data.estado}" rendered="#{data.caracteristicaVo.principal eq 'False'}" />
                            </p:column> 
                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="Observación" />
                                </f:facet>
                                <p:inputTextarea value="#{data.observacion}" rendered="#{data.caracteristicaVo.principal eq 'False'}" maxlength="1024" style="width: 210px" />
                            </p:column>                            
                        </p:dataTable>

                        <center>
                            <h:panelGrid columns="2">
                                <p:commandButton value="#{msgs['sistema.actualizar']}" actionListener="#{checklistBean.updateChecklistOficina(actionEvent)}" styleClass="btn btn-info"/>
                                <p:commandButton value="#{msgs['sistema.cancelar']}" actionListener="#{checklistBean.ocultarPopupActualizarChecklistOficina(actionEvent)}" immediate="true" styleClass="btn btn-default"/>        
                            </h:panelGrid>            
                        </center>
                    </my:panelPopup>
                </h:form>                

                <!-- Detalle ChecklistOficina -->
                <h:form styleClass="textoIzquierda">
                    <p:dialog  header="Detalle Checklist de Oficina" 
                               >
                        <center><h:messages errorClass="mensaje" infoClass="mensaje"/></center>
                        <h:panelGrid columns="2" >
                            <h:outputLabel value="Oficina: " styleClass="f12" />
                            <h:outputText id="idOficina" value="#{sesion.oficinaActual.nombre}" style="width: 200px" styleClass="f11" />                            
                        </h:panelGrid>
                        <br />
                        <p:dataTable showGridlines="true" size="small"  value="#{checklistBean.checklistOficinaVODataModelForDetalle}"
                                       var="data"
                                       scrollable="true"
                                       scrollHeight="400px"
                                        >
                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="Nombre"/>
                                </f:facet>
                                <h:outputText value="#{data.caracteristicaVo.nombre}" styleClass="#{data.caracteristicaVo.principal ? 'text-primary': ''}" />
                            </p:column>                                 
                            <p:column style="text-align: center;">
                                <f:facet name="header">
                                    <h:outputText value="Correcto" />
                                </f:facet>
				<i class="#{data.estado ? 'fa fa-check-square-o text-success' : 'fa fa-minus text-warning'}"></i>
                            </p:column>   
                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="Observación" />
                                </f:facet>
                                <h:outputText value="#{data.observacion}" />
                            </p:column>                            
                        </p:dataTable>

                        <center>
                            <h:panelGrid columns="2">
                                <p:commandButton value="#{msgs['sistema.cerrar']}" actionListener="#{checklistBean.ocultarPopupDetalleChecklistOficina(actionEvent)}" styleClass="btn btn-default"/>        
                            </h:panelGrid>            
                        </center>
                    </my:panelPopup>
                </h:form>                

            </ui:define>

        </ui:composition>

    </body>
</html>