<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      >

    <body>
        <ui:composition template="./../../../../WEB-INF/facelets/templates/templateServiciosGenerales.xhtml">

            <ui:define name="contenido">
                <center><h:messages globalOnly="true" errorClass="errorMessage" infoClass="infoMessage"/></center>

                <h:panelGroup  rendered="#{empty sesion.usuario}" styleClass="altura">
                    <ui:include src="./../../../../login.xhtml"/>
                </h:panelGroup> 

                <br/>

                <h:form >       
                    <p class="tituloEncabezado">#{msgs['sgl.sgOficina.titulo.registro']}</p>

                    <h:panelGrid > 
                        <p:commandLink actionListener="#{oficinaBean.openPopupCreateSgOficina(event)}" title="#{msgs['sistema.crear']} #{msgs['sgl.sgOficina']}" styleClass="btn btn-default" >
                            <h:graphicImage title="#{msgs['sistema.crear']} #{msgs['sgl.sgOficina']}" alt="#{msgs['sistema.crear']} #{msgs['sgl.sgOficina']}" url="#{msgs['sgl.ruta.imagen']}button_create.png" styleClass="imagenSinBorde"/>
                        </p:commandLink>
                        <p:commandLink actionListener="#{oficinaBean.openPopupCreateSgOficina(event)}" value="#{msgs['sistema.crear']} #{msgs['sgl.sgOficina']}" title="#{msgs['sistema.crear']} #{msgs['sgl.sgOficina']}" styleClass="linkPequenio"/>                            
                    </h:panelGrid>

                    <br/>

                    <p:selectOneRadio value="#{oficinaBean.opcionSeleccionada}"
                                      valueChangeListener="#{oficinaBean.opcionSeleccionadaListener}"
                                      >
                        <f:selectItem itemLabel="#{msgs['sistema.VoBo']}" itemValue="1"/>
                        <f:selectItem itemLabel="#{msgs['sistema.sinVoBo']}" itemValue="2"/>
                    </p:selectOneRadio>

                    <p:dataTable showGridlines="true" size="small"  id="dtOficinaReg" value="#{oficinaBean.mapaLista.get('oficina')}" var="data" >
                        <p:column>
                            <f:facet name="header"><h:outputText value="#{msgs['sgl.generales.nombre']}"/></f:facet>
                            <h:outputText value="#{data.nombre}"/>
                        </p:column>
                        <p:column>
                            <f:facet name="header"><h:outputText value="#{msgs['sgl.staff.telefonoStaff']}"/></f:facet>
                            <h:outputText value="#{data.numeroTelefono}"/>
                        </p:column>                        
                        <p:column>
                            <f:facet name="header"><h:outputText value="PaÃ­s"/></f:facet>
                            <h:outputText value="#{data.nombreSiPais}"/>
                        </p:column>
                        <p:column>
                            <f:facet name="header"><h:outputText value="Estado"/></f:facet>
                            <h:outputText value="#{data.nombreSiEstado}"/>
                        </p:column>
                        <p:column>
                            <f:facet name="header"><h:outputText value="Ciudad"/></f:facet>
                            <h:outputText value="#{data.nombreSiCiudad}"/>
                        </p:column>                
                        <!--<p:column>
                            <f:facet name="header"><h:outputText value="Analista"/></f:facet>
                            <h:outputText value="#{data.analista.nombre}"/>
                        </p:column>-->
                        <p:column>
                            <f:facet name="header"><h:outputText value="#{msgs['sistema.VoBo']}"/></f:facet>
                            <center>
                                <h:outputText value="#{data.vistoBueno ? msgs['sistema.si'] : msgs['sistema.no']}"/>
                            </center>
                        </p:column>
                        <p:column>
                            <p:commandLink value="#{msgs['sistema.modificar']}" 
                                           actionListener="#{oficinaBean.openPopupUpdateSgOficina(actionEvent)}" styleClass="link" />
                        </p:column>                         
                        <p:column>
                            <p:commandLink value="#{msgs['sistema.eliminar']}" actionListener="#{oficinaBean.deleteSgOficina(actionEvent)}" rendered="#{not data.vistoBueno}" />
                            <p:confirm id="pnlC" 
                                       message="#{msgs['sgl.sgOficina.msg.eliminar']}"/>
                        </p:column>
                    </p:dataTable>
                </h:form>

                <!-- Popup Crear SgOficina -->
                <h:form id="formPopupCreateSgOficina" styleClass="textoIzquierda">
                    <p:dialog   draggable="false" 
                                modal="true"
                                styleClass="corePopup">
                        <f:facet name="header">
                            <h:panelGroup> 
                                <h:outputText value="#{msgs['sistema.crear']} #{msgs['sgl.sgOficina']}"/>
                            </h:panelGroup>
                        </f:facet>
                        <f:facet name="body">
                            <h:panelGroup>                    
                                <h:outputText id="msgsPopupCreateSgOficina" value="" />
                                <center><h:message for="msgsPopupCreateSgOficina" infoClass="infoMessage" warnClass="warnClass" errorClass="errorMessage" /></center>

                                <h:panelGrid columns="2">
                                    <h:panelGrid columns="2">
                                        <h:outputLabel value="#{msgs['sgl.generales.nombre']}" styleClass="f11" />
                                        <h:outputText value="*" styleClass="textoRojo" />
                                    </h:panelGrid>
                                    <h:panelGrid columns="2">
                                        <p:inputText id="nombre" value="#{oficinaBean.nombre}" maxlength="64" size="32" styleClass="f11" />
                                        <h:message for="nombre" infoClass="infoMessage" errorClass="errorMessage" />
                                    </h:panelGrid>
                                    <h:panelGrid columns="2">
                                        <h:outputLabel value="#{msgs['sgl.staff.telefonoStaff']}" styleClass="f11" />
                                        <h:outputText value="&nbsp;" styleClass="textoRojo" />
                                    </h:panelGrid>
                                    <h:panelGrid columns="2">
                                        <p:inputText id="telefono" value="#{oficinaBean.telefono}" maxlength="15" size="32" styleClass="f11" />
                                        <h:message for="telefono" infoClass="infoMessage" errorClass="errorMessage" />
                                    </h:panelGrid>
                                    <h:panelGrid columns="2">
                                        <h:outputLabel value="#{msgs['sgl.analista']}: "/>
                                        <h:outputText value="*" styleClass="textoRojo" />
                                    </h:panelGrid>
                                    <h:panelGrid columns="2">
                                        <!--ice:selectInputText id="analista"
                                                             listVar="analista"
                                                             value="#{oficinaBean.user}"
                                                             listValue="#{oficinaBean.listaUsuario}"
                                                             valueChangeListener="#{oficinaBean.usuarioListener}"
                                                             rows="10"                                                                 
                                                             immediate="true">
                                            <f:facet name="selectInputText">
                                                <h:panelGrid columns="2" style="margin-bottom: 2px;">
                                                    <h:outputText id="autoCompleteUsurOp" value="#{analista.nombre}" />
                                                </h:panelGrid>
                                            </f:facet>
                                        </ice:selectInputText--> 
                                        <h:message for="analista" errorClass="errorMessage" infoClass="infoMessage"/>
                                    </h:panelGrid>
                                    <h:panelGrid columns="2">
                                        <h:outputLabel value="#{msgs['sgl.direccion.pais']}" styleClass="f11" />
                                        <h:outputText value="*" styleClass="textoRojo" />
                                    </h:panelGrid>                            
                                    <h:panelGrid columns="2">
                                        <p:selectOneMenu id="pais" 
                                                         value="#{oficinaBean.idPais}"
                                                         valueChangeListener="#{oficinaBean.siPaisListener}"

                                                         styleClass="form-control">
                                            <f:selectItem itemLabel="#{msgs['sistema.seleccionar']} #{msgs['sia.siPais']}..." itemValue="-1"/>
                                            <f:selectItems value="#{oficinaBean.listaPais}"/>
                                        </p:selectOneMenu>
                                        <h:message for="pais" errorClass="errorMessage" infoClass="mensaje"/>
                                    </h:panelGrid>
                                    <h:panelGrid columns="2">
                                        <h:outputLabel value="#{msgs['sgl.direccion.estado']}" styleClass="f11" />
                                        <h:outputText value="*" styleClass="textoRojo" />
                                    </h:panelGrid>                            
                                    <h:panelGrid columns="2">
                                        <p:selectOneMenu id="estado" 
                                                         value="#{oficinaBean.idEstado}"
                                                         valueChangeListener="#{oficinaBean.siEstadoListener}"

                                                         styleClass="form-control">
                                            <f:selectItem itemLabel="#{msgs['sistema.seleccionar']} #{msgs['sia.siEstado']}..." itemValue="-1"/>
                                            <f:selectItems value="#{oficinaBean.listaEstado}"/>
                                        </p:selectOneMenu>
                                        <h:message for="estado" errorClass="errorMessage" infoClass="mensaje"/>
                                    </h:panelGrid>
                                    <h:panelGrid columns="2">
                                        <h:outputLabel value="#{msgs['sgl.direccion.ciudad']}" styleClass="f11" />
                                        <h:outputText value="*" styleClass="textoRojo" />
                                    </h:panelGrid>                            
                                    <h:panelGrid columns="2">
                                        <p:selectOneMenu id="ciudad" 
                                                         value="#{oficinaBean.idCiudad}"

                                                         styleClass="form-control">
                                            <f:selectItem itemLabel="#{msgs['sistema.seleccionar']} #{msgs['sia.siCiudad']}..." itemValue="-1"/>
                                            <f:selectItems value="#{oficinaBean.listaCiudad}"/>
                                        </p:selectOneMenu>
                                        <h:message for="ciudad" errorClass="errorMessage" infoClass="mensaje"/>
                                    </h:panelGrid>
                                    <h:panelGrid columns="2">
                                        <h:outputLabel value="#{msgs['sgl.direccion.municipio']}" styleClass="f11" />
                                        <h:outputText value="*" styleClass="textoRojo" />
                                    </h:panelGrid>                            
                                    <h:panelGrid columns="2">
                                        <p:inputText id="municipio" value="#{oficinaBean.municipio}" maxlength="128" size="32" styleClass="f11" />
                                        <h:message for="municipio" errorClass="errorMessage" infoClass="mensaje"/>
                                    </h:panelGrid>
                                    <h:panelGrid columns="2">
                                        <h:outputLabel value="#{msgs['sgl.direccion.colonia']}" styleClass="f11" />
                                        <h:outputText value="&nbsp;" styleClass="textoRojo" />
                                    </h:panelGrid>                            
                                    <h:panelGrid columns="2">
                                        <p:inputText id="colonia" value="#{oficinaBean.colonia}" maxlength="128" size="32" styleClass="f11" />
                                        <h:message for="colonia" errorClass="errorMessage" infoClass="mensaje"/>
                                    </h:panelGrid>
                                    <h:panelGrid columns="2">
                                        <h:outputLabel value="#{msgs['sgl.direccion.calle']}" styleClass="f11" />
                                        <h:outputText value="*" styleClass="textoRojo" />
                                    </h:panelGrid>                            
                                    <h:panelGrid columns="2">
                                        <p:inputText id="calle" value="#{oficinaBean.calle}" maxlength="128" size="32" styleClass="f11" />
                                        <h:message for="calle" errorClass="errorMessage" infoClass="mensaje"/>
                                    </h:panelGrid>
                                    <h:panelGrid columns="2">
                                        <h:outputLabel value="#{msgs['sgl.direccion.numeroExterior']}" styleClass="f11" />
                                        <h:outputText value="*" styleClass="textoRojo" />
                                    </h:panelGrid>                            
                                    <h:panelGrid columns="2">
                                        <p:inputText id="numExterior" value="#{oficinaBean.numExterior}" maxlength="8" size="32" styleClass="f11" />
                                        <h:message for="numExterior" errorClass="errorMessage" infoClass="mensaje"/>
                                    </h:panelGrid>
                                    <h:panelGrid columns="2">
                                        <h:outputLabel value="#{msgs['sgl.direccion.numeroInterior']}" styleClass="f11" />
                                        <h:outputText value="&nbsp;" styleClass="textoRojo" />
                                    </h:panelGrid>                            
                                    <h:panelGrid columns="2">
                                        <p:inputText id="numInterior" value="#{oficinaBean.numInterior}" maxlength="8" size="32" styleClass="f11" />
                                        <h:message for="numInterior" errorClass="errorMessage" infoClass="mensaje"/>
                                    </h:panelGrid>
                                    <h:panelGrid columns="2">
                                        <h:outputLabel value="#{msgs['sgl.direccion.piso']}" styleClass="f11" />
                                        <h:outputText value="&nbsp;" styleClass="textoRojo" />
                                    </h:panelGrid>                            
                                    <h:panelGrid columns="2">
                                        <p:inputText id="numPiso" value="#{oficinaBean.numPiso}" maxlength="8" size="32" styleClass="f11" />
                                        <h:message for="numPiso" errorClass="errorMessage" infoClass="mensaje"/>
                                    </h:panelGrid>
                                    <h:panelGrid columns="2">
                                        <h:outputLabel value="#{msgs['sgl.direccion.codigoPostal']}" styleClass="f11" />
                                        <h:outputText value="*" styleClass="textoRojo" />
                                    </h:panelGrid>                            
                                    <h:panelGrid columns="2">
                                        <p:inputText id="codigoPostal" value="#{oficinaBean.codigoPostal}" maxlength="8" size="32" styleClass="f11" />
                                        <h:message for="codigoPostal" errorClass="errorMessage" infoClass="mensaje"/>
                                    </h:panelGrid>                            

                                    <h:panelGrid columns="2">
                                        <h:outputLabel value="Latitud" styleClass="f11" />
                                        <h:outputText value="*" styleClass="textoRojo" />
                                    </h:panelGrid>                            
                                    <h:panelGrid columns="2">
                                        <p:inputText id="latitudID" value="#{oficinaBean.latitud}" maxlength="14" size="32" styleClass="f11" />
                                        <h:message for="latitudID" errorClass="errorMessage" infoClass="mensaje"/>
                                    </h:panelGrid>                            
                                    <h:panelGrid columns="2">
                                        <h:outputLabel value="Longitud" styleClass="f11" />
                                        <h:outputText value="*" styleClass="textoRojo" />
                                    </h:panelGrid>                            
                                    <h:panelGrid columns="2">
                                        <p:inputText id="logitudID" value="#{oficinaBean.longitud}" maxlength="14" size="32" styleClass="f11" />
                                        <h:message for="logitudID" errorClass="errorMessage" infoClass="mensaje"/>
                                    </h:panelGrid>                            
                                </h:panelGrid>
                                <center>
                                    <h:panelGrid columns="2">
                                        <p:commandButton value="#{msgs['sistema.guardar']}" actionListener="#{oficinaBean.saveSgOficina(actionEvent)}" styleClass="btn btn-info"/>
                                        <p:commandButton value="#{msgs['sistema.cancelar']}" actionListener="#{oficinaBean.closePopupCreateSgOficina(actionEvent)}" immediate="true" styleClass="btn btn-default" />        
                                    </h:panelGrid>                        
                                </center>
                            </h:panelGroup>
                        </f:facet>
                    </p:dialog > 
                </h:form>

                <!-- Popup Modificar SgOficina -->
                <h:form id="formPopupUpdateSgOficina" styleClass="textoIzquierda">
                    <p:dialog id="popupUpdateSgOficina" header="#{msgs['sistema.modificar']} #{msgs['sgl.sgOficina']}" 
                              >
                        <h:outputText id="msgsPopupUpdateSgOficina" value="" />
                        <center><h:message for="msgsPopupUpdateSgOficina" infoClass="infoMessage" warnClass="warnClass" errorClass="errorMessage" /></center>

                        <h:panelGrid columns="2">
                            <h:panelGrid columns="2">
                                <h:outputLabel value="#{msgs['sgl.generales.nombre']}" styleClass="f11" />
                                <h:outputText value="*" styleClass="textoRojo" />
                            </h:panelGrid>
                            <h:panelGrid columns="2">
                                <p:inputText id="nombre" value="#{oficinaBean.nombre}" styleClass="f11" maxlength="64" />
                                <h:message for="nombre" infoClass="infoMessage" errorClass="errorMessage" />
                            </h:panelGrid>
                            <h:panelGrid columns="2">
                                <h:outputLabel value="#{msgs['sgl.staff.telefonoStaff']}" styleClass="f11" />
                                <h:outputText value="&nbsp;" styleClass="textoRojo" />
                            </h:panelGrid>
                            <h:panelGrid columns="2">
                                <p:inputText id="telefono" value="#{oficinaBean.telefono}" styleClass="f11" maxlength="15" />
                                <h:message for="telefono" infoClass="infoMessage" errorClass="errorMessage" />
                            </h:panelGrid>
                            <h:panelGrid columns="2">
                                <h:outputLabel value="#{msgs['sgl.direccion.pais']}" styleClass="f11" />
                                <h:outputText value="*" styleClass="textoRojo" />
                            </h:panelGrid>                            
                            <h:panelGrid columns="2">
                                <p:selectOneMenu id="pais" 
                                                 value="#{oficinaBean.idPais}"
                                                 valueChangeListener="#{oficinaBean.siPaisListener}"

                                                 styleClass="form-control">
                                    <f:selectItem itemLabel="#{msgs['sistema.seleccionar']} #{msgs['sia.siPais']}..." itemValue="-1"/>
                                    <f:selectItems value="#{oficinaBean.listaPais}"/>
                                </p:selectOneMenu>
                                <h:message for="pais" errorClass="errorMessage" infoClass="mensaje"/>
                            </h:panelGrid>
                            <h:panelGrid columns="2">
                                <h:outputLabel value="#{msgs['sgl.direccion.estado']}" styleClass="f11" />
                                <h:outputText value="*" styleClass="textoRojo" />
                            </h:panelGrid>                            
                            <h:panelGrid columns="2">
                                <p:selectOneMenu id="estado" 
                                                 value="#{oficinaBean.idEstado}"
                                                 valueChangeListener="#{oficinaBean.siEstadoListener}"

                                                 styleClass="form-control">
                                    <f:selectItem itemLabel="#{msgs['sistema.seleccionar']} #{msgs['sia.siEstado']}..." itemValue="-1"/>
                                    <f:selectItems value="#{oficinaBean.listaEstado}"/>
                                </p:selectOneMenu>
                                <h:message for="estado" errorClass="errorMessage" infoClass="mensaje"/>
                            </h:panelGrid>
                            <h:panelGrid columns="2">
                                <h:outputLabel value="#{msgs['sgl.direccion.ciudad']}" styleClass="f11" />
                                <h:outputText value="*" styleClass="textoRojo" />
                            </h:panelGrid>                            
                            <h:panelGrid columns="2">
                                <p:selectOneMenu id="ciudad" 
                                                 value="#{oficinaBean.idCiudad}"

                                                 styleClass="form-control">
                                    <f:selectItem itemLabel="#{msgs['sistema.seleccionar']} #{msgs['sia.siCiudad']}..." itemValue="-1"/>
                                    <f:selectItems value="#{oficinaBean.listaCiudad}"/>
                                </p:selectOneMenu>
                                <h:message for="ciudad" errorClass="errorMessage" infoClass="mensaje"/>
                            </h:panelGrid>
                            <h:panelGrid columns="2">
                                <h:outputLabel value="#{msgs['sgl.direccion.municipio']}" styleClass="f11" />
                                <h:outputText value="*" styleClass="textoRojo" />
                            </h:panelGrid>                            
                            <h:panelGrid columns="2">
                                <p:inputText id="municipio" value="#{oficinaBean.municipio}" styleClass="f11" maxlength="128" />
                                <h:message for="municipio" errorClass="errorMessage" infoClass="mensaje"/>
                            </h:panelGrid>
                            <h:panelGrid columns="2">
                                <h:outputLabel value="#{msgs['sgl.direccion.colonia']}" styleClass="f11" />
                                <h:outputText value="&nbsp;" styleClass="textoRojo" />
                            </h:panelGrid>                            
                            <h:panelGrid columns="2">
                                <p:inputText id="colonia" value="#{oficinaBean.colonia}" styleClass="f11" maxlength="128" />
                                <h:message for="colonia" errorClass="errorMessage" infoClass="mensaje"/>
                            </h:panelGrid>
                            <h:panelGrid columns="2">
                                <h:outputLabel value="#{msgs['sgl.direccion.calle']}" styleClass="f11" />
                                <h:outputText value="*" styleClass="textoRojo" />
                            </h:panelGrid>                            
                            <h:panelGrid columns="2">
                                <p:inputText id="calle" value="#{oficinaBean.calle}" styleClass="f11" maxlength="128" />
                                <h:message for="calle" errorClass="errorMessage" infoClass="mensaje"/>
                            </h:panelGrid>
                            <h:panelGrid columns="2">
                                <h:outputLabel value="#{msgs['sgl.direccion.numeroExterior']}" styleClass="f11" />
                                <h:outputText value="*" styleClass="textoRojo" />
                            </h:panelGrid>                            
                            <h:panelGrid columns="2">
                                <p:inputText id="numExterior" value="#{oficinaBean.numExterior}" styleClass="f11" maxlength="8" />
                                <h:message for="numExterior" errorClass="errorMessage" infoClass="mensaje"/>
                            </h:panelGrid>
                            <h:panelGrid columns="2">
                                <h:outputLabel value="#{msgs['sgl.direccion.numeroInterior']}" styleClass="f11" />
                                <h:outputText value="&nbsp;" styleClass="textoRojo" />
                            </h:panelGrid>                            
                            <h:panelGrid columns="2">
                                <p:inputText id="numInterior" value="#{oficinaBean.numInterior}" styleClass="f11" maxlength="8" />
                                <h:message for="numInterior" errorClass="errorMessage" infoClass="mensaje"/>
                            </h:panelGrid>
                            <h:panelGrid columns="2">
                                <h:outputLabel value="#{msgs['sgl.direccion.piso']}" styleClass="f11" />
                                <h:outputText value="&nbsp;" styleClass="textoRojo" />
                            </h:panelGrid>                            
                            <h:panelGrid columns="2">
                                <p:inputText id="numPiso" value="#{oficinaBean.numPiso}" styleClass="f11" maxlength="8" />
                                <h:message for="numPiso" errorClass="errorMessage" infoClass="mensaje"/>
                            </h:panelGrid>
                            <h:panelGrid columns="2">
                                <h:outputLabel value="#{msgs['sgl.direccion.codigoPostal']}" styleClass="f11" />
                                <h:outputText value="*" styleClass="textoRojo" />
                            </h:panelGrid>                            
                            <h:panelGrid columns="2">
                                <p:inputText id="codigoPostal" value="#{oficinaBean.codigoPostal}" styleClass="f11" maxlength="8" />
                                <h:message for="codigoPostal" errorClass="errorMessage" infoClass="mensaje"/>
                            </h:panelGrid>       

                            <h:panelGrid columns="2">
                                <h:outputLabel value="Latitud" styleClass="f11" />
                                <h:outputText value="*" styleClass="textoRojo" />
                            </h:panelGrid>                            
                            <h:panelGrid columns="2">
                                <p:inputText id="latitudID" value="#{oficinaBean.latitud}" styleClass="f11" maxlength="14" />
                                <h:message for="latitudID" errorClass="errorMessage" infoClass="mensaje"/>
                            </h:panelGrid>                            
                            <h:panelGrid columns="2">
                                <h:outputLabel value="Longitud" styleClass="f11" />
                                <h:outputText value="*" styleClass="textoRojo" />
                            </h:panelGrid>                            
                            <h:panelGrid columns="2">
                                <p:inputText id="longitudID" value="#{oficinaBean.longitud}" styleClass="f11" maxlength="14" />
                                <h:message for="longitudID" errorClass="errorMessage" infoClass="mensaje"/>
                            </h:panelGrid>                            
                        </h:panelGrid>
                        <center>
                            <h:panelGrid columns="2">
                                <p:commandButton value="#{msgs['sistema.actualizar']}" actionListener="#{oficinaBean.updateSgOficina(actionEvent)}" styleClass="btn btn-info"/>
                                <p:commandButton value="#{msgs['sistema.cancelar']}" actionListener="#{oficinaBean.closePopupUpdateSgOficina(actionEvent)}" immediate="true" styleClass="btn btn-default" />        
                            </h:panelGrid>                        
                        </center>
                    </p:dialog>
                </h:form>                
            </ui:define>
        </ui:composition>
    </body>
</html>
