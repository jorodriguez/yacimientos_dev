<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
     
      xmlns:h="http://java.sun.com/jsf/html">
    <body>
        <ui:composition template="./../../../WEB-INF/facelets/templates/templateServiciosGenerales.xhtml">
            <ui:define name="contenido">      

                <h:form   rendered="#{not empty sesion.usuario}"   styleClass="textoIzquierda">                                        
                    <center>
                        <h:panelGrid>
                            <h:messages errorClass="mensaje" infoClass="mensaje"/> 
                        </h:panelGrid> 
                    </center> 
		    <p class="tituloEncabezado">Catálogo de Tipos de Solicitudes</p>

                    <h:panelGrid >                               
                        <h:panelGrid columns="2">
                            <h:panelGrid columns="2" style="text-align: end;">
                                <p:commandLink title="Crear nuevo tipo de solicitud de viaje" styleClass="btn btn-default" actionListener="#{tipoSolicitudBean.mostrarPopupCrear(event)}">
                                    <h:graphicImage url="#{msgs['sgl.ruta.imagen']}button_create.png" 
                                                      styleClass="imagenSinBorde"/>                            
                                </p:commandLink>                        
                            </h:panelGrid>           
                            <p:commandLink value="Crear nuevo tipo"  
                                             title="Crear nuevo tipo de solicitud de viaje"
                                             actionListener="#{tipoSolicitudBean.mostrarPopupCrear(event)}" styleClass="linkPequenio" />   
                        </h:panelGrid>
                    </h:panelGrid>
                </h:form>
                <br/>
                <h:form styleClass="textoIzquierda">
                    <p:dataTable id="dataGridTipoSolicitudes"  
                                 value="#{tipoSolicitudBean.tipoSolicitudViajeModel}"                                       
                                 rows="10"           var="data">                       
                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="Tipo"/>
                            </f:facet>
                            <h:outputText value="#{data['tipoEspecifico']}"/>
                        </p:column>
                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="Nombre"/>
                            </f:facet>
                            <h:outputText value="#{data['nombreSolicitud']}"/>
                        </p:column> 
                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="Anticipación"/>
                            </f:facet>
                            <h:outputText  rendered="#{data['horasAnticipacion'] == 0}" value="0 horas"/>
                            <h:outputText  rendered="#{data['horasAnticipacion'] == 12}" value="12 horas"/>
                            <h:outputText  rendered="#{data['horasAnticipacion'] == 24}" value="24 horas"/>
                            <h:outputText  rendered="#{data['horasAnticipacion'] == 36}" value="36 horas"/>
                            <h:outputText  rendered="#{data['horasAnticipacion'] == 48}" value="48 horas"/>
                            <h:outputText  rendered="#{data['horasAnticipacion'] == 720}" value="30 dias"/>
                            <h:outputText  rendered="#{data['horasAnticipacion'] == 1440}" value="60 dias"/>
                            <h:outputText  rendered="#{data['horasAnticipacion'] == 2160}" value="90 dias"/>
                        </p:column>
			<!-- <p:column>                            
			     <p:commandLink value="Asignar" actionListener="#{cadenasBean.asignarCadenas(event)}" action="asignarCadena"
					      onclick="if(!confirm('Esta seguro de asignar los aprobadores al tipo de solicitud #{data['nombre']} ...? ')) return false;"
					      styleClass="link">                                                              
				 <f:param name="idTipoSolicitudViaje" value="#{data['id']}"/>
			     </p:commandLink>
			 </p:column>-->
                        <p:column>                            
                            <p:commandLink value="#{msgs['sistema.modificar']}" actionListener="#{tipoSolicitudBean.mostrarPopupModificar(event)}"                                            
                                             styleClass="link"/>                                                              
                        </p:column>                            
                        <p:column>                            
                            <p:commandLink value="#{msgs['sistema.eliminar']}" actionListener="#{tipoSolicitudBean.eliminar(event)}"
                                             onclick="if (!confirm('Esta seguro de eliminar el tipo de solicitud #{data['nombre']} ...? '))
							 return false;"
                                             styleClass="link"/>                                                              
                        </p:column>
                    </p:dataTable>                           
                </h:form>
                <h:form styleClass="textoIzquierda">
                    <p:dialog  header="#{tipoSolicitudBean.operacion eq 'INSERTAR' ? 'Crear':'Modificar'} tipo de solicitud " >
                        <h:panelGrid>
                            <center>
                                <h:messages errorClass="mensaje" infoClass="mensaje"/>                                    
                            </center>  
                        </h:panelGrid>
                        <h:panelGrid columns="2" >
                            <h:outputText value="Tipo :"/>
                            <p:selectOneMenu value="#{tipoSolicitudBean.tipoEspecificoVia}" >
                                <f:selectItem itemValue="-1" itemLabel="Seleccione..." />  
                                <f:selectItems value="#{tipoSolicitudBean.tipoEspecificoViaItems}"/>
                            </p:selectOneMenu>
                            <h:outputText value="Nombre :"/>
                            <p:inputText value="#{tipoSolicitudBean.sgTipoSolicitudViaje.nombre}"/>
                            <h:outputText value="Horas de Anticipación :"/>
                            <p:selectOneMenu  value="#{tipoSolicitudBean.sgTipoSolicitudViaje.horasAnticipacion}" >
                                <f:selectItem itemLabel="Seleccione..." itemValue="-1"/>
                                <f:selectItem itemLabel="0 horas" itemValue="0"/>
                                <f:selectItem itemLabel="12 horas" itemValue="12"/>
                                <f:selectItem itemLabel="24 horas" itemValue="24"/>
                                <f:selectItem itemLabel="36 horas" itemValue="36"/>
                                <f:selectItem itemLabel="48 horas" itemValue="48"/>                                
                                <f:selectItem itemLabel="---------" itemValue="-1"/>                                
                                <f:selectItem itemLabel="30 dias" itemValue="720"/>                           
                                <f:selectItem itemLabel="60 dias" itemValue="1440"/>
                                <f:selectItem itemLabel="90 dias" itemValue="2160"/>
                            </p:selectOneMenu>                                    
                        </h:panelGrid>
                        <br/>
                        <center>
                            <h:panelGrid columns="2">
                                <p:commandLink value="Aceptar" rendered="#{tipoSolicitudBean.operacion eq 'INSERTAR'}" actionListener="#{tipoSolicitudBean.crearTipoSolicitud(event)}"  styleClass="btn btn-info" />                                               
                                <p:commandLink value="Modificar" rendered="#{tipoSolicitudBean.operacion eq 'MODIFICAR'}" actionListener="#{tipoSolicitudBean.modificarTipoSolicitud(event)}"  styleClass="btn btn-info" />                                               
                                <p:commandLink value="Cancelar" actionListener="#{tipoSolicitudBean.ocultarPopupCrear(event)}" styleClass="btn btn-default"/>                                        
                            </h:panelGrid>
                        </center>
                    </my:panelPopup>
                </h:form>    
            </ui:define>
        </ui:composition>
    </body>
</html>
