<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:h="http://java.sun.com/jsf/html"
                
                >
    <style >
        .iceSelInpTxtList{
            background-color: whitesmoke;                        
            z-index: 99999;
        }                   
    </style>

    <div class="modal fade" id="dialogoPopUpCrearViaje" data-backdrop="static" data-keyboard="false" style="color: black;">
        <div class="modal-dialog" style="width: 70%;">
            <div class="modal-content">
                <div class="modal-header">                    
                    <h4 class="modal-title">Crear Viaje Emergente</h4>
                </div>
                <div style="margin-top: 10px;" class="col-lg-12 col-xs-12">
                    <h:message  for="" style="display: block;" infoClass="alert alert-success" warnClass="alert alert-warning"
                                errorClass="alert alert-danger" fatalClass="alert alert-danger"  />
                </div>   

                <h:form id="frmPnlViajeEmer" >
                    <div class="modal-body">                                                                                                        
                        <div class="col-lg-12 col-xs-12">                                                        
                            <strong><h:outputText class="col-lg-12 col-xs-12 control-label" value="1. Fecha de salida"/></strong>
                            <div class="col-lg-12 col-xs-12">                                                                                                                    
                                <h:outputText class="col-lg-2 col-xs-12 control-label" value="#{msgs['sgl.solicitudViaje.fechaSalida']}: "/>
                                <div class="col-lg-3 col-xs-12">                                            
                                    <p:datePicker   pattern="dd/MM/yyyy" 
                                                       value="#{grViaje.fechaProgramada}"
                                                       required="true" requiredMessage="Es necesario seleccionar una fecha. "/>
                                </div>
                                <h:outputText class="col-lg-2 col-xs-12 control-label" value="#{msgs['sgl.solicitudViaje.horaSalida']}: "/>
                                <div class="col-lg-2 col-xs-12">                                            
                                    <p:selectOneMenu id="horaSalida" 
                                                       value="#{grViaje.horaSalida}"
                                                       styleClass="form-control"
                                                                                                                                          
                                                       >
                                        <f:selectItems value="#{grViaje.listaHoras}" />
                                    </p:selectOneMenu>
                                </div>
                                <div class="col-lg-2 col-xs-12">                                            
                                    <p:selectOneMenu id="minutoSalida" 
                                                       styleClass="form-control"
                                                       value="#{grViaje.minutoSalida}"
                                                       
                                                       >
                                        <f:selectItems value="#{grViaje.listaMinutos}" />
                                    </p:selectOneMenu>                                    
                                </div>
                                <h:outputText class="col-lg-1 col-xs-12 control-label" value="mins."/>
                            </div>
                            <strong><h:outputText class="col-lg-12 col-xs-12 control-label" value="#{msgs['sgl.viaje.vehiculo']}"/></strong>
                            <div class="col-lg-12 col-xs-12">
                                <div class="visible-lg col-lg-1"></div>
                                <h:outputText value="#{msgs['sgl.oficina.nombre']}:" class="col-lg-2 col-xs-12 control-label"/>
                                <div class="col-lg-6 col-xs-12">                                            
                                    <p:selectOneMenu  id="selectOneMenuOficinaVehiculos" value="#{grViaje.idOficinaVehiculo}"   styleClass="form-control"
                                                        valueChangeListener="#{grViaje.traerListaVehiculo}" 
                                                        >
                                        <f:selectItem itemLabel="#{msgs['sistema.seleccionar.combo']}" itemValue="-1"/>
                                        <f:selectItems value="#{grViaje.listaOficinaVehiculo}"/>
                                    </p:selectOneMenu>
                                </div>
                                <div class="visible-lg col-lg-3"></div>
                            </div>
                            <div class="col-lg-12 col-xs-12">
                                <div class="visible-lg col-lg-1"></div>
                                <h:outputText value="#{msgs['sgl.vehiculo']}:" class="col-lg-2 col-xs-12 control-label"/>
                                <div class="col-lg-6 col-xs-12">
                                    <p:selectOneMenu value="#{grViaje.idVehiculo}"   styleClass="form-control"
                                                       id="selectOneMenuVehiculo">
                                        <f:selectItem itemLabel="#{msgs['sistema.seleccionar']} #{msgs['sgl.vehiculo']}" 
                                                      itemValue="-1"/>
                                        <f:selectItems value="#{grViaje.listaVehiculos}"/>
                                    </p:selectOneMenu>
                                </div>
                                <div class="visible-lg col-lg-3"></div>
                            </div>
                            <strong><h:outputText class="col-lg-12 col-xs-12 control-label" value="#{msgs['sgl.viaje.chofer']}"/></strong>

                            <div class="col-lg-12 col-xs-12">                                                        
                                <div class="visible-lg col-lg-1"></div>
                                <h:outputText value="Empleado: " class="col-lg-2 col-xs-12 control-label"/>
                                <div class="col-lg-6 col-xs-12">
                                    <p:selectOneMenu id="userSelect"
                                                         value="#{grViaje.responsable}">
                                        <f:selectItems value="#{grViaje.listaUsuario}" />
                                    </p:selectOneMenu>
                                </div>
                                <div class="visible-lg col-lg-3"></div>
                            </div>
                            <h:outputText id="nombreUsuario"  style="padding-left: 15%; color: maroon; font-weight: bold; font-size: 14px;"/>
                            <strong><h:outputText class="col-lg-12 col-xs-12 control-label" value="4. #{msgs['sgl.viaje.ruta']}"/></strong>
                            <div class="col-lg-12 col-xs-12">
                                <div class="visible-lg col-lg-1"></div>
                                <h:outputText value="#{msgs['sgl.oficina.nombre']}:" class="col-lg-2 col-xs-12 control-label"/>
                                <div class="col-lg-6 col-xs-12">                                            
                                    <p:selectOneMenu  id="selectOneMenuOficinaRuta" value="#{grViaje.idOficinaRuta}"   styleClass="form-control"
                                                        valueChangeListener="#{grViaje.traerListaRutas}" 
                                                        >
                                        <f:selectItem itemLabel="#{msgs['sistema.seleccionar.combo']}" itemValue="-1"/>
                                        <f:selectItems value="#{grViaje.listaOficinaRuta}"/>
                                    </p:selectOneMenu>
                                </div>
                                <div class="visible-lg col-lg-3"></div>
                            </div>
                            <div class="col-lg-12 col-xs-12">
                                <div class="visible-lg col-lg-3"></div>
                                <div class="col-lg-6 col-xs-12">                                                        
                                    <p:selectOneRadio value="#{grViaje.idSiOperacion}"
                                                        valueChangeListener="#{grViaje.cabiarDestino}" >
                                        <f:selectItem itemLabel="Oficina" itemValue="21"/>
                                        <f:selectItem itemLabel="Ciudad" itemValue="22"/>
                                    </p:selectOneRadio>
                                </div>
                                <div class="visible-lg col-lg-3"></div>
                            </div>
                            <div class="col-lg-12 col-xs-12">
                                <div class="visible-lg col-lg-3"></div>
                                <div class="col-lg-6 col-xs-12">                                                        
                                    <p:selectOneMenu value="#{grViaje.idRuta}" id="rutaViaje"  
                                                       styleClass="form-control">
                                        <f:selectItem itemLabel="#{msgs['sistema.seleccionar']} #{msgs['sgl.viaje.ruta']}" 
                                                      itemValue="-1"/>
                                        <f:selectItems value="#{grViaje.listaRuta}"/>
                                    </p:selectOneMenu>
                                </div>
                                <div class="visible-lg col-lg-3"></div>
                            </div>
                            <strong><h:outputText class="col-lg-12 col-xs-12 control-label" value="5. Autorizo viaje emergente"/></strong>
                            <div id="busquedaAutorizo" class="col-lg-12 col-xs-12">
                                <div class="visible-lg col-lg-1"></div>
                                <h:outputText value="Autorizo " class="col-lg-2 col-xs-12 control-label"/>
                                <div class="col-lg-6 col-xs-12">
                                    <p:selectOneMenu id="userSelectAutorizo"
                                                         value="#{grViaje.autorizo}">
                                        <f:selectItems value="#{grViaje.listaAutorizo}" />
                                    </p:selectOneMenu>
                                </div>
                                <div class="visible-lg col-lg-1"></div>                                
                            </div>
                            <strong><h:outputText class="col-lg-12 col-xs-12 control-label" value="6. Viajeros"/></strong>
                            <div class="col-lg-12 col-xs-12">
                                <div class="visible-lg col-lg-1"></div>
                                <div class="col-lg-6 col-xs-12">                                                        
                                    <p:selectOneRadio id="selectViajero" value="#{grViaje.idSiOperacionViajero}"
                                                        onchange="validaSelectViajero();">
                                        <f:selectItem itemLabel="Empleados" itemValue="1"/>
                                        <f:selectItem itemLabel="Invitados" itemValue="2"/>
                                    </p:selectOneRadio>
                                </div>
                                <div class="visible-lg col-lg-5"></div>
                            </div>
                            <div id="busquedaEmpleado" class="col-lg-12 col-xs-12" style="#{grViaje.displayEmpleado}">                                                        
                                <div class="visible-lg col-lg-1"></div>
                                <h:outputText value="Empleado: " class="col-lg-2 col-xs-12 control-label"/>
                                <div class="col-lg-6 col-xs-12">
                                    <p:selectOneMenu id="userSelectEmpleado"
                                                         value="#{grViaje.empleado}">
                                        <f:selectItems value="#{grViaje.listaEmpleados}" />
                                    </p:selectOneMenu>
                                </div>
                                <div class="visible-lg col-lg-1"></div>
                                <h:commandButton
                                    value="Agregar"
                                    styleClass="btn btn-info col-lg-2 col-xs-12" 
                                    action="#{grViaje.agregarViajero(event)}"                                                                                  
                                    />                                
                            </div>
                            <div id="busquedaInvitado" class="col-lg-12 col-xs-12" style="#{grViaje.displayInvitado}">                                                        
                                <div class="visible-lg col-lg-1"></div>
                                <h:outputText value="Invitado: " class="col-lg-2 col-xs-12 control-label"/>
                                <div class="col-lg-6 col-xs-12">
                                    <p:selectOneMenu id="userSelectInvitado"
                                                         value="#{grViaje.invitado}">
                                        <f:selectItems value="#{grViaje.listaInvitados}" />
                                    </p:selectOneMenu>
                                </div>
                                <div class="visible-lg col-lg-1"></div>
                                <h:commandButton
                                    value="Agregar"
                                    styleClass="btn btn-info col-lg-2 col-xs-12" 
                                    action="#{grViaje.agregarViajero(event)}"                                         
                                    />

                            </div>                            
                            <div class="col-lg-12 col-xs-12">
                                <center>                                            
                                    <div class="table table-responsive" style="margin-bottom: 0px;">
                                        <p:dataTable showGridlines="true" size="small"  id="viajerosLST" rows="10" 
                                                       value="#{grViaje.listaViajeros}" var="currentRow" styleClass="table table-striped"
                                                       style="font-size:12px; color: black;">                                                                                  
                                            <p:column>
                                                <h:outputText value="#{currentRow.esEmpleado ?currentRow.usuario : currentRow.invitado}"/>
                                                <f:facet name="header">
                                                    <h:outputText value="Nombre"/>
                                                </f:facet>
                                            </p:column>                                            
                                            <p:column>
                                                <p:commandLink 
                                                    styleClass="btn btn-info btn-sm"                                                     
                                                    actionListener="#{grViaje.eliminarViajero(actionEvent)}"
                                                    title="Click aquí para eliminar el viajero..." >
                                                    <i class="glyphicon glyphicon-trash"></i>
                                                    <f:param name="indice" value="#{currentRow.id}"/>
                                                </p:commandLink>                                                        
                                            </p:column>
                                        </p:dataTable>
                                        <!-- aqui va el paginador -->                                            
                                    </div>
                                </center>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer" style="border-top: white;">
                        <h:commandButton id="saveSemaforo"
                                         value="Aceptar"
                                         styleClass="btn btn-info  col-lg-2 col-xs-12" 
                                         action="#{grViaje.completarCrearViajeEmergencia(event)}"                                         
                                         />
                        <p:commandButton
                            value="Cancelar"
                            styleClass="btn btn-cancelar col-lg-2 col-xs-12"
                            onclick="$(dialogoPopUpCrearViaje).modal('hide');"
                            title="Cerrar ventana..." 
                            />
                    </div>                            
                </h:form>
            </div>
        </div>
    </div>

    <div class="modal fade" id="dialogoPopUpCrearViajeExito" data-backdrop="static" data-keyboard="false" style="color: black;">
        <div class="modal-dialog" style="width: 70%;">
            <div class="modal-content">
                <div class="modal-header">                    
                    <h4 class="modal-title">Crear Viaje Emergente</h4>
                </div>

                <div class="modal-body">                                                                                                        
                    <div class="col-lg-12 col-xs-12 alert alert-success">                                                        
                        <strong><h:outputText class="col-lg-12 col-xs-12 control-label " value="#{grViaje.msgExitoCrearViaje}"/></strong>                            
                    </div>
                </div>
                <div class="modal-footer" style="border-top: white;">
                    <p:commandButton
                        value="Cerrar"
                        styleClass="btn btn-cancelar"
                        onclick="$(dialogoPopUpCrearViajeExito).modal('hide');"
                        title="Cerrar ventana..." 
                        />
                </div>                                           
            </div>
        </div>
    </div>

    
</ui:composition>