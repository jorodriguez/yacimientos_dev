<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      
      
     >
    <body>		
        <ui:composition template="./../../../../WEB-INF/facelets/templates/templateServiciosGenerales.xhtml">
            <ui:define name="contenido">
                <!--h:panelGroup  rendered="#{not empty sesion.usuario}" -->    
		<p class="tituloEncabezado">#{msgs['sgl.bitacora.titulo']} #{msgs['sistema.proposicion.de']} #{msgs['sgl.viaje']}</p>
		<center><h:messages globalOnly="true" errorClass="errorMessage" infoClass="infoMessage"/></center>                

		<h:form>     
		    <div class="col-lg-12 col-xs-12">
			<div  class="input-group col-lg-10">
			    <div class="form-group col-lg-10">
				<h:outputLabel value="#{msgs['sistema.buscar']}" styleClass="col-lg-1 control-label"/>
				<div class="col-lg-2">
				    <p:inputText  styleClass="form-control" value="#{bitacoraBean.cadena}"
						    />
				</div>
				<div class="col-lg-1">
				    <p:commandLink styleClass="btn btn-default btn-md" actionListener="#{bitacoraBean.searchViajeVoByCodigoAndSgViajeros(actionEvent)}" >
					<i class="fa fa-search fa-2x"></i>
				    </p:commandLink>
				</div>
			    </div>
			</div>
		    </div>
		</h:form>
		<h:form>
		    <div class="col-lg-10 col-xs-10">
			<div class="col-lg-4">
			    <div class="card  panel-default">
				<div class="card  panel-heading">
				    Viaje: #{bitacoraBean.viajeVo.codigo}
				</div>
				<div class="card  panel-body">
				    <h:panelGrid columns="2" >
					<h:outputLabel value="VehÃ­culo:"  />
					<h:outputText value="#{bitacoraBean.viajeVo.vehiculoVO.modelo}" styleClass="f11" />                                    
					<h:outputLabel value="#{msgs['sistema.responsable']}:"  />
					<h:outputText value="#{bitacoraBean.viajeVo.responsable}" styleClass="f11" />
					<h:outputLabel value="#{msgs['sgl.solicitudViaje.fechaSalida']}: "  />
					<h:outputText value="#{bitacoraBean.viajeVo.fechaSalida}" styleClass="f11">
					    <f:convertDateTime pattern="dd/MM/yyyy" type="date" />
					</h:outputText>                                    
					<h:outputLabel value="#{msgs['sgl.solicitudViaje.horaSalida']}: "  />
					<h:outputText value="#{bitacoraBean.viajeVo.horaSalida}" styleClass="f11">
					    <f:convertDateTime  type="time" pattern="HH:mm:ss a"/>
					</h:outputText>                                    
				    </h:panelGrid>
				</div>
			    </div>

			</div>
			<div class="col-lg-4">
			    <div class="card  panel-default">
				<div class="card  panel-heading">
				    <h:outputLabel value="Viajeros " />
				</div>
				<div class="card  panel-body">
				    <p:dataTable showGridlines="true" size="small"  id="dataGridViajeros"
						   value="#{bitacoraBean.viajeVo.listaViajeros}"
						   var="data" >
					<p:column>
					    <f:facet name="header">
						<h:outputText value="#{msgs['sgl.generales.nombre']}"/>
					    </f:facet>
					    <h:outputText value="#{data.usuario ne 'null' ? data.usuario : data.invitado}" styleClass="f11" />
					</p:column>                                 
					<p:column style="text-align: center;">
					    <f:facet name="header">
						<h:outputText value="#{msgs['sgl.generales.observacion']}"/>
					    </f:facet>
					    <h:outputText value="#{data.observacion}" />
					</p:column> 
				    </p:dataTable>   
				</div>
			    </div>
			    <div class="col-lg-4">

			    </div>
			</div>
		    </div>
		</h:form>    
		<!--/h:panelGroup-->
		<h:form id="noticiaForm">
		    <div class="col-lg-12">
			<div class="card  panel-default">
			    <div class="card -heading">
				<h:outputLabel title="#{msgs['comunicacion.clic.aqui.para']} #{msgs['comunicacion.ir.inicio']}" 
					       class="text-primary">
				    <h3><i class="fa fa-bullhorn fa-fw"></i> Comunicados</h3>
				</h:outputLabel>
			    </div>
			    <div class="card-body">
				<ul class="chat">
				    <div class="header">
					<strong class="primary-font">
					    <h:outputText class="text-primary" value="#{data['usuarioNombre']}"/>
					    #{bitacoraBean.viajeVo.noticia.genero}
					</strong>
					<strong class="primary-font">
					    <h:outputText  value="#{bitacoraBean.viajeVo.noticia.mensajeAutomatico}" escape="false"/>
					</strong>
					<small class="pull-right text-muted">
					    <i class="fa fa-clock-o fa-fw"></i>
					    <h:outputText value="#{bitacoraBean.viajeVo.noticia.fechaGenero}">
						<f:convertDateTime dateStyle="medium" type="date"/>
					    </h:outputText> - 
					    <h:outputText value="#{bitacoraBean.viajeVo.noticia.horaGenero}">
						<f:convertDateTime pattern="h:mm a" 
								   timeStyle="default" 
								   type="time"/>
					    </h:outputText>
					</small>
					<br/>
				    </div>
				    <p:dataTable showGridlines="true" size="small"  value="#{bitacoraBean.viajeVo.noticia.listaComentario}" 
                                                 var="data" >
					<p:column>
					    <li class="left clearfix">
						<div class="chat-body clearfix">
						    <div class="header">
							<strong class="primary-font">
							    <h:outputText class="text-primary" value="#{data['usuarioNombre']}"/>
							</strong>
							<small class="pull-right text-muted">
							    <i class="fa fa-clock-o fa-fw"></i>
							    <h:outputText value="#{data['fechaGenero']}">
								<f:convertDateTime dateStyle="medium" type="date"/>
							    </h:outputText> - 
							    <h:outputText value="#{data['horaGenero']}">
								<f:convertDateTime pattern="h:mm a" 
										   timeStyle="default" 
										   type="time"/>
							    </h:outputText>
							</small>
							<br/>
						    </div>
						    <p>
							<h:outputLabel value="#{data['titulo']}" />
							<h:outputText value="#{data['mensaje']}" escape="false"/>                                       
							<h:outputText value="#{data['mensajeAutomatico']}" escape="false"/>
						    </p>
						</div>
					    </li>
					</p:column>
				    </p:dataTable>
				</ul>
			    </div>
			</div>
		    </div>
		</h:form>
		<br/>

	    </ui:define>
	</ui:composition>
    </body>
</html>
