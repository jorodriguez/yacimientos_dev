<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"

      xmlns:f="http://java.sun.com/jsf/core">
    <body>
        <ui:composition template="./../../../../WEB-INF/facelets/templates/templateServiciosGenerales.xhtml">
            <ui:define name="contenido">
                <div class="row">
                    <p  class="h3 text-info "> Registro de gastos de viajes AÃ©reos</p>
                </div>
                <h:form id="frmGastoViaje">
                    <div class="row">
                        <div class="col-lg-2"></div>
                        <div class="col-lg-8">
                            <h:outputLabel value="Inicio"/>
                            <script>
                                $(function () {
                                    $("#frmGastoViaje\\:inicio").datepicker({
                                        showOn: "button",
                                        buttonImage: "../resources/img/cal_button.gif",
                                        buttonImageOnly: true,
                                        dateFormat: "dd/mm/yy",
                                        onSelect: function (date) {
                                            inicio = date;
                                        }
                                    });
                                });
                            </script>
                            <h:inputText  value="#{gastoViajeBean.inicio}" id="inicio" size="10" required="true" requiredMessage="Seleccione el inicio"/>
                            <h:outputLabel value="Fin" />
                            <script>
                                $(function () {
                                    $("#frmGastoViaje\\:fin").datepicker({
                                        showOn: "button",
                                        buttonImage: "../resources/img/cal_button.gif",
                                        buttonImageOnly: true,
                                        dateFormat: "dd/mm/yy",
                                        onSelect: function (date) {
                                            fin = date;
                                        },
                                        onClose: function (selectedDate) {
                                            $("#frmGastoViaje\\:inicio").datepicker("option", "maxDate", selectedDate);
                                        }
                                    });
                                });
                            </script>
                            <h:inputText  value="#{gastoViajeBean.fin}" id="fin" size="10" required="true" requiredMessage="Seleccione el final"/>            
                            <h:commandLink value="Buscar" actionListener="#{gastoViajeBean.bsucarVaiajes(event)}" 
                                           class="btn btn-sm btn-info"/>
                        </div>
                        <div class="col-lg-7">
                        </div>
                    </div>
                    <br/>
                    <div class="row-fluid">
                        <!-- Viajes -->
                        <p:dataTable  var="data" value="#{gastoViajeBean.lista}"
                                      rows="5" styleClass="dataPaginatorDataTable" 
                                      paginator="true"  showGridlines="true" size="small"
                                      paginatorPosition="bottom" 
                                      rowStyleClass="#{data.gasto gt 0 ? 'h6 text-info' : 'h6 text-danger'}">

                            <p:column headerText="Solicitud" styleClass="h5">
                                <h:outputText value="#{data.solicitud}"/>
                            </p:column>
                            <!--p:column headerText="Viaje Factura" styleClass="h5">
                                <h:outputText value="#{data.idViajeFactura}"/>
                            </p:column-->
                            <p:column headerText="Viaje" styleClass="h5">
                                <h:outputText value="#{data.codigo}"/>
                            </p:column>
                            <p:column headerText="Responsable" styleClass="h5">
                                <h:outputText  value="#{data.responsable}"/>
                            </p:column>
                            <p:column headerText="Origen" styleClass="h5">
                                <h:outputText value="#{data.origen}"/>
                            </p:column>
                            <p:column headerText="Destino" styleClass="h5">
                                <h:outputText value="#{data.destino}"/>
                            </p:column>
                            <p:column headerText="Salida" styleClass="h5">
                                <h:outputText value="#{data.fechaSalida}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Hora Salida" styleClass="h5">
                                <h:outputText value="#{data.horaSalida}">
                                    <f:convertDateTime pattern="HH:mm a"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Regreso" styleClass="h5">
                                <h:outputText value="#{data.fechaRegreso}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Gasto" styleClass="h5">
                                <h:outputText value="#{data.gasto}">
                                    <f:convertNumber maxFractionDigits="2" pattern="0,000.00"/>
                                </h:outputText>
                            </p:column>
                            <p:column>
                                <h:commandLink value="Gasto" class="link"
                                               actionListener="#{gastoViajeBean.iniciarRegistroViaje(event)}"
                                               action="/vistas/sgl/viaje/costos/registroFactura">
                                    <f:param name="viaje" value="#{data.id}"/>
                                </h:commandLink>
                            </p:column>
                        </p:dataTable>
                    </div>
                </h:form>

            </ui:define>
        </ui:composition>
    </body>
</html>
