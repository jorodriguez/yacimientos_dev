<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      
     
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      >
    <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
    <h:form  id="formAprobarSolicitudes">
        <div class="card  panel-default">
            <ul class="nav nav-tabs">
                <li class="#{sesion.idRol == 64 ? 'active' : ''}" style="#{sesion.idRol == 64}"><a data-toggle="tab" href="#aOficina" style="#{sesion.idRol == 64}">Terrestres(#{solicitudViajeBean.countSVT})</a></li>
                <li  class="#{sesion.idRol == 14 ? 'active' : ''}" style="#{sesion.idRol == 14}"><a data-toggle="tab" href="#Aereas" style="#{sesion.idRol == 14}">Vacaciones(#{solicitudViajeBean.countSVA})</a></li>
            </ul>
            <div class="tab-content">
                <div id="aOficina" class="tab-pane #{sesion.idRol == 64 ? 'fade in active' : 'fade'}" style="#{sesion.idRol == 64}">
                    <br/>
                    <div class="row-fluid">
                        <div class="btn-group">
                            <button type="button" class="btn btn-primary" onclick="ejecutarBoton('formAprobarSolicitudes', 'AprobarGerente');" id="aprobarSV" > 
                                <label>Autorizar</label>
                            </button>
                            <button type="button" class="btn btn-default" onclick="ejecutarBoton('formAprobarSolicitudes', 'cancelarSolicitudes');" id="cancelarSV" >
                                <label>Cancelar</label>
                            </button>
                        </div>
                        <p:commandLink action="#{solicitudViajeBean.aprobar()}" id="AprobarGerente" />
                        <p:commandLink action="#{solicitudViajeBean.popMotivoCancelar()}" id="cancelarSolicitudes" />
                    </div>
                    <br/>
                    <div class="table table-responsive" >
                        <p:dataTable id="viajerosTerrestre" value="#{solicitudViajeBean.listSolicitudesVo}" var="via" 
                                       styleClass="table table-striped" style="width: 99.9%" 
                                       >
                            <p:columnGroup type="header">
                                <p:row>
                                    <p:column id="hselect">
                                        <f:facet name="header">
                                            <h:selectBooleanCheckbox  class="todos" onchange="seleccionarTodo('todos', 'seleccion')"
                                                                      id="selectTodo" value="#{solicitudViajeBean.selectTodo}" 
                                                                      valueChangeListener="#{solicitudViajeBean.selecionarTodoTer}" immediate="true">
                                                <f:ajax event="click" />
                                            </h:selectBooleanCheckbox>
                                        </f:facet>
                                    </p:column>
                                    <p:column id="hCodigo"/>
                                    <p:column id="hRuta" headerText="Ruta" style="font-size: small;"/>
                                    <p:column id="hSalida" headerText="Salida" style="font-size: small;"/>
                                    <p:column id="hregreso" headerText="Regreso" style="font-size: small;"/>
                                    <p:column id="hviajeros" headerText="Viajeros" style="font-size: small;"/>
                                </p:row>
                            </p:columnGroup>
                                <p:column style="font-size: medium; text-align: center; padding: 3px 0px 3px 0px;">
                                    <h:selectBooleanCheckbox value="#{via.select}" style="font-size: 12px" class="seleccion"/>
                                </p:column>
                                <p:column  style="font-size: small; text-align: center; padding: 3px 0px 3px 0px;">
                                    <h:outputText value="#{via.codigo}" />
                                </p:column>
                                <p:column headerText="Ruta" id="rutaSolicitud"  style="text-align: left; font-size: small; padding: 3px 0px 3px 0px;">
                                    <h:outputText value="#{via.origen} a #{via.destino}"/>
                                </p:column>
                                <p:column headerText="Salida" id="salida"  style="text-align: left; font-size: small; padding: 3px 0px 3px 0px;">
                                    <h:outputText id="fsalida" value="#{via.fechaSalida}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText> 
                                    <label> </label>
                                    <h:outputText id="horaSalida" value="#{via.horaSalida}">
                                        <f:convertDateTime pattern="HH:mm "/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Regreso" id="regreso" style="text-align: left; font-size: small; padding: 3px 0px 3px 0px;">
                                    <h:outputText id="fregreso" value="#{via.fechaRegreso}" rendered="#{via.redondo}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText> 
                                    <label> </label>
                                    <h:outputText id="horaRegreso" value="#{via.horaRegreso}"  rendered="#{via.redondo}">
                                        <f:convertDateTime pattern="HH:mm "/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Viajeros"  style="text-align: center; font-size: small; padding: 3px 0px  3px 0px;">
                                    <h:dataTable id="listViajeros" var="data"  value="#{via.viajeros}">
                                        <h:column class="tabla1">
                                            <h:outputText value="#{data.usuario}" rendered="#{data.idInvitado == 0}"/>
                                            <h:outputText value="#{data.invitado}" rendered="#{data.idInvitado != 0}"/>
                                        </h:column>
                                    </h:dataTable>
                                </p:column>
                        </p:dataTable>
                        <style type="text/css">
                            .ui-datatable{line-height: 1;}
                            .ui-datatable table{
                                border-collapse: collapse;
                                border-color: whitesmoke;
                                border-style: none;
                                width: 100%
                            }
                        </style>
                        <br/>
                    </div>
                </div>
                
                <div id="Aereas" style="#{sesion.idRol == 14}" class="tab-pane #{sesion.idRol == 14 ? 'fade in active' : 'fade'}">
                    <br/>
                    <div class="row-fluid">
                        <div class="btn-group">
                            <button type="button" class="btn btn-primary" onclick="ejecutarBoton('formAprobarSolicitudes', 'AprobarGerenteAerea');" id="aprobarSVAerea" > 
                                <label>Visto Bueno</label>
                            </button>
                            <button type="button" class="btn btn-default" onclick="ejecutarBoton('formAprobarSolicitudes', 'cancelarSolicitudesAerea');" id="cancelarSVAerea" >
                                <label>Cancelar</label>
                            </button>
                        </div>
                        <p:commandLink action="#{solicitudViajeBean.aprobarSVAereas()}" id="AprobarGerenteAerea" />
                        <p:commandLink action="#{solicitudViajeBean.popMotivoCancelarAereas()}" id="cancelarSolicitudesAerea" />
                        
                    </div>
                    <br/>
                    <div class="table table-responsive">
                        <p:dataTable id="viajerosAereos" value="#{solicitudViajeBean.listSolicitudesVoAereas}" var="viaAe" styleClass="table table-striped" style="width: 99.9%">
                            <p:columnGroup type="header">
                                <p:row>
                                    <p:column id="hselectA">
                                        <f:facet name="header">
                                            <h:selectBooleanCheckbox  class="todosA"  onchange="seleccionarTodo('todosA','seleccionA')"
                                                                      id="selectTodoAer" value="#{solicitudViajeBean.selectTodo}" 
                                                                      valueChangeListener="#{solicitudViajeBean.selecionarTodoAereo}" immediate="true">
                                                <f:ajax event="click"/>
                                            </h:selectBooleanCheckbox>
                                        </f:facet>
                                    </p:column>
                                    <p:column id="hCodigoA"/>
                                    <p:column id="hRutaA" headerText="Ruta" style="font-size: small;"/>
                                    <p:column id="hSalidaA" headerText="Salida" style="font-size: small;"/>
                                    <p:column id="hregresoA" headerText="Regreso" style="font-size: small;"/>
                                    <p:column id="hviajerosA" headerText="Viajeros" style="font-size: small;"/>
                                </p:row>
                            </p:columnGroup>
                                <p:column style="font-size: medium; text-align: center; padding: 3px 0px  3px 0px;">
                                    <h:selectBooleanCheckbox value="#{viaAe.select}" class="seleccionA" id="selected"/>
                                </p:column>
                                <p:column  style="font-size: small; text-align: center; padding: 3px 0px  3px 0px;">
                                    <h:outputText value="#{viaAe.codigo}" />
                                </p:column>
                                <p:column id="rutaSolicitud"  style="text-align: left; font-size: small; padding: 3px 0px  3px 0px;">
                                    <h:outputText value="#{viaAe.origen} a #{viaAe.destino}"/>
                                </p:column>
                                <p:column id="salidaAerea"  style="text-align: left; font-size: small; padding: 3px 0px  3px 0px;">
                                    <h:outputText id="fsalidaAerea" value="#{viaAe.fechaSalida}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText> 
                                    <label> </label>
                                    <h:outputText id="horaSalidaAerea" value="#{viaAe.horaSalida}">
                                        <f:convertDateTime pattern="HH:mm "/>
                                    </h:outputText>
                                </p:column>
                                <p:column id="regresoAerea"  style="text-align: left; font-size: small; padding: 3px 0px  3px 0px;">
                                    <h:outputText id="fregresoAerea" value="#{viaAe.fechaRegreso}" rendered="#{via.redondo}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText> 
                                    <label> </label>
                                    <h:outputText id="horaRegresoAerea" value="#{via.horaRegreso}"  rendered="#{via.redondo}">
                                        <f:convertDateTime pattern="HH:mm "/>
                                    </h:outputText>
                                </p:column>
                                <p:column style="text-align: left; font-size: small; padding: 3px 0px  3px 0px;">
                                    <h:dataTable id="listViajerosAerea" var="data2"  value="#{viaAe.viajeros}">
                                        <h:column>
                                            <h:outputText value="#{data2.usuario}" rendered="#{data2.idInvitado == 0}"/>
                                            <h:outputText value="#{data2.invitado}" rendered="#{data2.idInvitado != 0}"/>
                                        </h:column>
                                    </h:dataTable>
                                </p:column>
                        </p:dataTable>
                        <br/>
                    </div>
                </div>

            </div>
        </div>

    </h:form>
    <h:form id="frmCancelarSolicitudes">
        <div class="modal fade" id="modalCancelar" role="dialog">
            <div class="modal-dialog">

                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">Cancelar Solicitud(es): #{solicitudViajeBean.codigos}</h4>
                    </div>
                    <div class="modal-body">
                        <textArea class="col-lg-12" placeholder="Motivo de cancelacion" id="msjCancelacion" name="msjCancelacion">#{solicitudViajeBean.mensaje}</textArea>
                                <br/>
                            </div>
                            <div class="modal-footer" style="border-top: white; text-align: right;">
                                <div class="row" >
                                    <button type="button" class="btn btn-primary" onclick="ejecutarBoton('frmCancelarSolicitudes', 'cancel');">Aceptar</button>
                                   <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> 
                                   <p:commandLink  action="#{solicitudViajeBean.cancelar()}" id="cancel"/>
                                </div>
                                
                            </div>
                        </div>
                    </div>
                </div>
            </h:form>

</html>
