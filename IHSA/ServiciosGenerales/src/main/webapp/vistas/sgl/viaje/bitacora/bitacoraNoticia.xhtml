<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      
     
      >
    <body>
        <ui:composition>
            <h:panelGroup >
                <h:form >
                    <h:panelGrid columns="2" rendered="#{noticiaBean.inicio}" >
                        <p:commandLink  title="#{msgs['comunicacion.clic.aqui.para']} #{msgs['comunicacion.ir.inicio']}" actionListener="#{noticiaBean.refrescarTodo(event)}" styleClass="link" >
                            <h:graphicImage  value="/#{msgs['sgl.ruta.imagen']}home.png" 
                                               styleClass="imagenSinBorde"
                                               alt="#{msgs['comunicacion.clic.aqui.para']} #{msgs['comunicacion.ir.inicio']}"/>
                        </p:commandLink>
                        <p:commandLink styleClass="fNegrita18"  value="Comunicados" title="#{msgs['comunicacion.clic.aqui.para']} #{msgs['comunicacion.ir.inicio']}" actionListener="#{noticiaBean.refrescarTodo(event)}" />
                    </h:panelGrid>
                </h:form>
                <h:panelGroup styleClass="buttonBorde"/>
                <h:form > 
                    <h:dataTable value="#{noticiaBean.noticias}" var="data" width="583px" cellpadding="0" cellspacing="0" >
                        <p:column>
                            <table>
                                <tr>
                                    <td valign="top">
                                        <p:commandButton  styleClass="dimensionFotoComentario" 
                                                          icon="fa fa-user"/>
                                    </td>
                                    <td valign="top" width="500px">
                                        <table>
                                            <tr>
                                                <td>
                                                    <p:commandLink styleClass="link">
                                                        <h:outputLabel value="#{data['usuarioNombre']}" styleClass="link"/>
                                                    </p:commandLink>
                                                </td>
                                                <td>
                                                    <h:outputText styleClass="fGris" value=" - "/>  
                                                </td>
                                                <td>
                                                    <h:outputText styleClass="fGris" value="#{data['fechaGenero']}">
                                                        <f:convertDateTime dateStyle="medium" type="date"/>
                                                    </h:outputText>
                                                </td>
                                                <td>
                                                    <h:outputText styleClass="fGris" value="#{data['horaGenero']}">
                                                        <f:convertDateTime pattern="h:mm a" timeStyle="default" type="time"/>
                                                    </h:outputText>
                                                </td>   
                                                <td>
                                                    <h:outputText styleClass="fGris" value=" - "/>  
                                                </td>  
                                                <td>
                                                    <p:commandLink styleClass="fGris" value="#{data['privacidadNombre']}" title="Detalles de uso compartido..." rendered="#{data['privacidadId'] eq 2}"/>  
                                                    <p:commandLink styleClass="fGris" value="Con límites"                                                                          
                                                                     actionListener="#{noticiaBean.mostrarPopupUsuariosCompartidos(actionEvent)}"
                                                                     title="Usuarios compartidos"> 
                                                        <f:param name="idNoticia" value="#{data['id']}"/>
                                                    </p:commandLink>
                                                </td> 
                                            </tr>
                                        </table>
                                        <h:outputLabel styleClass="fNegrita12"  value="#{data['titulo']}" />
                                        <h:outputText styleClass="f11" value="#{data['mensaje']}" escape="false"/>                                        
                                        <h:outputText styleClass="fGris" value="#{data['mensajeAutomatico']}" escape="false"/>
                                        <h:panelGrid styleClass="f11" columns="10">
                                            <p:commandLink value="#{msgs['comunicacion.me.gusta']}" actionListener="#{noticiaBean.meGustaNoticia(actionEvent)}" rendered="#{data.idMegusta == 0}" styleClass="link"
                                                             title="#{msgs['comunicacion.msg.clic.si.te.gusta.publicacion']}">
                                                <f:param name="idNoticia" value="#{data['id']}"/>                                                    
                                            </p:commandLink>                                                                                                                                            
                                            <p:commandLink value="#{msgs['comunicacion.ya.no.me.gusta']}" styleClass="link"
                                                             actionListener="#{noticiaBean.yaNoMeGustaNoticia(actionEvent)}" rendered="#{data.idMegusta != 0 }"
                                                             title="#{msgs['comunicacion.msg.clic.si.te.gusta.publicacion']}">                                                    
                                                <f:param name="idNoticia" value="#{data['id']}"/>                                                    
                                                <f:param name="idMeGusta" value="#{data['idMegusta']}"/>                                                    
                                            </p:commandLink>                                               
                                            <h:outputText styleClass="fGris" value=" - "/>  
                                            <!-- document.getElementById('noticiaForm:comentarioText').focus(); -->
                                            <p:commandLink value="#{msgs['comunicacion.comentar']}" styleClass="link"
                                                             title="#{msgs['comunicacion.msg.clic.para.comentar']}"
                                                             actionListener="#{noticiaBean.comentarNoticia(actionEvent)}">  
                                                <f:param name="idNoticia" value="#{data['id']}"/>                                                    
                                            </p:commandLink>
                                            <h:outputText styleClass="fGris" value=" - " rendered="#{data['genero'] eq sesion.usuario.id}"/>  
                                            <p:commandLink value="#{msgs['sistema.modificar']}" actionListener="#{noticiaBean.mostrarPopupModificarNoticia(actionEvent)}"
                                                             title="#{msgs['comunicacion.clic.aqui.para']} #{msgs['sistema.modificar']} #{msgs['comunicacion.esta']} #{msgs['comunicacion.publicacion']}" styleClass="link"
                                                             rendered="#{data['genero'] eq sesion.usuario.id}">
                                                <f:param name="idNoticia" value="#{data['id']}"/>                                                    
                                            </p:commandLink>

                                            <h:outputText styleClass="fGris" value=" - " rendered="#{data['genero'] eq sesion.usuario.id}"/>  

                                            <p:commandLink value="#{msgs['sistema.eliminar']}" rendered="#{data['genero'] eq sesion.usuario.id}" styleClass="link"
                                                             title="#{msgs['comunicacion.clic.aqui.para']} #{msgs['sistema.eliminar']} #{msgs['comunicacion.esta']} #{msgs['comunicacion.publicacion']}
                                                             "
                                                             onclick="if (!confirm('Está seguro de eliminar esta noticia ...? ')) return false;"
                                                             actionListener="#{noticiaBean.eliminarNoticia(actionEvent)}"
                                                             >
                                                <f:param name="idNoticia" value="#{data['id']}"/>                                                    
                                            </p:commandLink> 

                                            <h:outputText styleClass="fGris" value=" - "/>                                                                                               
                                                <!-- rendered="#{data['genero'] eq sesion.usuario.id or noticiaBean.privilegioSubirArchivo}"  -->
                                            <p:commandLink value="Adjuntar" styleClass="link"
                                                             title="#{msgs['comunicacion.clic.agregar.archivos']}" 
                                                             actionListener="#{noticiaBean.mostrarPopupSubirArchivo(actionEvent)}">                                                    
                                                <f:param name="idNoticia" value="#{data['id']}"/>                                
                                            </p:commandLink> 
                                        </h:panelGrid>               
                                        <!-- or data.meGusta == 1 and data.idMegusta != 0 or data.meGusta > 1 and data.idMegusta == 0 or data.meGusta > 1 and data.idMegusta != 0 -->
                                        <h:panelGroup rendered="#{(data['comentarios'] >= 1) or (data['adjuntosCount'] > 0) or (data['meGusta'] >= 1)}">
                                            <div class="punta"/>
                                            <div class="card Comentario">
                                                <table>
                                                    <tr>
                                                        <td>
                                                            <h:graphicImage value="#{msgs['sgl.ruta.imagen']}check.png" styleClass="imagenSinBorde" rendered="#{data['meGusta'] >= 1}" />
                                                        </td>
                                                        <td>
                                                            <p:commandLink actionListener="#{noticiaBean.mostrarPopupNoticiaLikes(actionEvent)}" styleClass="link"
                                                                             title="#{msgs['comunicacion.clic.ver.personas.gusta.publicacion']}"
                                                                             value="#{msgs['comunicacion.a.una.persona.le.gusta.esto']}" rendered="#{data.meGusta == 1 }"> 
                                                                <f:param name="idNoticia" value="#{data['id']}"/>
                                                            </p:commandLink>
                                                            <p:commandLink actionListener="#{noticiaBean.mostrarPopupNoticiaLikes(actionEvent)}" styleClass="link"
                                                                             value="#{msgs['comunicacion.A']} #{data.meGusta} #{msgs['comunicacion.personas.les.gusta.esto']} " 
                                                                             title="#{msgs['comunicacion.clic.ver.personas.gusta.publicacion']}"
                                                                             rendered="#{data.meGusta > 1 }"> 
                                                                <f:param name="idNoticia" value="#{data['id']}"/>
                                                            </p:commandLink>
                                                        </td>
                                                    </tr>                                                        
                                                    <tr>
                                                        <td>
                                                            <h:graphicImage value="/#{msgs['sgl.ruta.imagen']}comentarios.png" styleClass="imagenSinBorde" rendered="#{data['comentarios'] ge 3  and !noticiaBean.filtrar}"/>
                                                        </td>
                                                        <td>
                                                           <!-- <h:outputText styleClass="fGris" value="#{data['comentarios']}" rendered="#{data['comentarios'] le 2}"/>-->
                                                            <p:commandLink value="#{msgs['comunicacion.ver.los']} #{data['comentarios']} #{msgs['comunicacion.comentario']}#{msgs['comunicacion.s']}" actionListener="#{noticiaBean.verComentariosDeNoticia(event)}"
                                                                             rendered="#{data['comentarios'] ge 3 and !noticiaBean.filtrar}" styleClass="link"
                                                                             title="#{msgs['comunicacion.clic.para.ver.todos.comentarios']}">                                                                           
                                                                <f:param name="idNoticia" value="#{data['id']}"/>                                                    
                                                                <f:param name="maxComments" value="#{data['comentarios']}"/>                                                    
                                                            </p:commandLink>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <h:graphicImage value="#{msgs['sgl.ruta.imagen']}icon_attach.gif" styleClass="imagenSinBorde" rendered="#{data['adjuntosCount'] > 0}"/>
                                                        </td>
                                                        <td>                                                                
                                                            <p:commandLink value="(#{data['adjuntosCount']}) #{msgs['comunicacion.archivos.adjuntos']} " styleClass="link"
                                                                             actionListener="#{noticiaBean.mostrarPopupVerAdjuntos(actionEvent)}" 
                                                                             title="#{mags['comunicacion.clic.para.ver.archivos.adjuntos']}"
                                                                             rendered="#{data['adjuntosCount'] > 0}">
                                                                <f:param name="idNoticia" value="#{data['id']}"/>                                                    
                                                            </p:commandLink>
                                                        </td>
                                                    </tr>
                                                </table>           
                                            </div>                                               
                                        </h:panelGroup>

                                        <!-- aqui obtengo el valor d la fila maestro parad mostrar los detalles -->
                                        <h:inputHidden value="#{data['id']}"
                                                         binding="#{noticiaBean.inputHidden}"/>
                                        <ui:repeat value="#{noticiaBean.comentarios}" var="comentario">
                                       <!--<ui:repeat value="#{noticiaBean.comment}" var="comentario">-->
                                            <p:column rendered="false">
                                                <h:outputText styleClass="f11" value="#{comentario.id}"/>
                                            </p:column>
                                            <p:column rendered="false">
                                                <h:outputText styleClass="f11" value="#{comentario.idMegusta}"/>
                                            </p:column>

                                            <div class="card Comentario">
                                                <table>
                                                    <tr>
                                                        <td class="foto">
                                                            <p:commandButton styleClass="dimensionFoto" 
                                                                             icon="fa fa-user"/>
                                                        </td>
                                                        <td class="respuesta">
                                                            <p:commandLink styleClass="link" >
                                                                <h:outputLabel value="#{comentario.usuarioNombre}" styleClass="link"/>
                                                            </p:commandLink>
                                                            <h:outputText styleClass="fGris" value=" - "/> 
                                                            <h:outputText styleClass="f11" value="#{comentario.mensaje}"/>
                                                            <table>
                                                                <tr>
                                                                    <td>
                                                                        <h:outputText styleClass="fGris" value="#{comentario.fechaGenero}">
                                                                            <f:convertDateTime dateStyle="medium" type="date"/>
                                                                        </h:outputText>
                                                                    </td>
                                                                    <td>
                                                                        <h:outputText styleClass="fGris" value="#{comentario.horaGenero}">
                                                                            <f:convertDateTime pattern="h:mm a" timeStyle="default" type="time"/>
                                                                        </h:outputText>
                                                                    </td>   
                                                                    <td>
                                                                        <h:outputText styleClass="fGris" value=" - " />  
                                                                    </td>  
                                                                    <td><!-- comentario.meGusta >= 0 and comentario.idMegusta == 0 -->
                                                                        <p:commandLink value="#{msgs['comunicacion.me.gusta']}" actionListener="#{noticiaBean.meGustaComentario(actionEvent)}" rendered="#{comentario.idMegusta == 0}" 
                                                                                         title="#{msgs['comunicacion.clic.si.te.gusta.comentario']}" styleClass="link">
                                                                            <f:param name="idComentario" value="#{comentario['id']}"/>                                                                                                                                    
                                                                        </p:commandLink>
                                                                        <p:commandLink value="#{msgs['comunicacion.ya.no.me.gusta']}" actionListener="#{noticiaBean.yaNoMeGustaComentario(actionEvent)}" rendered="#{comentario.idMegusta != 0}"
                                                                                         title="#{msgs['comunicacion.clic.si.ya.no.te.gusta']}" styleClass="link">                                                                                
                                                                            <f:param  name="idComentario" value="#{comentario['id']}" />
                                                                            <f:param name="idMeGusta" value="#{comentario['idMegusta']}"/>                                                                                                                                
                                                                        </p:commandLink>
                                                                    </td> 
                                                                    <td>
                                                                        <h:outputText styleClass="fGris" value=" - " rendered="#{comentario.genero eq sesion.usuario.id}"/>  
                                                                    </td>                                                                         
                                                                    <td>
                                                                        <p:commandLink value="#{msgs['sistema.modificar']}" actionListener="#{noticiaBean.mostrarPopupModificarComentario(actionEvent)}" styleClass="link"
                                                                                         title="#{msgs['comunicacion.clic.aqui.para']} #{msgs['sistema.modificar']} #{msgs['comunicacion.este']} #{msgs['comunicacion.comentario']}" 
                                                                                         rendered="#{comentario.genero eq sesion.usuario.id}" >
                                                                            <f:param name="idComentario" value="#{comentario.id}"/>                                                                                                                                    
                                                                        </p:commandLink>
                                                                    </td> 
                                                                    <td>
                                                                        <h:outputText styleClass="fGris" value=" - " rendered="#{comentario.genero eq sesion.usuario.id}"/>  
                                                                    </td>                                                                         
                                                                    <td>
                                                                        <p:commandLink value="#{msgs['sistema.eliminar']}" title="#{msgs['comunicacion.clic.aqui.para']} #{msgs['sistema.eliminar']} #{msgs['comunicacion.este']} #{msgs['comunicacion.comentario']}" 
                                                                                         onclick="if (!confirm('Está seguro de eliminar el comentario ...? ')) return false;" styleClass="link"
                                                                                         actionListener="#{noticiaBean.eliminarComentario(actionEvent)}" rendered="#{comentario.genero eq sesion.usuario.id}">
                                                                            <f:param name="idComentario" value="#{comentario.id}"/>                                                    
                                                                        </p:commandLink>
                                                                    </td>  
                                                                    <td>
                                                                        <h:panelGrid columns="2" rendered="#{comentario.meGusta > 1}"   title="#{msgs['comunicacion.A']} (#{comentario.meGusta}) #{msgs['comunicacion.personas.les.gusta.esto']}">
                                                                            <h:graphicImage url="#{msgs['sgl.ruta.imagen']}check.png" width="6px" height="6px" title="#{msgs['comunicacion.A']} (#{data.meGusta}) #{msgs['comunicacion.personas.les.gusta.esto']}" 
                                                                                              styleClass="imagenSinBorde"/>
                                                                            <p:commandLink value="(#{comentario.meGusta})"  styleClass="link"
                                                                                             actionListener="#{noticiaBean.mostrarPopupComentariosLikes(actionEvent)}" title="#{msgs['comunicacion.A']} (#{comentario.meGusta}) #{msgs['comunicacion.personas.les.gusta.esto']}"> 
                                                                                <f:param name="idComentario" value="#{comentario.id}"/>                                                    
                                                                            </p:commandLink>                                                                                
                                                                        </h:panelGrid> 
                                                                        <h:panelGrid columns="2" rendered="#{comentario.meGusta == 1}" title="#{msgs['comunicacion.a.una.persona.le.gusta.esto']}">
                                                                            <h:graphicImage url="#{msgs['sgl.ruta.imagen']}check.png" width="6px" height="6px" title="#{msgs['comunicacion.a.una.persona.le.gusta.esto']}" 
                                                                                              styleClass="imagenSinBorde"/>
                                                                            <p:commandLink value="(#{comentario.meGusta})" styleClass="link"
                                                                                             actionListener="#{noticiaBean.mostrarPopupComentariosLikes(actionEvent)}" title="#{msgs['comunicacion.a.una.persona.le.gusta.esto']}" >
                                                                                <f:param name="idComentario" value="#{comentario.id}"/>                                                    
                                                                            </p:commandLink>                                                                               
                                                                        </h:panelGrid> 
                                                                    </td>
                                                                </tr>
                                                            </table>                                                                

                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </ui:repeat>
                                        <!-- -->
                                    <!-- <h:panelGrid rendered="#{data['comentar'] or noticiaBean.filtrar }">-->
                                        <h:panelGrid rendered="#{data['comentar'] or noticiaBean.filtrar }">
                                            <h:panelGrid columns="2">
                                                <h:graphicImage styleClass="dimensionFoto" value="#{msgs['sgl.ruta.imagen']}usuarios/usuario.png"/>
                                                <!-- style="border-radius: 4px;"-->
                                                <h:panelGrid columns="2">
                                                    <p:inputTextarea title="#{msgs['comunicacio.escribe.tu.comentario']}" 
                                                                       styleClass="comentarTxt" binding="#{noticiaBean.comentario}"/>

                                                </h:panelGrid>
                                            </h:panelGrid>
                                            <h:panelGrid styleClass="botonComentar">
                                                <h:panelGrid columns="2">
                                                    <p:selectBooleanCheckbox label="Notificar" value="#{noticiaBean.enviarNotificacion}"
                                                                               title="Activa esta casilla si deseas que se notifique por correo a los usuarios compartidos este comentario "
                                                                               >                                                        
                                                    </p:selectBooleanCheckbox>
                                                    <h:outputText value="Notificar por correo este comentario" styleClass="fGris"/>
                                                </h:panelGrid>
                                                <p:commandButton value="#{msgs['comunicacion.comentar']}"
                                                                   title="#{msgs['comunicacion.clic.para.guardar.comentario']}" 
                                                                   styleClass="compartir" actionListener="#{noticiaBean.nuevoComentario(actionEvent)}">
                                                    <f:facet name="myParam">
                                                        <f:param  value="#{data['id']}"/>
                                                    </f:facet>
                                                </p:commandButton>
                                            </h:panelGrid>
                                            <!---<ui:include src="/vistas/comunicacion/compartir.xhtml"/> -->
                                        </h:panelGrid>
                                    </td>
                                </tr>
                            </table>
                            <h:panelGroup styleClass="buttonBorde"/>                            
                        </p:column>
                    </h:dataTable>   
               </h:form>

                <h:form rendered="#{not empty sesion.usuario}"> 
                    <p:dialog  header="#{msgs['sistema.modificar']} #{msgs['comunicacion.comentario']}"  
                               >
                        <center><h:messages errorClass="mensaje" infoClass="mensaje"/></center>                             
                        <h:panelGrid columns="2">
                            <p:inputTextarea styleClass="textAreaModificarNoticia"  
                                               value="#{noticiaBean.comentarioActual.mensaje}" cols="20" rows="3"/>
                        </h:panelGrid>
                        <br/>
                        <center>
                            <h:panelGrid columns="2">                                
                                <p:commandLink actionListener="#{noticiaBean.modificarComentario(actionEvent)}"  value="#{msgs['sistema.modificar']}" styleClass="compartir"/>        
                                <p:commandLink actionListener="#{noticiaBean.ocultarPopupModificarComentario(actionEvent)}"  value="#{msgs['sistema.cerrar']}" styleClass="btn btn-default"/>        
                            </h:panelGrid>  
                        </center>
                    </my:panelPopup>
                </h:form> 

                <h:form rendered="#{not empty sesion.usuario}"> 
                    <p:dialog  header="#{msgs['sistema.modificar']} #{msgs['comunicacion.noticia']}"  
                               >
                        <center><h:messages errorClass="mensaje" infoClass="mensaje"/></center>                             
                        <h:panelGrid columns="2">
                            <p:inputTextarea styleClass="textAreaModificarNoticia" 
                                               value="#{noticiaBean.noticiaActual.mensaje}" cols="20" rows="3"/>
                        </h:panelGrid>
                        <br/>
                        <center>
                            <h:panelGrid columns="2">                                
                                <p:commandLink actionListener="#{noticiaBean.modificarNoticia(actionEvent)}"  value="#{msgs['sistema.modificar']}" styleClass="compartir"/>        
                                <p:commandLink actionListener="#{noticiaBean.ocultarPopupModificarNoticia(actionEvent)}"  value="#{msgs['sistema.cerrar']}" styleClass="btn btn-default"/>        
                            </h:panelGrid>                         
                        </center>
                    </my:panelPopup>
               </h:form>

                <!-- PANEL LIKE'S PERSON -->
                <h:form rendered="#{not empty sesion.usuario}">
                        <p:dialog  header="#{msgs['comunicacion.personas.que.les.gusta.esto']}"  
                                   >
                            <h:panelGrid >
                                <ui:repeat value="#{noticiaBean.likes}" var="data" 
                                           >
                                    <h:panelGroup style="float: left;width: 200px" >
                                        <h:panelGrid columns="2" cellspacing="1"  >
                                            <h:panelGrid> <!-- #{data['fotoUsuario']}-->
                                                <p:commandButton styleClass="dimensionFoto" 
                                                                 icon="fa fa-user"/>
                                            </h:panelGrid>
                                            <h:panelGrid>
                                                <h:outputText styleClass="f12" value="#{data['nombreUsuario']}"/>                                                                                                                                                                                 
                                                <h:outputText  value="#{data['fechaGenero']}" styleClass="fGris" >
                                                    <f:convertDateTime dateStyle="medium" type="date"/>
                                                </h:outputText>
                                                <h:outputText value="#{data['horaGenero']}" styleClass="fGris" >
                                                    <f:convertDateTime pattern="h:mm a" timeStyle="default" type="time"/>
                                                </h:outputText>
                                            </h:panelGrid>
                                        </h:panelGrid>
                                    </h:panelGroup>
                                    </ice:panelSeries>
                            </h:panelGrid>
                            <br/>
                            <center>
                                <h:panelGrid columns="2">                                                                    
                                    <p:commandLink actionListener="#{noticiaBean.ocultarPopupLikes(actionEvent)}"  value="#{msgs['sistema.cerrar']}" styleClass="btn btn-default"/>        
                                </h:panelGrid>                        
                            </center>
                        </my:panelPopup>
                    </h:form>
                
                <!--card de compartidos se hizo en otro panle por la razon que podra mostrar grupos-->
                
                <h:form rendered="#{not empty sesion.usuario}">
                        <p:dialog  header="Compartidos" 
                                   >
                            <h:panelGrid  cellspacing="1" >
                                <ui:repeat value="#{noticiaBean.likes}" var="data">
                                    <h:panelGroup style="float: left;width: 200px" >

                                        <h:panelGrid columns="2" cellspacing="1"  >
                                            <h:panelGrid>
                                                <p:commandButton styleClass="dimensionFoto" 
                                                                 icon="fa fa-user"/>
                                            </h:panelGrid>
                                            <h:panelGrid>
                                                <h:outputText styleClass="f12" value="#{data['nombre']}"/>                                                                                                                                                                                 
                                                <h:outputText  value="#{data['fechaGenero']}" styleClass="fGris" >
                                                    <f:convertDateTime dateStyle="medium" type="date"/>
                                                </h:outputText>
                                                <h:outputText value="#{data['horaGenero']}" styleClass="fGris" >
                                                    <f:convertDateTime pattern="h:mm a" timeStyle="default" type="time"/>
                                                </h:outputText>
                                            </h:panelGrid>
                                        </h:panelGrid>

                                    </h:panelGroup>
                                </ice:panelSeries>
                            </h:panelGrid>
                            <br/>
                            <center>
                                <h:panelGrid columns="2">                                                                    
                                    <p:commandLink actionListener="#{noticiaBean.ocultarPopupUsuariosCompartidos(actionEvent)}"  value="#{msgs['sistema.cerrar']}" styleClass="btn btn-default"/>        
                                </h:panelGrid>                        
                            </center>
                        </my:panelPopup>
                    </h:form>
                
                

                <!-- PANEL ADJUNTAR  -->
               <h:form rendered="#{not empty sesion.usuario}"> 
                <!--<p:dialog  header="Adjunta un archivo"  mostrarPanel="#{noticiaBean.mrSubirArchivo}" conBoton="false">                        -->
                    <p:dialog   id="popup1" style="background: #FFFFFF;" visible="#{noticiaBean.mrSubirArchivo}" draggable="false" modal="true">
                        <f:facet name="header">
                            <h:panelGroup>
                                <h:outputText value="#{msgs['comunicacion.adjuntar.archivos']}" 
                                                style="float: left; padding: 4px;text-align: center; vertical-align: middle;font: 11px;color: #484848; font-weight: bold;"/>
                            </h:panelGroup>
                        </f:facet>
                        <f:facet name="body">
                            <h:panelGrid columns="3">
                                <!-- TODO : al parecer ya no se utiliza, revisar -->
                                <p:fileUpload  id="fileEntryr"
                                               listener="#{noticiaBean.subirArchivo}" 
                                               label="#{msgs['sistema.subir.archivo']}"                                                 
                                               />
                                <p:commandLink value="#{msgs['sistema.cancelar']}" styleClass="btn btn-default" 
                                                 actionListener="#{noticiaBean.ocultarPopupSubirArchivo(event)}" immediate="true"/>
                            </h:panelGrid>
                        </f:facet>
                    </<p:dialog >
                </h:form>
                <h:form rendered="#{not empty sesion.usuario}">
                    <p:dialog  header="#{msgs['comunicacion.archivos.adjuntos']}"  
                               >
                        <center><h:messages errorClass="mensaje" infoClass="mensaje"/></center>  
                        <h:panelGrid columns="2">
                            <p:dataTable id="adjuntos" 
                                         value="#{noticiaBean.dataModel}"
                                                                     
                                         >  
                                <p:column rendered="false">                                       
                                    <h:outputText value="#{data['idNoticiaAdjunto']}"/>                                                                              
                                </p:column>
                                <p:column>   
                                    <f:facet name="header" >
                                        <h:outputText value="#{msgs['sistema.nombre']}"/>
                                    </f:facet>
                                    <h:outputText value="#{data['nombre']}"/>                                                                              
                                </p:column>                                                                        
                                <p:column>   
                                    <f:facet name="header" >
                                        <h:outputText value="#{msgs['sistema.peso']}"/>
                                    </f:facet>
                                    <h:outputText value="#{data['peso']}"/>                                                                              
                                </p:column>
                                <p:column>  
                                    <f:facet name="header" >
                                        <h:outputText value="#{msgs['sistema.fecha']}"/>
                                    </f:facet>
                                    <h:outputText value="#{data['fechaGenero']}" >
                                        <f:convertDateTime dateStyle="medium" type="date"/>
                                    </h:outputText>
                                </p:column>
                                <p:column>
                                    <f:facet name="header" >
                                        <h:outputText value="#{msgs['sistema.hora']}"/>
                                    </f:facet>
                                    <h:outputText value="#{data['horaGenero']}" >
                                        <f:convertDateTime pattern="h:mm a" timeStyle="default" type="time"/>
                                    </h:outputText>
                                </p:column>
                                <p:column>                                        
                                    <p:commandLink value="#{msgs['sistema.eliminar']}" actionListener="#{noticiaBean.eliminarArchivo(event)}" rendered="#{data['genero'] eq sesion.usuario.id}" styleClass="link"
                                                     onclick="if (!confirm('Está seguro de eliminar el archivo #{data['nombre']} ...? ')) return false;"/>
                                    <f:param name="idCoNoticiaSiAdjunto" value="#{data['idNoticiaAdjunto']}"/>                                                                                
                                    <f:param name="idArchivo" value="#{data['id']}"/>                                                   
                                </p:column>
                                <p:column>      
                                    <h:outputLink target="_blank" value="/ServiciosGenerales/AbrirArchivo?ZWZ2W=#{data['id']}&amp;ZWZ3W=#{data['uuid']}" styleClass="link" > 
                                        <h:outputText value="#{msgs['sistema.abrir']}" styleClass="link"/>
                                    </h:outputLink>                                            
                                </p:column>
                            </p:dataTable> 
                        </h:panelGrid>
                        <br/>
                        <center>
                            <p:commandLink value="#{msgs['sistema.cerrar']}" styleClass="btn btn-default" 
                                             actionListener="#{noticiaBean.ocultarPopupVerAdjuntos(actionEvent)}" immediate="true"/>
                        </center>
                    </my:panelPopup>
               </h:form>

            </h:panelGroup>
        </ui:composition>

    </body>
</html>
