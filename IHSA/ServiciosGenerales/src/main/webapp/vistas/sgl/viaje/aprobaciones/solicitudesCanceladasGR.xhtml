<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      
     
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      >
    <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
    <body>
        <ui:composition template="./../../../../WEB-INF/facelets/templates/templateServiciosGenerales.xhtml">
            <ui:define name="contenido">


                <f:event type="preRenderView" 
                         listener="#{solicitudViajeBean.goToSolicitudesCanceladas()}" />

                <p class="tituloEncabezado">Solicitudes Canceladas</p>
                <h:form  id="formActivarSV">
                    <div class="card  panel-default">
                        <ul class="nav nav-tabs">
                            <li class="active" ><a data-toggle="tab" href="#aOficina" >Solicitudes(#{solicitudViajeBean.countSVT})</a></li>
                        </ul>
                        <div class="tab-content">
                            <div id="aOficina" class="fade in active">
                                <br/>
                                <div class="col-xs-12">
                                    <div class="col-xs-7">
                                        <div class="row-fluid">
                                            <div class="btn-group col-xs-12">
                                                <button type="button" class="btn btn-primary" onclick="ejecutarBoton('formActivarSV', 'actiSv');" id="aprobarSV" >
                                                    <label>Activar</label>
                                                </button>
                                            </div>
                                            <p:commandLink action="#{solicitudViajeBean.activar()}" id="actiSv" />
                                        </div>
                                    </div>
                                </div>
                                <br/>
                                <div class="table table-responsive" >
                                    <p:dataTable id="viajerosTerrestre" value="#{solicitudViajeBean.listSolicitudesVo}" var="via" 
                                                   styleClass="table table-striped" style="width: 99.9%" 
                                                   >
                                        <p:columnGroup type="header">
                                            <p:row>
                                                <p:column id="hselect">
                                                    <f:facet name="header">
                                                        <h:selectBooleanCheckbox  class="todos" onchange="seleccionarTodo('todos', 'seleccion')"
                                                                                  id="selectTodo" value="#{solicitudViajeBean.selectTodo}" 
                                                                                  valueChangeListener="#{solicitudViajeBean.selecionarTodoTer}" immediate="true">
                                                            <f:ajax event="click" />
                                                        </h:selectBooleanCheckbox>
                                                    </f:facet>
                                                </p:column>
                                                <p:column id="hCodigo"/>
                                                <p:column id="hRuta" headerText="Ruta" style="font-size: small;"/>
                                                <p:column id="hSalida" headerText="Salida" style="font-size: small;"/>
                                                <p:column id="hregreso" headerText="Regreso" style="font-size: small;"/>
                                                <p:column id="hviajeros" headerText="Viajeros" style="font-size: small;"/>
                                            </p:row>
                                        </p:columnGroup>
                                        <p:column style="font-size: medium; text-align: center; padding: 3px 0px 3px 0px;">
                                            <h:selectBooleanCheckbox value="#{via.select}" style="font-size: 12px" class="seleccion"/>
                                        </p:column>
                                        <p:column  style="font-size: small; text-align: center; padding: 3px 0px 3px 0px;">
                                            <h:outputText value="#{via.codigo}" />
                                        </p:column>
                                        <p:column headerText="Ruta" id="rutaSolicitud"  style="text-align: left; font-size: small; padding: 3px 0px 3px 0px;">
                                            <h:outputText value="#{via.origen} a #{via.destino}"/>
                                        </p:column>
                                        <p:column headerText="Salida" id="salida"  style="text-align: left; font-size: small; padding: 3px 0px 3px 0px;">
                                            <h:outputText id="fsalida" value="#{via.fechaSalida}">
                                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                                            </h:outputText> 
                                            <label> </label>
                                            <h:outputText id="horaSalida" value="#{via.horaSalida}">
                                                <f:convertDateTime pattern="HH:mm "/>
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Regreso" id="regreso" style="text-align: left; font-size: small; padding: 3px 0px 3px 0px;">
                                            <h:outputText id="fregreso" value="#{via.fechaRegreso}" rendered="#{via.redondo}">
                                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                                            </h:outputText> 
                                            <label> </label>
                                            <h:outputText id="horaRegreso" value="#{via.horaRegreso}"  rendered="#{via.redondo}">
                                                <f:convertDateTime pattern="HH:mm "/>
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Viajeros"  style="text-align: center; font-size: small; padding: 3px 0px  3px 0px;">
                                            <h:dataTable id="listViajeros" var="data"  value="#{via.viajeros}">
                                                <h:column class="tabla1">
                                                    <h:outputText value="#{data.usuario}" rendered="#{data.idInvitado == 0}"/>
                                                    <h:outputText value="#{data.invitado}" rendered="#{data.idInvitado != 0}"/>
                                                </h:column>
                                            </h:dataTable>
                                        </p:column>
                                    </p:dataTable>
                                    <style type="text/css">
                                        .ui-datatable{line-height: 1;}
                                        .ui-datatable table{
                                            border-collapse: collapse;
                                            border-color: whitesmoke;
                                            border-style: none;
                                            width: 100%
                                        }
                                    </style>
                                    <br/>
                                </div>
                            </div>

                        </div>
                    </div>

                </h:form>
            </ui:define>
        </ui:composition>
    </body>

</html>

