<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"

      xmlns:c="http://java.sun.com/jsp/jstl/core"
      >
    <body>
        <ui:composition template="./../../../../WEB-INF/facelets/templates/templateServiciosGenerales.xhtml">
            <ui:define name="titulo">  
                Buscar viajes y solicitudes
            </ui:define>
            <ui:define name="contenido">  
                <h:form id="formBuscar">
                    <p:tabView id="tbBuscar">
                        <p:tab title="Solicitud">
                            <div class="row">
                                <div class="col-md-2 col-xs-5">
                                    <p:inputText id="inpSol" placeholder="SVXX-##"
                                                 value="#{buscarSVOrVIBean.codigoSV}"/>
                                </div>
                                <div class="col-md-1 col-xs-2">
                                    <p:commandButton id="serchBtnSV"  action="#{buscarSVOrVIBean.buscarSV()}"
                                                     icon="fa fa-search" process="formBuscar:tbBuscar" update="formBuscar:tbBuscar"/>
                                </div>
                            </div>
                            <div class="row">
                                Solicitud:<label> #{buscarSVOrVIBean.codigoSV}</label>
                            </div>
                            <div class="row" >
                                <div class="col-md-6 col-xs-6 alert-info">
                                    Tipo de Solicitud <strong>#{buscarSVOrVIBean.sv.tipoEspecifico}</strong>
                                </div>
                                <div class="col-md-6 col-xs-6 alert-info">
                                    Gerencia responsable <strong>#{buscarSVOrVIBean.sv.gerencia}</strong>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 col-xs-6">
                                    <div class="row">
                                        Origen: <label>#{buscarSVOrVIBean.sv.origen}</label> 
                                    </div>
                                </div>
                                <div class="col-md-6 col-xs-6">
                                    <div class="row">
                                        Destino: <label>#{buscarSVOrVIBean.sv.destino}</label>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 col-xs-6 alert-info">
                                    Fecha Salida: <strong>#{buscarSVOrVIBean.fechaSalida}</strong> hr(s)
                                </div>
                                <div class="col-md-6 col-xs-6 alert-info">
                                    Fecha Regreso: <strong>#{buscarSVOrVIBean.fechaRegreso}</strong> hr(s)
                                </div>
                            </div>
                            <div class="row" >
                                <div class="col-md-5 col-xs-12">
                                    <div class="card   card-primary">
                                        <div class="card-header">
                                            <center><h4>Viajeros</h4></center>
                                        </div>
                                        <div class="card-body">
                                            <div class="table-responsive">
                                                <p:dataTable id="viajeros" value="#{buscarSVOrVIBean.sv.viajeros}" var="via"
                                                             rows="20" paginator="true" 
                                                             paginatorPosition="bottom" lazy="true">
                                                    <p:columnGroup type="header">
                                                        <p:row>
                                                            <p:column id="hUsuario" headerText="Nombre" style=" border-color:  whitesmoke;"/>
                                                            <p:column id="hTipoViajero" headerText="Tipo Viajero" style=" border-color:  whitesmoke;"/>
                                                            <p:column id="hEstancia" headerText="Estancia" style=" border-color:  whitesmoke;"/>
                                                        </p:row>
                                                    </p:columnGroup>
                                                    <p:column  style=" text-align: center; padding: 3px 0px 3px 0px;
                                                               border-color:  whitesmoke;">
                                                        <h:outputText value="#{via.usuario}" rendered="#{via.empleado}"/>
                                                        <h:outputText value="#{via.invitado}" rendered="#{!via.empleado}"/>
                                                    </p:column>
                                                    <p:column  style=" text-align: center; padding: 3px 0px 3px 0px;
                                                               border-color:  whitesmoke;">
                                                        <h:outputText value="empleado" rendered="#{via.empleado}"/>
                                                        <h:outputText value="invitado" rendered="#{!via.empleado}"/>
                                                    </p:column>
                                                    <p:column  style=" text-align: center; padding: 3px 0px 3px 0px;
                                                               border-color:  whitesmoke;">
                                                        <h:outputText value="si" rendered="#{via.estancia}"/>
                                                        <h:outputText value="no" rendered="#{!via.estancia}"/>
                                                    </p:column>
                                                </p:dataTable>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-7 col-xs-12">
                                    <div class="card   card-primary" style="display: #{buscarSVOrVIBean.sv.idSgTipoEspecifico == 3 ? 'none': 'block'}">
                                        <div class="card-header">
                                            <center><h4>Viajes</h4></center>
                                        </div>
                                        <div class="card-body">
                                            <div class="table-responsive">
                                                <p:dataTable id="viajes" value="#{buscarSVOrVIBean.vi}" var="via2"
                                                             rows="20" size="small" showGridlines="true" 
                                                             paginator="true" paginatorPosition="bottom"
                                                             lazy="true">
                                                    <p:columnGroup type="header">
                                                        <p:row>

                                                            <p:column id="hCodigo" headerText="Nombre" style=" border-color:  whitesmoke;"/>
                                                            <p:column id="hOficina" headerText="Oficina" style=" border-color:  whitesmoke;"/>
                                                            <p:column id="hFechaProgramada" headerText="Fecha Programada" style=" border-color:  whitesmoke;"/>
                                                            <p:column id="hHoraProgramada" headerText="Hora Programada" style=" border-color:  whitesmoke;"/>
                                                            <p:column id="hFechasalida" headerText="Fecha Programada" style=" border-color:  whitesmoke;"/>
                                                            <p:column id="hHorasalida" headerText="Hora Programada" style=" border-color:  whitesmoke;"/>
                                                        </p:row>
                                                    </p:columnGroup>
                                                    <p:column  style=" text-align: center; padding: 3px 0px 3px 0px;
                                                               border-color:  whitesmoke;">
                                                        <h:outputText value="#{via2.codigo}"/>
                                                    </p:column>
                                                    <p:column  style=" text-align: center; padding: 3px 0px 3px 0px;
                                                               border-color:  whitesmoke;">
                                                        <h:outputText value="#{via2.origen}"/>
                                                    </p:column>
                                                    <p:column  style=" text-align: center; padding: 3px 0px 3px 0px;
                                                               border-color:  whitesmoke;">
                                                        <h:outputText  value="#{via2.fechaProgramada}">
                                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column  style=" text-align: center; padding: 3px 0px 3px 0px;
                                                               border-color:  whitesmoke;">
                                                        <h:outputText  value="#{via2.horaProgramada}">
                                                            <f:convertDateTime pattern="HH:mm "/>
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column  style=" text-align: center; padding: 3px 0px 3px 0px;
                                                               border-color:  whitesmoke;">
                                                        <h:outputText  value="#{via2.fechaSalida}">
                                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column  style=" text-align: center; padding: 3px 0px 3px 0px;
                                                               border-color:  whitesmoke;">
                                                        <h:outputText  value="#{via2.horaSalida}">
                                                            <f:convertDateTime pattern="HH:mm "/>
                                                        </h:outputText>
                                                    </p:column>
                                                </p:dataTable>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 col-xs-12">
                                    <div class="card   card-primary">
                                        <div class="card-header">
                                            <center><h4>Historial de aprobación</h4></center>
                                        </div>
                                        <div class="card-body">
                                            <div class="table-responsive">
                                                <p:dataTable id="tHistorial" value="#{buscarSVOrVIBean.lea}" var="via3"
                                                             size="small" showGridlines="true" lazy="true"
                                                             rows="20" paginator="true" paginatorPosition="bottom">
                                                    <p:columnGroup type="header">
                                                        <p:row>

                                                            <p:column id="hOperacion" headerText="Operacion" style=" border-color:  whitesmoke;"/>
                                                            <p:column id="hUsuarioH" headerText="Usuario" style=" border-color:  whitesmoke;"/>
                                                            <p:column id="hFechaRealizo" headerText="Fecha Realizado" style=" border-color:  whitesmoke;"/>
                                                            <p:column id="hHoraRealizo" headerText="Hora Realizado" style=" border-color:  whitesmoke;"/>
                                                        </p:row>
                                                    </p:columnGroup>
                                                    <p:column  style=" text-align: center; padding: 3px 0px 3px 0px;
                                                               border-color:  whitesmoke; background: #{via3.historial ? '': '#fcf8e2'};">
                                                        <h:outputText value="#{via3.operacion}" />
                                                    </p:column>
                                                    <p:column  style=" text-align: center; padding: 3px 0px 3px 0px;
                                                               border-color:  whitesmoke; background: #{via3.historial ? '': '#fcf8e2'};">
                                                        <h:outputText value="#{via3.usuario}" />
                                                    </p:column>
                                                    <p:column  style=" text-align: center; padding: 3px 0px 3px 0px;
                                                               border-color:  whitesmoke; background: #{via3.historial ? '': '#fcf8e2'};">
                                                        <h:outputText  value="#{via3.fechaModifico}">
                                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column  style=" text-align: center; padding: 3px 0px 3px 0px;
                                                               border-color:  whitesmoke; background: #{via3.historial ? '': '#fcf8e2'};">
                                                        <h:outputText  value="#{via3.horaModifico}">
                                                            <f:convertDateTime pattern="HH:mm "/>
                                                        </h:outputText>
                                                    </p:column>
                                                </p:dataTable>
                                            </div>
                                            <div class="row alert alert-warning">
                                                <label>La solicitud se encuentra actualmente con la persona marcada en este color </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </p:tab>
                        <p:tab title="Viaje">
                            <div class="row input-group">
                                <p:inputText id="inpVia" value="#{buscarSVOrVIBean.codigoVI}"
                                             placeholder="VIXX-###"/>
                                <p:commandButton id="serchBtnVI" icon="fa fa-search" action="#{buscarSVOrVIBean.buscarVI()}"
                                                 process="formBuscar:tbBuscar" update="formBuscar:tbBuscar"/>
                            </div>
                            <div class="row">
                                <div class="col-md-2 col-xs-12">
                                    Viaje:<label> #{buscarSVOrVIBean.codigoVI}</label>
                                </div>
                                <div class="col-md-7"></div>
                                <div class="col-md-3 col-xs-12" style="text-align: right;">
                                    Estaus Actual:<label> #{buscarSVOrVIBean.estatusActual}</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4 col-xs-12">
                                    <div class="card   card-primary">
                                        <div class="card-header">
                                            <center><h4>Datos Generales del Viaje</h4></center>
                                        </div>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-md-5 col-xs-6">
                                                    Fecha Programada:
                                                </div>
                                                <div class="col-md-7 col-xs-6">
                                                    <strong><h:outputText  value="#{buscarSVOrVIBean.viajeBuscar.fechaProgramada}">
                                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                                        </h:outputText> </strong>
                                                    <strong><h:outputText  value="#{buscarSVOrVIBean.viajeBuscar.horaProgramada}">
                                                            <f:convertDateTime pattern="HH:mm "/>
                                                        </h:outputText>hr(s)</strong>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-5 col-xs-6">
                                                    Fecha Salida:
                                                </div>
                                                <div class="col-md-7 col-xs-6">
                                                    <strong><h:outputText  value="#{buscarSVOrVIBean.viajeBuscar.fechaSalida}">
                                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                                        </h:outputText></strong>
                                                    <strong><h:outputText  value="#{buscarSVOrVIBean.viajeBuscar.horaSalida}">
                                                            <f:convertDateTime pattern="HH:mm "/>
                                                        </h:outputText>hr(s)</strong>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-5 col-xs-6" style="display: #{buscarSVOrVIBean.viajeBuscar.redondo ? 'block' : 'none'}">
                                                    Fecha Regreso:
                                                </div>
                                                <div class="col-md-7 col-xs-6" style="display: #{buscarSVOrVIBean.viajeBuscar.redondo ? 'block' : 'none'}">
                                                    <strong><h:outputText  value="#{buscarSVOrVIBean.viajeBuscar.fechaRegreso}">
                                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                                        </h:outputText></strong>
                                                    <strong><h:outputText  value="#{buscarSVOrVIBean.viajeBuscar.fechaRegreso}">
                                                            <f:convertDateTime pattern="HH:mm "/>
                                                        </h:outputText>hr(s)</strong>
                                                </div>

                                            </div>
                                            <div class="row">
                                                <div class="col-md-3 col-xs-5">
                                                    Responable:
                                                </div>
                                                <label class="col-md-9 col-xs-7">#{buscarSVOrVIBean.viajeBuscar.responsable}</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-8 col-xs-12">
                                    <div class="card   card-primary">
                                        <div class="card-header">
                                            <center><h4>Datos del Vehículo</h4></center>
                                        </div>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-md-1 col-xs-6">
                                                    Marca:
                                                </div>
                                                <div class="col-md-2 col-xs-6">
                                                    <label>#{buscarSVOrVIBean.viajeBuscar.vehiculoVO.marca}</label>
                                                </div>
                                                <div class="col-md-1 col-xs-6">
                                                    Modelo:
                                                </div>
                                                <div class="col-md-2 col-xs-6">
                                                    <label>#{buscarSVOrVIBean.viajeBuscar.vehiculoVO.modelo}</label>
                                                </div>
                                                <div class="col-md-4 col-xs-6">
                                                    Tipo de Vehiculo:
                                                </div>
                                                <div class="col-md-2 col-xs-6">
                                                    <label>#{buscarSVOrVIBean.viajeBuscar.vehiculoVO.tipoEspecifico}</label>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-1 col-xs-6">
                                                    Color:
                                                </div>
                                                <div class="col-md-2 col-xs-6">
                                                    <label>#{buscarSVOrVIBean.viajeBuscar.vehiculoVO.color}</label>
                                                </div>

                                                <div class="col-md-1 col-xs-6">
                                                    Capacidad:
                                                </div>
                                                <div class="col-md-2 col-xs-6">
                                                    <label>#{buscarSVOrVIBean.viajeBuscar.vehiculoVO.capacidadPasajeros}</label>
                                                </div>
                                                <div class="col-md-4 col-xs-6">
                                                    Número de Placas:
                                                </div>
                                                <div class="col-md-2 col-xs-6">
                                                    <label>#{buscarSVOrVIBean.viajeBuscar.vehiculoVO.numeroPlaca}</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="card   card-primary">
                                    <div class="card-header">
                                        <center><h4>Viajros</h4></center>
                                    </div>
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <p:dataTable id="tviajeros" value="#{buscarSVOrVIBean.viajeBuscar.listaViajeros}" var="via4"
                                                         size="small" showGridlines="true" lazy="true"
                                                         rows="20" paginator="true" paginatorPosition="bottom">
                                                <p:columnGroup type="header">
                                                    <p:row>

                                                        <p:column id="hSolCod" headerText="Operacion" style=" border-color:  whitesmoke;"/>
                                                        <p:column id="hViajeroVi" headerText="Usuario" style=" border-color:  whitesmoke;"/>
                                                        <p:column id="hEstanciaVi" headerText="Fecha Realizado" style=" border-color:  whitesmoke;"/>
                                                    </p:row>
                                                </p:columnGroup>
                                                <p:column  style=" text-align: center; padding: 3px 0px 3px 0px;
                                                           border-color:  whitesmoke;">
                                                    <h:outputText value="#{via4.codigoSolicitudViaje}" />
                                                </p:column>
                                                <p:column  style=" text-align: center; padding: 3px 0px 3px 0px;
                                                           border-color:  whitesmoke;">
                                                    <h:outputText value="#{via4.usuario}" rendered="#{via4.empleado}"/>
                                                    <h:outputText value="#{via4.invitado}" rendered="#{!via4.empleado}"/>
                                                </p:column>
                                                <p:column  style=" text-align: center; padding: 3px 0px 3px 0px;
                                                           border-color:  whitesmoke;">
                                                    <h:outputText value="Si" rendered="#{via4.estancia}"/>
                                                    <h:outputText value="No" rendered="#{!via4.estancia}"/>
                                                </p:column>
                                            </p:dataTable>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </p:tab>
                    </p:tabView>
                </h:form> 
            </ui:define>
        </ui:composition>
    </body>
</html>
