<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      
      
      >
    <body>

        <ui:composition template="./../../../WEB-INF/facelets/templates/templateServiciosGenerales.xhtml">

            <ui:define name="contenido">
		<h:panelGroup  rendered="#{empty sesion.usuario}" styleClass="altura">
                    <ui:include src="./../../../login.xhtml"/>
                </h:panelGroup> 
                <p class="tituloEncabezado">Consumo de combustible</p>
		<h:form id="frmConsumoCombustible">
		    <div class="card-body form-group">
			<!--rendered="#{consumoBean.cargarArchivo}"-->
			<p:panel  rendered="#{consumoBean.cargarArchivo}">
                            <p:fileUpload  id="fileEntryInci" 		
                                           listener="#{consumoBean.subirArchivo}" 
					   />
			</p:panel>			
		    </div>
		    <div class="card  panel-default">
			<div class="card -heading"> 
			    <div class="input-group col-lg-4" >
				<div class="col-lg-6">
				    <h4 class="card -title">
					Carga de datos
				    </h4>
				    <p:selectOneRadio value="#{consumoBean.fechaCargaArchivo}"
							valueChangeListener="#{consumoBean.seleccionarFechaCarga}"
							 >
					<f:selectItems value="#{consumoBean.listaFechaCarga}"/>
				    </p:selectOneRadio>
				</div>
			    </div>
			</div>
			<div class="card-body">
			    <div class="row">
				<p:commandLink styleClass="btn btn-warning"  
						 rendered="#{consumoBean.cargarArchivo eq false}"
						 actionListener="#{consumoBean.quitarCargaArchivo(event)}">
				    <i class="fa fa-remove text-danger"></i> Remplazar
				</p:commandLink>
				<h:outputLink target="_blank" styleClass="btn btn-success"
						rendered="#{not empty consumoBean.lista}"
						value="/ServiciosGenerales/AbrirArhivoEnLinea?ARCH=#{consumoBean.fechaCargaArchivo}">				
				    <i class="fa fa-download"/>Descargar etiquetas
				</h:outputLink>				    
			    </div>
			    <div class="row">
				<p:dataTable value="#{consumoBean.lista}" var="data"  rows="10"
					       paginator="true"  showGridlines="true" size="small"
					       paginatorPosition="bottom" 
					       style="font-size: 1em; width: 100%" >
				    <f:facet name="header">
					Datos agregados de consumo de combustible
				    </f:facet>
				    <p:column headerText="Tarjeta">
					<h:outputText value="#{data.sgTarjeta.numeroTarjeta}"/>
				    </p:column>
				    <p:column headerText="Placa">
					<h:outputText value="#{data.placa}"/>
				    </p:column>
				    <p:column headerText="Operación">
					<h:outputText value="#{data.operacion}">
					    <f:convertNumber type="number"/>
					</h:outputText>
				    </p:column>
				    <p:column headerText="Cargo">
					<h:outputText value="#{data.cargo}"/>
				    </p:column>
				    <p:column headerText="Tipo">
					<h:outputText value="#{data.tipo}"/>
				    </p:column>
				    <p:column headerText="Usuario">
					<h:outputText value="#{data.usuario.nombre}"/>
				    </p:column>
				    <p:column headerText="Usuario">
					<h:outputText value="#{data.usSinRegistro}"/>
				    </p:column>
				    <p:column headerText="Concepto">
					<h:outputText value="#{data.concepto}"/>
				    </p:column>
				    <p:column headerText="Producto">
					<h:outputText value="#{data.tipoCombustible}"/>
				    </p:column>
				    <p:column headerText="Precio">
					<h:outputText value="#{data.precioUnitario}"/>
				    </p:column>
				    <p:column headerText="Km. Inicial">
					<h:outputText value="#{data.kilometroInicial}"/>
				    </p:column>
				    <p:column headerText="Km. Final">
					<h:outputText value="#{data.kilometroFinal}"/>
				    </p:column>
				    <p:column headerText="Litros">
					<h:outputText value="#{data.cantidad}"/>
				    </p:column>
				    <p:column headerText="Rendimiento">
					<h:outputText value="#{data.rendimiento}">
					    <f:convertNumber type="number"/>
					</h:outputText>
				    </p:column>
				    <p:column headerText="Estación">
					<h:outputText value="#{data.sgEstacion.numeroEstacion}"/>
				    </p:column>
				    <p:column headerText="Estacion RFC">
					<h:outputText value="#{data.sgEstacion.rfc}"/>
				    </p:column>
				    <p:column headerText="Dirección">
					<h:outputText value="#{data.sgEstacion.siCiudad.nombre}, #{data.sgEstacion.colonia}, #{data.sgEstacion.calle}"/>
				    </p:column>
				    <p:column headerText="Fecha">
					<h:outputText value="#{data.fechaOperacion}">
					    <f:convertDateTime pattern="dd/MM/yyyy"/>
					</h:outputText>
				    </p:column>
				    <p:column headerText="Hora">
					<h:outputText value="#{data.horaOperacion}">
					    <f:convertDateTime pattern="hh:mm:ss"/>
					</h:outputText>
				    </p:column>
				</p:dataTable>
			    </div>
			</div>
		    </div>
		</h:form>
            </ui:define>
        </ui:composition>
    </body>
</html>
