<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      >
    <body>
        <ui:composition template="./../../../WEB-INF/facelets/templates/templateServiciosGenerales.xhtml">
            <ui:define name="contenido">
                <div class="card  card-primary">
                    <div class="card -heading">
                        <center><h3>Reporte QHSE</h3></center>
                    </div>
                    <div class="card-body">
                        <h:form  id="formReporte">
                            <div class="row">
                                <div class="col-md-1 col-xs-12">
                                    <label>Totales:</label>
                                </div>
                                <div class="col-md-3 col-xs-4">
                                    <div class="col-md-3 col-xs-4">Mes</div>
                                    <div class="col-md-9 col-xs-8">
                                        <p:selectOneMenu value="#{reporteQHSEBean.mesSeleccion}" styleClass="form-control"
                                                           
                                                           valueChangeListener="#{reporteQHSEBean.selectMes}">
                                            <f:selectItem itemValue="-1" itemLabel="Seleccionar..."/>
                                            <f:selectItems value="#{reporteQHSEBean.meses}"/>
                                        </p:selectOneMenu>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class=" col-md-2 col-xs-6">
                                    <div class="row">
                                        Lts de Combustible
                                    </div>
                                    <div class="row">
                                        <h:inputText value="#{reporteQHSEBean.ltsCombustible}" readonly="true"  styleClass="form-control">
                                            <f:convertNumber pattern="###,###,###.##"></f:convertNumber>
                                        </h:inputText>
                                    </div>
                                </div>
                                <div class=" col-md-2 col-xs-6">
                                    <div class="row">
                                        Tipo
                                    </div>
                                    <div class="row">
                                        <input class="form-control" type="text" value="GASOLINA" disabled="false"></input> 
                                    </div>
                                </div>
                                <div class=" col-md-2 col-xs-6">
                                    <div class="row">
                                        Importe
                                    </div>
                                    <div class="row">
                                        <h:inputText value="#{reporteQHSEBean.importe}" readonly="true"  styleClass="form-control">
                                            <f:convertNumber currencySymbol="$" pattern="###,###,###.##"/>
                                        </h:inputText>
                                    </div>
                                </div>
                                <div class=" col-md-2 col-xs-6">
                                    <div class="row">
                                        Precio por Litro
                                    </div>
                                    <div class="row">
                                        <h:inputText value="#{reporteQHSEBean.precio}" readonly="true"  styleClass="form-control">
                                            <f:convertNumber currencySymbol="$" pattern="###,###,###.##"/>
                                        </h:inputText>
                                    </div>
                                </div>
                                <div class=" col-md-2 col-xs-6">
                                    <div class="row">
                                        Km Mensual
                                    </div>
                                    <div class="row">
                                        <h:inputText value="#{reporteQHSEBean.kmMensual}" readonly="true"  styleClass="form-control">
                                            <f:convertNumber pattern="###,###,###"/>
                                        </h:inputText>
                                    </div>
                                </div>
                                <div class=" col-md-2 col-xs-6">
                                    <div class="row">
                                        Rendimineto por Litro
                                    </div>
                                    <div class="row">
                                        <h:inputText value="#{reporteQHSEBean.rendimiento}" readonly="true"  styleClass="form-control">
                                            <f:convertNumber pattern="###,###,###.##"/>
                                        </h:inputText>
                                    </div>
                                </div>
                            </div>
                            <br/>
                            <div class="row">
                                <div class="table-responsive">
                                    <p:dataTable id="maxByOficina" value="#{reporteQHSEBean.maxByOficina}" var="data"
                                                   styleClass="table table-striped" style="width: 99.9%" rows="20" paginator="true" paginatorPosition="bottom">
                                        <p:columnGroup type="header">
                                            <p:row>
                                                <p:column id="hOficina" headerText="Oficina" style="font-size: small; border-color:  whitesmoke;"/>
                                                <p:column id="hLtsCom" headerText="Lts de combustible" style="font-size: small; border-color:  whitesmoke;"/>
                                                <p:column id="hImporte" headerText="Importe" style="font-size: small; border-color:  whitesmoke;"/>
                                                <p:column id="hPrecioByLt" headerText="Precio por Litro" style="font-size: small; border-color:  whitesmoke;"/>
                                                <p:column id="hKmMes" headerText="Kilometraje mensual" style="font-size: small; border-color:  whitesmoke;"/>
                                                <p:column id="hRendimientoByLt" headerText="Rendimiento por Litro" style="font-size: small; border-color:  whitesmoke;"/>
                                            </p:row>
                                        </p:columnGroup>
                                        <p:column id="cOficina" style="font-size: small; text-align: center; padding: 3px 0px 3px 0px; 
                                                    border-color:  whitesmoke;" >
                                            <h:outputText value="#{data.nameOficina}">
                                                <f:convertNumber pattern="###,###,###.##"></f:convertNumber>
                                            </h:outputText>
                                        </p:column>
                                        <p:column id="cLtsCom" style="font-size: small; text-align: center; padding: 3px 0px 3px 0px; 
                                                    border-color:  whitesmoke;" >
                                            <h:outputText value="#{data.cantidad}">
                                                <f:convertNumber pattern="###,###,###.##"></f:convertNumber>
                                            </h:outputText>
                                        </p:column>
                                        <p:column id="cImporte" style="font-size: small; text-align: center; padding: 3px 0px 3px 0px; 
                                                    border-color:  whitesmoke;" >
                                            <h:outputText value="#{data.cargo}">
                                                <f:convertNumber currencySymbol="$" pattern="###,###,###.##"/>
                                            </h:outputText>
                                        </p:column>
                                        <p:column id="cPrecioByLt" style="font-size: small; text-align: center; padding: 3px 0px 3px 0px; 
                                                    border-color:  whitesmoke;" >
                                            <h:outputText value="#{data.precioUnitario}">
                                                <f:convertNumber currencySymbol="$" pattern="###,###,###.##"></f:convertNumber>
                                            </h:outputText>
                                        </p:column>
                                        <p:column id="cKmMes" style="font-size: small; text-align: center; padding: 3px 0px 3px 0px; 
                                                    border-color:  whitesmoke;" >
                                            <h:outputText value="#{data.kmMensual}">
                                                <f:convertNumber pattern="###,###,###.##"></f:convertNumber>
                                            </h:outputText>
                                        </p:column>
                                        <p:column id="cRendimientoByLt" style="font-size: small; text-align: center; padding: 3px 0px 3px 0px; 
                                                    border-color:  whitesmoke;" >
                                            <h:outputText value="#{data.rendimiento}">
                                                <f:convertNumber pattern="###,###,###.##"></f:convertNumber>
                                            </h:outputText>
                                        </p:column>

                                    </p:dataTable>
                                </div>
                            </div>
                            <hr/>
                            <div class="table-responsive">
                                <p:dataTable id="maxKilometraje" value="#{reporteQHSEBean.kmByUsuario}" var="data"
                                               styleClass="table table-striped" style="width: 99.9%" rows="20" paginator="true" paginatorPosition="bottom">

                                    <p:columnGroup type="header">
                                        <p:row>
                                            <p:column id="hGerencia" headerText="Gerencia" style="font-size: small; border-color:  whitesmoke;" filterBy="#{data.gerencia}"/>
                                            <p:column id="hUsuario" headerText="Usuario" style="font-size: small; border-color:  whitesmoke;" filterBy="#{data.usuario}"/>
                                            <p:column id="hPlacas" headerText="Placas" style="font-size: small; border-color:  whitesmoke;" filterBy="#{data.placa}"/>
                                            <p:column id="hKilometraje" headerText="Kilometraje" style="font-size: small; border-color:  whitesmoke;" filterBy="#{data.kmMensual}"/>
                                        </p:row>

                                    </p:columnGroup>
                                    <p:column id="cGerencia" style="font-size: small; text-align: center; padding: 3px 0px 3px 0px; 
                                                border-color:  whitesmoke;" >
                                        <h:outputText value="#{data.gerencia}"/>
                                    </p:column>
                                    <p:column id="cUsuario" style="font-size: small; text-align: center; padding: 3px 0px 3px 0px; 
                                                border-color:  whitesmoke;">
                                        <h:outputText value="#{data.usuario}"/>
                                    </p:column>
                                    <p:column id="cPlaca" style="font-size: small; text-align: center; padding: 3px 0px 3px 0px; 
                                                border-color:  whitesmoke;">
                                        <h:outputText value="#{data.placa}"/>                                                    
                                    </p:column>
                                    <p:column id="cKilometraje" style="font-size: small; text-align: center; padding: 3px 0px 3px 0px; 
                                                border-color:  whitesmoke;">
                                        <h:outputText value="#{data.kmMensual}">
                                            <f:convertNumber pattern="###,###,###"/>
                                        </h:outputText>           
                                    </p:column>
                                </p:dataTable>
                            </div>
                            <div class="row" style="text-align: right">
                                <h:outputLink value="/ServiciosGenerales/generarExcelReporteHSE?DFIWZ=#{reporteQHSEBean.mesSeleccion}" id="descargar">
                                    <button type="button" class="btn btn-primary" title="Descargar Excel" >
                                        <i class="fa fa-file-excel-o"></i>
                                    </button>
                                </h:outputLink>
                            </div>

                        </h:form>

                    </div>
                </div>
            </ui:define>
        </ui:composition>
    </body>
</html>
