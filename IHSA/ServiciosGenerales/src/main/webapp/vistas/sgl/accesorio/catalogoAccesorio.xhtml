<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <body>
        <ui:composition template="./../../../WEB-INF/facelets/templates/templateServiciosGenerales.xhtml">
            <ui:define name="contenido">
                <h:panelGroup  rendered="#{empty sesion.usuario}" styleClass="altura">
                    <ui:include src="./../../../login.xhtml"/>
                </h:panelGroup> 
		<div class="row">
		    <h:form >
			<div class="row text-center">
			    <h3 class="text-title text-info">    Catálogo de Accesorios</h3>
			</div>
			<h:messages infoClass="textoMensajeError"/>
			<div class="row ">
			    <div class="col-lg-1 col-xs-1 text-center">
				<p:commandLink title="Agregar accesorio" actionListener="#{accesorioBean.agregarAccesorio(event)}"  
						 styleClass="btn btn-default"
						 onclick="$(dialogoAgregarAccesorio).modal('show');">
				    <h:graphicImage url="#{msgs['sgl.ruta.imagen']}button_create.png" 
						      styleClass="imagenSinBorde"/>
				</p:commandLink>
			    </div>
			</div>
			<div class="col-lg-12 col-xs-12">
			    <p:dataTable id="dtAc" var="ac"  value="#{accesorioBean.lista}" rows="10"
					   paginator="true"  showGridlines="true" size="small"
					   paginatorPosition="bottom" >
				<p:column headerText="Marca"
					    filterBy="#{ac.marca}"  filterMatchMode="contains">
				    <h:outputText value="#{ac.marca}"/>
				</p:column>
				<p:column headerText="Modelo" filterBy="#{ac.modelo}"  filterMatchMode="contains">
				    <h:outputText value="#{ac.modelo}"/>
				</p:column>
				<p:column headerText="Serie" filterBy="#{ac.serie}"  filterMatchMode="contains">
				    <h:outputText value="#{ac.serie}"/>
				</p:column>
				<p:column headerText="Adquirido" filterBy="#{ac.fechaAdquisicion}"  filterMatchMode="contains">
				    <h:outputText value="#{ac.fechaAdquisicion}">
					<f:convertDateTime pattern="dd/MM/yyyy"/>
				    </h:outputText>
				</p:column>
				<p:column headerText="Descripción" filterBy="#{ac.descripcion}"  filterMatchMode="contains">
				    <h:outputText value="#{ac.descripcion}"/>
				</p:column>
				<p:column headerText="Asignado a" filterBy="#{ac.usuario}"  filterMatchMode="contains">
				    <h:outputText value="#{not empty ac.usuario ? ac.usuario : 'No' }"/>
				</p:column>
				<p:column headerText="Asignado" filterBy="#{ac.fechaOperacion}"  filterMatchMode="contains">
				    <h:outputText value="#{ac.fechaOperacion}">
					<f:convertDateTime pattern="dd/MM/yyyy"/>
				    </h:outputText>
				</p:column>
				<p:column>
				    <p:commandLink styleClass="link" value="Administrar" 
						     action="#{accesorioBean.seleccionarAccesorio}">
					<f:param name="idAccesorio" value="#{ac.id}"/>
				    </p:commandLink>
				</p:column>
			    </p:dataTable>
			</div>
		    </h:form>
		</div>
		<ui:include src="popAccesorio.xhtml"/>
	    </ui:define>
	</ui:composition>

    </body>
</html>
