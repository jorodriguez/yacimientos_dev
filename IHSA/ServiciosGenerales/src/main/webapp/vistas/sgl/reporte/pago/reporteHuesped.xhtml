<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                >

    <div class="row">
        <div class="card  panel-default">
            <div class="card -heading">
                <h:form>
                    <h:selectOneMenu value="#{consultaBean.reporteOficinaVo.anio}" 
                                     class="control-label"
                                     valueChangeListener="#{consultaBean.traerPorAnio}"
                                     >
                        <f:ajax execute="@this" render="@form"/>
                        <f:selectItems value="#{consultaBean.reporteOficinaVo.listaAnio}"/>
                    </h:selectOneMenu>
                </h:form>
            </div>
            <div class="card-body">
                <div id="divHuespedStaff" class="col-lg-4">
                    <div id="graficaHuespedStaff" class="col-lg-12"></div>
                    <h:form id="frmHuespedStaff">
                        <h:inputHidden id="hidenOficina" value="#{consultaBean.nombre}"/>
                        <p:commandLink id="btnBuscarHuespedesSHAnio" value="Buscar" 
                                       actionListener="#{consultaBean.traerHospedadosStaff(event)}"
                                       style="display: none;"/>
                    </h:form>
                </div>
                <div id="divHuespedHotel" class="col-lg-4">
                    <div id="graficaHuespedHotel" class="col-lg-12"></div>
                    <h:form id="frmHuespedHotel">
                        <h:inputHidden id="hidenOficinaHotel" value="#{consultaBean.nombre}"/>
                        <p:commandLink id="btnHotelPorOficina" value="Buscar" style="display: none;"
                                       actionListener="#{consultaBean.buscarHotelOficina(event)}">

                        </p:commandLink>
                    </h:form>
                </div>
                <!-- Detalle hospedados en staff house -->
                <div id="divGraficaHospedadosStaff" class="col-lg-8card panel-default" style="display: none;">
                    <a  class="fa fa-times fa-2x" style=" float: right;" 
                        onclick="ocultarDiv('divGraficaHospedadosStaff');
                                mostrarDiv('divHuespedHotel');"></a>
                    <div  class="col-lg-12">
                        <div id="graficaHuespedStaffAnio" class="col-lg-12"></div>
                        <h:form id="frmHuespedStaffMes">
                            <h:inputHidden id="hidenOficinaMes" value="#{consultaBean.inicio}"/>
                            <p:commandLink id="btnBuscarHuespedesSHMes" value="Buscar" 
                                           actionListener="#{consultaBean.traerHospedadosStaffMes(event)}"
                                           style="display: none;"/>
                        </h:form>
                    </div>
                    <div id="divHuespedStaffHouseMes" class="col-lg-10">
                        <div id="graficaHuespedStaffMes" class="col-lg-12"></div>
                        <h:form id="frmHuespedStaffPorMes">
                            <h:inputHidden id="hidenStaffPorMes" value="#{consultaBean.servicioStaff}"/>
                            <p:commandLink id="btnhuespedesSHMes" value="Buscar" 
                                           actionListener="#{consultaBean.hospedadosPorStaffMes(event)}"
                                           style="display: none;"/>
                            <p:dataTable id="dtHuespedPorSH" 
                                         value="#{consultaBean.mapaConsulta.get('huespedStaff')}" var="data"
                                         rows="10" styleClass="dataPaginatorDataTable" 
                                         paginator="true"  showGridlines="true" size="small"
                                         paginatorPosition="bottom" 
                                         style="font-size: 1em; width: 100%" >
                                <f:facet name="header"><h:outputLabel value="#{consultaBean.nombre}"/></f:facet>                                
                                <p:column headerText="Staff-House" style="text-align: left;">
                                    <h:outputText value="#{data.nombreSgStaff}"/>
                                </p:column>
                                <p:column headerText="Gerencia" style="text-align: left;">
                                    <h:outputText value="#{data.nombreGerencia}"/>
                                </p:column>
                                <p:column headerText="Huesped" style="text-align: center;">
                                    <h:outputText value="#{data.nombreHuesped}"/>
                                </p:column>
                                <p:column headerText="Ingreso" style="text-align: center;">
                                    <h:outputText value="#{data.fechaIngreso}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Salida" style="text-align: right;">
                                    <h:outputText value="#{data.fechaSalida}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                            <h:panelGrid columns="2">
                                <p:commandButton value="Exportar">
                                    <p:dataExporter fileName="dtHuespedPorSH" type="xls" target="dtHuespedPorSH" />
                                </p:commandButton>
                            </h:panelGrid>
                        </h:form>
                    </div>
                </div>
                <!-- Detalle hospedados en hotel  -->
                <div id="divGraficaHospedadosHotel" class="col-lg-8card panel-default" style="display: none;">
                    <a  class="fa fa-times fa-2x" style=" float: right;" 
                        onclick="ocultarDiv('divGraficaHospedadosHotel');
                                mostrarDiv('divHuespedHotel');
                                mostrarDiv('divHuespedStaff');"></a>
                    <div id="graficaHuespedHotelOficina" class="col-lg-12"></div>
                    <h:form id="frmHuespedHotelOficina">
                        <h:inputHidden id="hidenOficinaHotelMes" value="#{consultaBean.inicio}"/>
                        <p:commandLink id="btnBuscarHuespedesHotelMes" value="Buscar" 
                                       actionListener="#{consultaBean.traerHospedadoHotelMes(event)}"
                                       style="display: none;"/>
                    </h:form>
                    <div id="divHuespedHotelMes" class="col-lg-10">
                        <div id="graficaHuespedHotelMes" class="col-lg-12"></div>
                        <h:form id="frmHuespedPorHotel">
                            <h:inputHidden id="hidenServicio" value="#{consultaBean.servicioHotel}"/>
                            <p:commandLink id="btnBuscarPorServicio" value="Buscar" 
                                           actionListener="#{consultaBean.traerHospedadosHotel(event)}"
                                           style="display: none;"/>
                            <p:dataTable id="dtHuespedPorHotel" 
                                         value="#{consultaBean.mapaConsulta.get('huespedHotel')}" var="data"
                                         rows="10" styleClass="dataPaginatorDataTable" 
                                         paginator="true"  showGridlines="true" size="small"
                                         paginatorPosition="bottom" 
                                         style="font-size: 1em; width: 100%" >
                                <f:facet name="header"><h:outputLabel value="#{consultaBean.servicioHotel}"/></f:facet>
                                <!--p:column headerText="Servicio" style="text-align: left;">
                                    <h:outputText value="#{data.tipoEspecifico}"/>
                                </p:column-->
                                <p:column headerText="Gerencia" style="text-align: left;">
                                    <h:outputText value="#{data.nombreGerencia}"/>
                                </p:column>
                                <p:column headerText="Huesped" style="text-align: center;">
                                    <h:outputText value="#{data.nombreHuesped}"/>
                                </p:column>
                                <p:column headerText="Ingreso" style="text-align: center;">
                                    <h:outputText value="#{data.fechaIngreso}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Salida" style="text-align: right;">
                                    <h:outputText value="#{data.fechaSalida}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="ReservaciÃ³n" style="text-align: center;">
                                    <h:outputText value="#{data.numeroHabitacionHotel}"/>
                                </p:column>
                                <p:column headerText="Carta" style="text-align: left;">
                                    <h:outputLink     target="_blank" rendered="#{data.idAdjunto ne null}"
                                                      value="/ServiciosGenerales/AbrirArchivo?ZWZ2W=#{data.idAdjunto}&amp;ZWZ3W=#{data.adjuntoUUID}"
                                                      title="#{msgs['sistema.abrir.archivo']}">
                                        <center><h:graphicImage url="#{msgs['sgl.ruta.imagen']}icon_attach.gif" 
                                                                alt="#{msgs['sistema.abrir.archivo']}" /></center>
                                    </h:outputLink>
                                </p:column>
                            </p:dataTable>
                            <h:panelGrid columns="2">
                                <p:commandButton value="Exportar">
                                <p:dataExporter fileName="dtHuespedPorHotel" type="xls" target="dtHuespedHotel" />
                                </p:commandButton>
                            </h:panelGrid>

                        </h:form>          
                    </div>
                </div>
            </div>
        </div>
    </div>
</ui:composition>
