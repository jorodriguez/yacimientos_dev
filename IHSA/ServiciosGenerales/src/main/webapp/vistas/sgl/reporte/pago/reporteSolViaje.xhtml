<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                >
    <h:messages style="color: maroon; font-size: 12px;"/>
    <h:panelGrid columns="6">
        <h:outputLabel value="Origen:"/>
        <p:selectOneMenu id="idComboOficina" value="#{consultaBean.idOficina}" >
            <f:selectItems value="#{consultaBean.listaOficina}"/>
        </p:selectOneMenu>
        <h:outputText value="Solicitud: "/>
	<p:selectOneMenu value="#{consultaBean.tipoSolicitud}">
	    <f:selectItems value="#{consultaBean.listaTipoSolicitud}"/>
	</p:selectOneMenu>
        <h:panelGrid columns="9" styleClass="bordePanelGrid">
            <h:outputText value="Inicio"/>
            <h:panelGrid  columns="2">
                <script>
		    $(function () {
			$("#frmSolViaje\\:inicio").datepicker({
			    showOn: "button",
			    buttonImage: "../resources/img/cal_button.gif",
			    buttonImageOnly: true,
			    dateFormat: "dd/mm/yy",
			    onSelect: function (date) {
				inicio = date;
			    }
			});
		    });
                </script>
                <h:inputText  value="#{consultaBean.inicio}" id="inicio" size="10" required="true" requiredMessage="Seleccione el inicio"/>
            </h:panelGrid> 
            <h:outputText value="Fin" />
            <h:panelGrid columns="2" >
                <script>
		    $(function () {
			$("#frmSolViaje\\:fin").datepicker({
			    showOn: "button",
			    buttonImage: "../resources/img/cal_button.gif",
			    buttonImageOnly: true,
			    dateFormat: "dd/mm/yy",
			    maxDate: new Date(new Date()),
			    onSelect: function (date) {
				fin = date;
			    },
			    onClose: function (selectedDate) {
				$("#frmSolViaje\\:inicio").datepicker("option", "maxDate", selectedDate);
			    }
			});
		    });
                </script>
                <h:inputText  value="#{consultaBean.fin}" id="fin" size="10" required="true" requiredMessage="Seleccione el final"/>                           
            </h:panelGrid>
        </h:panelGrid>
        <p:commandLink value="#{msgs['sistema.buscar']}" 
                         actionListener="#{consultaBean.buscarSolicitudViaje(event)}"  styleClass="btn btn-sm btn-success"/>
    </h:panelGrid>

    <h:commandLink id="btnLimpiar" style="display: none" actionListener="#{consultaBean.limiarLista(event)}" 
                   styleClass="btn btn-sm btn-success"/>
    <div id="graficaSolViaje" style="min-width: 700px; height: 400px; margin: 0 auto;" ></div>
    <br/>
    <h:inputHidden id="hidenServicio" value="#{consultaBean.servicioStaff}"/>
    <p:commandLink id="btnBuscarPorServicio" value="Buscar" actionListener="#{consultaBean.traerSolicitudGerencia(event)}"
                     style="display: none;">
    </p:commandLink>
    <p:dataTable id="dtSolViaje" value="#{consultaBean.listaSolicitud}" var="data"
                   rows="10" styleClass="dataPaginatorDataTable" 
                   paginator="true"  showGridlines="true" size="small"
                   paginatorPosition="bottom" 
                   style="font-size: 1em; width: 100%" >
        <f:facet name="header"><h:outputLabel value="#{consultaBean.servicioStaff}"/></f:facet>
        <p:column headerText="CÃ³digo" style="text-align: left;">
            <h:outputText value="#{data.codigo}"/>
        </p:column>
        <p:column headerText="Viajero" style="text-align: center;">
            <h:outputText value="#{data.viajero}"/>
        </p:column>
        <p:column headerText="Destino" style="text-align: center;">
            <h:outputText value="#{data.destino}"/>
        </p:column>
        <p:column headerText="Salida" style="text-align: center;">
            <h:outputText value="#{data.fechaSalida}">
                <f:convertDateTime pattern="dd/MM/yyyy"/>
            </h:outputText>
        </p:column>
        <p:column headerText="H. Salida" style="text-align: center;">
            <h:outputText value="#{data.horaSalida}">
                <f:convertDateTime pattern="HH:mm aa"/>
            </h:outputText>
        </p:column>
        <p:column headerText="Regreso" style="text-align: right;">
            <h:outputText value="#{data.fechaRegreso}">
                <f:convertDateTime pattern="dd/MM/yyyy"/>
            </h:outputText>
        </p:column>
        <p:column headerText="Motivo" style="text-align: center;">
            <h:outputText value="#{data.motivo}"/>
        </p:column>
    </p:dataTable>
    <h:panelGrid columns="2">
        <p:commandButton value="Exportar">
        <p:dataExporter fileName="DatosViaje" type="xls" target="dtSolViaje" />
        </p:commandButton>
    </h:panelGrid>
    <br/>
</ui:composition>
