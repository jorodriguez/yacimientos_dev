<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                >
    <div class="row">
        <div class="col-lg-4">
            <div class="card  card-primary">
                <div class="card -heading">
                    Staff house
                </div>
                <div class="card-body">
                    <div class="input-group col-lg-12">
                        <div class="form-group col-lg-12">
                            <p:selectOneMenu id="idComboStaff" value="#{consultaBean.idStaff}" 
                                             styleClass="form-control col-lg-4" 
                                             valueChangeListener="#{consultaBean.cambiarStaff}">
                                <f:selectItems value="#{consultaBean.listaStaff}" />
                            </p:selectOneMenu>
                        </div>
                    </div>
                    <h:commandLink id="btnLimpiar" style="display: none" actionListener="#{consultaBean.limiarLista(event)}" 
                                   styleClass="btn btn-sm btn-success"/>
                    <h:inputHidden id="hidenServicioStaff" value="#{consultaBean.servicioStaff}"/>
                    <h:commandLink id="btnBuscarPorServicio" value="Buscar" actionListener="#{consultaBean.traerPagos(event)}"
                                   style="display: none;" onclick="$(dialogoPagoServicio).modal('show');"/>
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="card  card-primary">
                <div class="card -heading">
                    Gasto Hotel
                </div>
                <div class="card-body">
                    <p:selectOneMenu id="idComboOficina" value="#{consultaBean.idOficinaHotel}"  styleClass="form-control"
                                     valueChangeListener="#{consultaBean.buscarGastoHotel}" >
                        <f:selectItems value="#{consultaBean.listaOficina}"/>
                    </p:selectOneMenu>
                    <div id="graficaGastoHotel" class="col-lg-12 col-xs-12" ></div>
                    <h:inputHidden id="hidenServicioHotel" value="#{consultaBean.servicioHotel}"/>
                    <p:commandLink id="btnBuscarPorServicioHotel" value="Buscar" actionListener="#{consultaBean.traerHospedadosHotel(event)}"
                                   onclick="$(dialogoHuespedesHotel).modal('show');"
                                   style="display: none;"/>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="card  card-primary">
                <div class="card -heading">
                </div> 
                <div class="card-body">
                    <p:selectOneMenu id="idComboOficinaVehiculo" value="#{consultaBean.idOficina}" 
                                     valueChangeListener="#{consultaBean.buscarPagosVehiculos}">
                        <f:selectItems value="#{consultaBean.listaOficina}"/>
                    </p:selectOneMenu>
                    <p:selectOneMenu id="idComboServicioVehiculo" value="#{consultaBean.idServicio}" valueChangeListener="#{consultaBean.buscarPagosVehiculos}"
                                     >
                        <f:selectItem itemLabel="Todos  . . . " itemValue="-1"/>
                        <f:selectItems value="#{consultaBean.listaServicioVehiculo}"/>
                    </p:selectOneMenu>

                                                                    <!--h:commandLink id="btnLimpiar" style="display: none" actionListener="#{consultaBean.limiarLista(event)}" 
                                                                    styleClass="btn btn-sm btn-success"/-->
                    <div id="graficaPagoVehiculo" class="col-lg-12 col-xs-12" ></div>
                    <h:inputHidden id="hidenServicioVehiculo" value="#{consultaBean.servicioVehiculo}"/>
                    <p:commandLink id="btnBuscarPorServicioVehiculo" value="Buscar" actionListener="#{consultaBean.traerPagoVehiculos(event)}"
                                   style="display: none;"/>

                    <!--Datos del vehiculo-->
                    <p:dataTable id="dtVehiculoDetalle" value="#{consultaBean.mapaConsulta.get('pagoVehiculo')}" var="data"
                                 rows="10" styleClass="dataPaginatorDataTable" 
                                 paginator="true"  showGridlines="true" size="small"
                                 paginatorPosition="bottom" 
                                 style="font-size: 1em; width: 100%" >
                        <f:facet name="header"><h:outputLabel value="Vehículo #{consultaBean.servicioVehiculo}"/></f:facet>
                        <p:column headerText="Servicio" style="text-align: left;">
                            <h:outputText value="#{data.tipoEspecifico}"/>
                        </p:column>
                        <p:column headerText="Proveedor" style="text-align: left;">
                            <h:outputText value="#{data.proveedor}"/>
                        </p:column>
                        <p:column headerText="Inicio" style="text-align: center;">
                            <h:outputText value="#{data.inicio}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Fin" style="text-align: center;">
                            <h:outputText value="#{data.fin}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Vencimiento" style="text-align: center;">
                            <h:outputText value="#{data.vencimiento}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Importe" style="text-align: right;">
                            <h:outputText value="#{data.importe}">
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Moneda" style="text-align: center;">
                            <h:outputText value="#{data.moneda}"/>
                        </p:column>
                        <p:column headerText="Recibo" style="text-align: left;">
                            <h:outputText value="#{data.recibo}"/>
                        </p:column>
                        <p:column headerText="Archivo" style="text-align: left;">
                            <h:outputLink     target="_blank" rendered="#{data.idAdjunto ne null}"
                                              value="/ServiciosGenerales/AbrirArchivo?ZWZ2W=#{data.idAdjunto}&amp;ZWZ3W=#{data.adjuntoUUID}"
                                              title="#{msgs['sistema.abrir.archivo']}">
                                <center><h:graphicImage url="#{msgs['sgl.ruta.imagen']}icon_attach.gif" 
                                                        alt="#{msgs['sistema.abrir.archivo']}" /></center>
                            </h:outputLink>
                        </p:column>
                    </p:dataTable>
                </div>	
                <div class="card -footer">
                    <p:commandButton value="Exportar">
                        <p:dataExporter fileName="PagoStaff" type="xls" target="dtPagoStaff" />
                    </p:commandButton>
                    <p:commandLink value="Gráfica Servicios" actionListener="#{consultaBean.listaPagosVehiculo(event)}" 
                                   onclick="$(dialogoPagoVehiculo).modal('show');"/>
                </div>
            </div>
        </div>
    </div>


    <!-- Modal Panel Grafica vehiculo -->
    <div class="modal fade" id="dialogoPagoVehiculo" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="card  panel-default">
                    <div class="card -heading">
                        <h4 class="modal-title"> Gráfica</h4>
                    </div>
                    <div class="card-body modal-footer">
                        <div id="graficaVehiculo"  class="col-lg-12 col-xs-12" ></div>
                    </div>
                    <div class="card -footer modal-footer">
                        <h:commandLink value="Cerrar" onclick="$(dialogoPagoVehiculo).modal('hide');"/>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Panel Huespedes en hotel -->
    <div class="modal fade" id="dialogoHuespedesHotel" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="card  panel-default">
                    <div class="card -heading">
                        <h4 class="modal-title"> Gráfica</h4>
                    </div>
                    <div class="card-body modal-footer">
                        <div class="table table-responsive">
                            <p:dataTable id="dtHuespedHotel" value="#{consultaBean.mapaConsulta.get('huespedHotel')}" var="data"
                                         rows="10" styleClass="dataPaginatorDataTable" 
                                         paginator="true"  showGridlines="true" size="small"
                                         paginatorPosition="bottom" 
                                         style="font-size: 1em; width: 100%" >
                                <f:facet name="header"><h:outputLabel value="#{consultaBean.servicioHotel}"/></f:facet>
                                <p:column headerText="Gerencia" style="text-align: left;">
                                    <h:outputText value="#{data.nombreGerencia}"/>
                                </p:column>
                                <p:column headerText="Huesped" >
                                    <h:outputText value="#{data.nombreHuesped}" style="text-align: left;" />
                                </p:column>
                                <p:column headerText="Ingreso" style="text-align: center;">
                                    <h:outputText value="#{data.fechaIngreso}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Salida" style="text-align: right;">
                                    <h:outputText value="#{data.fechaSalida}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Reservación" style="text-align: center;">
                                    <h:outputText value="#{data.numeroHabitacionHotel}"/>
                                </p:column>
                                <p:column headerText="Carta" style="text-align: left;">
                                    <h:outputLink     target="_blank" rendered="#{data.idAdjunto ne null}"
                                                      value="/ServiciosGenerales/AbrirArchivo?ZWZ2W=#{data.idAdjunto}&amp;ZWZ3W=#{data.adjuntoUUID}"
                                                      title="#{msgs['sistema.abrir.archivo']}">
                                        <center><h:graphicImage url="#{msgs['sgl.ruta.imagen']}icon_attach.gif" 
                                                                alt="#{msgs['sistema.abrir.archivo']}" /></center>
                                    </h:outputLink>
                                </p:column>
                            </p:dataTable>
                        </div>
                    </div>
                    <div class="modal-footer panel-footer">
                        <p:commandButton value="Exportar">
                            <p:dataExporter fileName="HospedadosHotel" type="xls" target="dtHuespedHotel" />
                        </p:commandButton>
                        <h:commandLink value="Cerrar" onclick="$(dialogoHuespedesHotel).modal('hide');"
                                       styleClass="btn btn-default"/>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Panel PAos staff house-->
    <div class="modal fade" id="dialogoPagoServicio" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="card  panel-default">
                    <div class="card -heading">
                        Pagos de #{consultaBean.servicioStaff}
                    </div>
                    <div class="card-body">
                        <div class="table table-responsive">
                            <p:dataTable id="dtPagoStaff" value="#{consultaBean.mapaConsulta.get('pagoStaff')}" var="data"
                                         rows="10" styleClass="dataPaginatorDataTable" 
                                         paginator="true"  showGridlines="true" size="small"
                                         paginatorPosition="bottom" 
                                         style="font-size: 1em; width: 100%" >
                                <f:facet name="header"><h:outputLabel value="Servicio de #{consultaBean.servicioStaff}"/></f:facet>	    
                                <p:column headerText="Inicio" style="text-align: center;">
                                    <h:outputText value="#{data.inicio}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Vencimiento" style="text-align: center;">
                                    <h:outputText value="#{data.vencimiento}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Importe" style="text-align: right;">
                                    <h:outputText value="#{data.importe}">
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Moneda" style="text-align: center;">
                                    <h:outputText value="#{data.moneda}"/>
                                </p:column>
                                <p:column headerText="Recibo" style="text-align: left;">
                                    <h:outputText value="#{data.recibo}"/>
                                </p:column>
                                <p:column headerText="Archivo" style="text-align: left;">
                                    <h:outputLink     target="_blank" rendered="#{data.idAdjunto ne null}"
                                                      value="/ServiciosGenerales/AbrirArchivo?ZWZ2W=#{data.idAdjunto}&amp;ZWZ3W=#{data.adjuntoUUID}"
                                                      title="#{msgs['sistema.abrir.archivo']}">
                                        <center><h:graphicImage url="#{msgs['sgl.ruta.imagen']}icon_attach.gif" 
                                                                alt="#{msgs['sistema.abrir.archivo']}" /></center>
                                    </h:outputLink>
                                </p:column>
                            </p:dataTable>
                        </div>
                    </div>
                    <div class="card -footer">
                        <p:commandButton value="Exportar">
                            <p:dataExporter fileName="PagoStaff" type="xls" target="dtPagoStaff" />
                        </p:commandButton> 
                        <h:commandLink  actionListener="#{consultaBean.listaPagosStaff(event)}"
                                        onclick="$(dialogoPagoStaff).modal('show');"
                                        styleClass="btn btn-info" 
                                        >
                            <i class="fa fa-bar-chart"></i>
                        </h:commandLink>
                        <h:commandLink value="Cerrar" onclick="$(dialogoPagoServicio).modal('hide');" styleClass="btn btn-default"
                                       ></h:commandLink>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Grafica servicio staff house -->
    <div class="modal fade" id="dialogoPagoStaff" data-backdrop="static" data-keyboard="false" style="z-index: 10050;">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="card  panel-default">
                    <div class="card -heading">
                        <h4 class="modal-title"> Gráfia</h4>
                    </div>
                    <div class="card-body modal-footer">

                    </div>
                    <div class="card -footer modal-footer">
                        <h:commandLink value="Cerrar" onclick="$(dialogoPagoStaff).modal('hide');"/>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ui:composition>
