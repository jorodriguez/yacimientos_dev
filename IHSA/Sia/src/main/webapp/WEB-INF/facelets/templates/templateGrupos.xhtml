<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <h:head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <meta
            content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
            name="viewport" />
        <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
	<meta http-equiv="Pragma" content="no-cache" />
	<meta http-equiv="Expires" content="-1" />

        <title>Sistema Integral de Administración</title>




        <!-- Font Awesome -->
        <link rel="stylesheet" href="/resources/css/all.min.css" />
        <!-- Theme style -->
        <link rel="stylesheet" href="/resources/css/adminlte.min.css" />
        <!-- overlayScrollbars -->
        <link rel="stylesheet" href="/resources/css/OverlayScrollbars.min.css"/>

        <!-- Google Font -->
        <link rel="stylesheet"
              href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic"></link>
        
        
        <style type="text/css">
                .ui-datepicker {
                        z-index: 10004 !important;
                }

                .ui-autocomplete-panel {
                        z-index: 10004 !important;
                }


                .fab {
                   width: 70px;
                   height: 70px;
                   background-color: #2196F3;
                   border-radius: 50%;
                   box-shadow: 0 6px 10px 0 #666;
                   transition: all 0.1s ease-in-out;

                   font-size: 50px;
                   color: white;
                   text-align: center;
                   line-height: 70px;

                   position: fixed;
                   right: 50px;
                   bottom: 50px;
                }


                .fab a {
                        font-weight: 700;
                        color : white;
                }

                .fab:hover {
                   box-shadow: 0 6px 14px 0 #666;
                   transform: scale(1.05);
                }
        </style>
    </h:head>

    <h:body class="hold-transition sidebar-mini layout-fixed">
        <div class="wrapper">
            <!--f:loadBundle basename="messages" var="msg" /-->
            
                <p:ajaxStatus onstart="PF('statusDialog').show()"
                              onsuccess="PF('statusDialog').hide()" />

                <p:dialog widgetVar="statusDialog" modal="true" draggable="false"
                          closable="false" resizable="false" showHeader="false">
                    <p:graphicImage name="/imagenes/spinner-icon-gif-10.gif" width="350px" />
                </p:dialog>
                <!-- Navbar -->
                <nav class="main-header navbar navbar-expand navbar-white navbar-light">
                    <!-- Left navbar links -->
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" data-widget="pushmenu" href="#" role="button">
                                <i class="fas fa-bars"></i></a>
                        </li>
                    </ul>
                    <!-- Right navbar links -->
                    <h:form class="navbar-nav ml-auto">
                        <ul class="navbar-nav ml-auto">
                            <!-- Navbar Search -->
                            <ui:include src="header.xhtml" />
                        </ul>
                    </h:form>
                </nav>
                <!-- Main Sidebar Container -->
                <aside class="main-sidebar sidebar-dark-primary elevation-4">
                    <!-- Brand Logo -->
                    <img src="/resources/imagenes/logo.png" alt="SIA" 
                         class="brand-image img-circle elevation-3" style="opacity: .8"/>
                    <span class="brand-text font-weight-light">SIA</span>
                    <!-- Sidebar -->
                    <div class="sidebar">
                        <!-- Sidebar user panel (optional) -->
                        <div class="user-panel mt-3 pb-3 mb-3 d-flex">
                            <div class="image">
                                <span class="fa fa-user img-circle elevation-2"/>                                     
                            </div>
                            <div class="info">
                                <div class="font-weight-bold text-white">
                                    #{sesion.usuarioVo.nombre}
                                </div>
                                <div class="font-weight-bold text-white">
                                    #{sesion.usuarioVo.puesto}
                                </div>
                                <div class="font-weight-bold text-white">
                                    #{sesion.usuarioVo.gerencia}
                                </div>
                            </div>
                        </div>
                        <!-- Sidebar Menu -->
                        <nav class="mt-2">
                            <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
                                <!-- Add icons to the links using the .nav-icon class
                                     with font-awesome or any other icon font library -->
                                <ui:repeat value="#{usuarioBean.listaMenu}" var="menu" >
                                    <li class="nav-item">
                                        <a href="#" class="nav-link">
                                            <i class="nav-icon fas fa-copy"></i>
                                            <p>
                                                #{menu.padre.nombre}
                                                <i class="fas fa-angle-left right"></i>
                                            </p></a>
                                        <ul class="nav nav-treeview">
                                            <ui:repeat value="#{menu.hijos}" var="hijo">
                                                <li class="nav-item">
                                                    <p:commandLink action="#{sesion.sustituirArrancarModulo(hijo.pagina)}"
                                                                   class="nav-link">
                                                        <i class="far fa-circle nav-icon"></i>#{hijo.nombre}
                                                    </p:commandLink>
                                                </li>
                                            </ui:repeat>
                                        </ul>
                                    </li>
                                </ui:repeat>
                            </ul>
                        </nav>
                    </div>
                    <!-- /.sidebar -->
                </aside>
                <!-- Content Wrapper. Contains page content -->
                <div class="content-wrapper">
                    <!-- Main content -->
                    <section class="content">
                        <ui:insert name="contenido" />
                    </section>

                </div>
                <!-- /.content-wrapper -->
                <footer class="main-footer">


                    <div class="pull-right hidden-xs">
                        <b>Version</b> 1.0
                    </div>
                    <strong>Copyright &#xA9; 2020 <a
                            href="http://www.kubicsoft.com" target="_blank"
                            rel="noopener noreferrer">KubicSoft, S. A. de C. V.</a>
                    </strong> All rights reserved.
                </footer>

                <!-- Control Sidebar -->
                <aside class="control-sidebar control-sidebar-dark">
                    <!-- Control sidebar content goes here -->
                </aside>
                <!-- /.control-sidebar -->
                <!-- Registro de categoría -->
                <div class="modal fade" id="dialogoUsuarioCampo" data-backdrop="static" data-keyboard="false">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h4 class="modal-title">Campos</h4>
                            </div>
                            <h:form id="frmCampoUsuario">
                                <div class="modal-body">				   
                                    <p:dataTable size="small" stripedRows="true" showGridlines="true" value="#{sesion.camposPorUsuario}" var="data"
                                                 rowStyleClass="table table-bordered table-striped"
                                                 >
                                        <p:column style="text-align: left;">
                                            <h:outputText value=" #{data.campo}" 
                                                          class="#{sesion.usuario.apCampo.id  eq data.idCampo ? 'fa fa-dot-circle-o text-info' : 'fa fa-circle-o'} " />
                                        </p:column>
                                        <p:column width="50">
                                            <p:commandLink action="#{sesion.cambioCampoUsuario(data.idCampo)}"
                                                           rendered="#{sesion.usuario.apCampo.id  ne data.idCampo}">
                                                <i class="fas fa-check text-primary"/>
                                            </p:commandLink>
                                        </p:column>
                                    </p:dataTable>
                                </div>
                                <div class="modal-footer">
                                    <p:commandLink value="Cerrar" styleClass="btn btn-default"
                                                   immediate="true"
                                                   onclick="$(dialogoUsuarioCampo).modal('hide');"/>
                                </div>
                            </h:form>
                        </div>
                    </div>
                </div>
        </div>

        <ui:include src="sessionTimeOut.xhtml" />
        
        <!-- jQuery -->
        <script src="/resources/js/jquery.min.js"></script>
        <!-- jQuery UI 1.11.4 -->
        <script>
                                                       $.noConflict(true);
                                                       // Code that uses other library's $ can follow here.
        </script>
        <script src="/resources/js/jquery-ui.min.js"></script>
        <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
        <script>
                                                       $.widget.bridge('uibutton', $.ui.button)
        </script>
        <!-- Bootstrap 4 -->
        <script src="/resources/js/bootstrap.bundle.min.js"></script>
        <!-- overlayScrollbars -->
        <script src="/resources/js/jquery.overlayScrollbars.min.js"></script>
        <!-- AdminLTE App -->
        <script src="/resources/js/adminlte.js"></script>
    </h:body>
</html>
