<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <h:head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <meta
            content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
            name="viewport" />
        <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
        <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="Expires" content="-1" />

        <title>Sistema Integral de Administraci√≥n</title>




        <!-- Font Awesome -->
        <link rel="stylesheet" href="/resources/css/all.min.css" />
        <!-- Theme style -->
        <link rel="stylesheet" href="/resources/css/adminlte.min.css" />
        <!-- overlayScrollbars -->
        <link rel="stylesheet" href="/resources/css/OverlayScrollbars.min.css"/>

        <!-- Google Font -->
        <link rel="stylesheet"
              href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic"></link>


    </h:head>
    <h:body class="g-sidenav-show bg-gray-100 hold-transition sidebar-mini">
        <div class="wrapper">
            <c:if test="#{not empty sesion.usuario}">
                <div id="wrapper">                    
                    
                    <!--<ui:include src="headerAdm.xhtml"/>-->
                    
                    <aside class="main-sidebar sidebar-dark-primary elevation-4">
                        <!-- Brand Logo -->
                        <a href="/principal.xhtml" class="brand-link">
                            <img src="/resources/imagenes/logo.png" alt="SIA" 
                                 class="elevation-0" style="opacity: .8"/>
                        </a>
                        <!-- Sidebar -->
                        <div class="sidebar">
                            <!-- Sidebar user panel (optional) -->
                            <div class="user-panel mt-3 pb-3 mb-3 d-flex">
                                <!--div class="image">
                                <span class="fa fa-user img-circle elevation-2" style="color : white"/>
                            </div>-->
                                <div class="info">
                                    <div class="font-weight-bold">
                                        #{sesion.usuarioVo.nombre}
                                    </div>
                                    <div class="font-weight-bold">
                                        #{sesion.usuarioVo.puesto}
                                    </div>
                                    <div class="font-weight-bold">
                                        #{sesion.usuarioVo.gerencia}
                                    </div>
                                </div>
                            </div>
                            <!-- Sidebar Menu -->
                            <nav class="mt-2">
                                <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
                                    <ui:repeat value="#{sesion.listaModulos}" var="modulo">
                                        <ui:fragment rendered="${modulo.ruta == null and modulo.rutaServlet != null and modulo.mapOpcion.size() gt 0}">
                                            <div id="accordion">
                                                <div class="card card-info">
                                                    <div class="card-header">
                                                        <a data-toggle="collapse"   href="#collapseOne#{modulo.id}" >
                                                            <h4 >
                                                                <b><small>#{modulo.nombre}</small></b>
                                                            </h4>
                                                        </a>
                                                    </div>
                                                    <div id="collapseOne#{modulo.id}" class="collapse show" data-parent="#accordion">
                                                        <div class="card-body">
                                                            <ui:repeat value="#{modulo.mapOpcion.entrySet().toArray()}" var="entry"
                                                                       >
                                                                <lu>
                                                                    <h:outputLabel value="#{entry.key}" 
                                                                                   style="color: #{sesion.usuario.apCampo.nombre eq entry.key ? '#006666' : ''}" />
                                                                    <ui:repeat value="#{modulo.mapOpcion.get(entry.key)}" var="opc">
                                                                        <li >
                                                                            <h:outputLink value="#{sesion.sustituirArrancarModuloPorCampo(modulo.rutaServlet, opc.idCampo, opc.pagina )}"
                                                                                          title="#{modulo.toolTip}"  
                                                                                          onmouseover="window.status = ' ';return true"
                                                                                          rendered="#{opc.total gt 0}">
                                                                                <strong> #{opc.nombre} <i class="badge badge-success" >#{opc.total}</i></strong>
                                                                            </h:outputLink>
                                                                        </li>
                                                                    </ui:repeat>
                                                                </lu>
                                                            </ui:repeat>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </ui:fragment>
                                    </ui:repeat>
                                </ul>
                            </nav>
                        </div>
                        <!-- /.sidebar -->
                    </aside>
                    <!-- Content Wrapper. Contains page content -->
                    <div class="content-wrapper">

                        <!-- Main content -->
                        <div class="content">
                            <div class="container-fluid">
                                <ui:insert name="contenido" />
                            </div>
                            <!-- /.container-fluid -->
                        </div>
                    </div>

                    <!-- /.content-wrapper -->
                    <footer class="main-footer">
                        <div class="pull-right hidden-xs">
                            <b>Version</b> 3
                        </div>
                        <ui:include src="pie.xhtml" />
                        All rights reserved.
                    </footer>

                </div>
            </c:if>
        </div>

        <!-- jQuery -->
        <script src="/resources/js/jquery.min.js"></script>
        <!-- jQuery UI 1.11.4 -->
        <script>
                $.noConflict(true);
                                                                                                  // Code that uses other library's $ can follow here.
        </script>
        <script src="/resources/js/jquery-ui.min.js"></script>
        <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
        <script>
            $.widget.bridge('uibutton', $.ui.button)
        </script>
        <!-- Bootstrap 4 -->
        <script src="/resources/js/bootstrap.bundle.min.js"></script>
        <!-- overlayScrollbars -->
        <script src="/resources/js/jquery.overlayScrollbars.min.js"></script>
        <!-- AdminLTE App -->
        <script src="/resources/js/adminlte.js"></script>
    </h:body>
</html>
