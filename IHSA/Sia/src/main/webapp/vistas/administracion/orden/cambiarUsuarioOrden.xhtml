<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"       
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:my="http://www.mytags.com/schema/mytags"
      >
    <body>
        <ui:composition template="./../../../WEB-INF/facelets/templates/templateGrupos.xhtml">
            <ui:define name="tituloPagina">
                Transferir Trabajo
            </ui:define>
            <ui:define name="contenido">
                <h:form id="frmCambioUsuarioOrden">
                    <div class="col-lg-12 col-xs-12">
                        <p:selectOneRadio id="campo" value="#{transfereriTrabajoBean.idCampo}" >
                            <f:selectItems value="#{transfereriTrabajoBean.listaCampo}"/> 
                        </p:selectOneRadio>
                    </div>
                    <div class="col-lg-12 col-xs-12">
                        <p:selectOneRadio value="#{transfereriTrabajoBean.tipoTrabajo}" >
                            <f:selectItem itemLabel="Ordenes de Compra y/o Servicios" itemValue="ocs"/>
                            <f:selectItem itemLabel="Requisiciones" itemValue="req"/>
                            <f:selectItem itemLabel="Solicitudes de viajes" itemValue="viaje"/>
                            <f:selectItem itemLabel="Inventario" itemValue="inv"/>
                            <p:ajax event="change" listener="#{transfereriTrabajoBean.cambiarTipoTrabajo}" update="frmCambioUsuarioOrden:pnlFragmento"/>
                        </p:selectOneRadio>
                    </div>
                    <div class="col-lg-12 col-xs-12">
                        <p:panelGrid columns="3">
                            <p:panelGrid style="text-align: center;" columns="2">
                                <h:outputLabel value="Usuario actual" />
                                <p:autoComplete value="#{transfereriTrabajoBean.usuarioSolicita}" 
                                                completeMethod="#{transfereriTrabajoBean.regresaUsuarioActivo}"
                                                size="35" forceSelection="true" minQueryLength="3"
                                                placeholder="Nombre o parte del nombre usuario">
                                    <p:ajax listener="#{transfereriTrabajoBean.buscarUsuarioConsulta}" />
                                </p:autoComplete>
                            </p:panelGrid>
                            <p:panelGrid style="text-align: center;" columns="2">
                                <h:outputLabel value="Usuario aprobarÃ¡"/>
                                <p:autoComplete value="#{transfereriTrabajoBean.usuarioAprobara}" 
                                                completeMethod="#{transfereriTrabajoBean.regresaUsuarioActivo}"
                                                size="35" forceSelection="true" minQueryLength="3"
                                                placeholder="Nombre o parte del nombre usuario">
                                    <p:ajax listener="#{transfereriTrabajoBean.buscarUsuarioAprueba}" />
                                </p:autoComplete>
                            </p:panelGrid>
                            <h:panelGroup rendered="#{transfereriTrabajoBean.tipoTrabajo eq 'ocs'}">
                                <p:commandLink  styleClass="btn btn-primary"
                                                action="#{transfereriTrabajoBean.pasarOrdenesCompra}"
                                                process="@form" update="@form">
                                    <i class="fa fa-check text-white"/>
                                </p:commandLink>
                            </h:panelGroup>
                            <h:panelGroup rendered="#{transfereriTrabajoBean.tipoTrabajo eq 'req'}">
                                <p:commandLink  styleClass="btn btn-primary"
                                                action="#{transfereriTrabajoBean.pasarRequisiciones}"
                                                process="@form" update="@form">
                                    <i class="fa fa-check text-white"/>
                                </p:commandLink>
                            </h:panelGroup>
                            <h:panelGroup rendered="#{transfereriTrabajoBean.tipoTrabajo eq 'viaje'}">
                                <p:commandLink  styleClass="btn btn-primary"
                                                action="#{transfereriTrabajoBean.pasarSolicitudes}"
                                                process="@form" update="@form">
                                    <i class="fa fa-check text-white"/>
                                </p:commandLink>
                            </h:panelGroup>
                            <h:panelGroup rendered="#{transfereriTrabajoBean.tipoTrabajo eq 'inv'}">
                                <p:commandLink  styleClass="btn btn-primary"
                                                action="#{transfereriTrabajoBean.pasarSolicitudMaterial}"
                                                process="@form" update="@form">
                                    <i class="fa fa-check text-white"/>
                                </p:commandLink>
                            </h:panelGroup>
                        </p:panelGrid>
                    </div>
                    <div class="col-lg-12 col-xs-12">
                        <p:panel  id="pnlFragmento">
                            <p:panel id="ocs" rendered="#{transfereriTrabajoBean.tipoTrabajo eq 'ocs'}">
                                <ui:include src="../orden/fragmento/pasarOCS.xhtml"/>
                            </p:panel>
                            <p:panel id="req"  rendered="#{transfereriTrabajoBean.tipoTrabajo eq 'req'}">
                                <ui:include src="../orden/fragmento/pasarRequisiciones.xhtml"/>
                            </p:panel>
                            <p:panel id="viaje"  rendered="#{transfereriTrabajoBean.tipoTrabajo eq 'viaje'}">
                                <ui:include src="../solicitudViaje/fragmento/pasarSolicitudViaje.xhtml"/>
                            </p:panel>
                            <p:panel id="inv"  rendered="#{transfereriTrabajoBean.tipoTrabajo eq 'inv'}">
                                <ui:include src="../inventario/pasarSolicitudMaterial.xhtml"/>
                            </p:panel>
                        </p:panel>
                    </div>
                </h:form>
            </ui:define>
        </ui:composition>

    </body>
</html>
