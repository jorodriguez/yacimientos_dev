<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html" 
      xmlns:p="http://primefaces.org/ui"
      xmlns:my="http://www.mytags.com/schema/mytags"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <h:body>

        <ui:composition template="./../../../WEB-INF/facelets/templates/templateGrupos.xhtml">
	    <center><h:messages errorClass="errorMessage" infoClass="infoMessage"/></center>

	    <h:panelGroup  rendered="#{empty sesion.usuario}" styleClass="altura">
		<ui:include src="./../../../login.xhtml"/>
	    </h:panelGroup>
	    <ui:define name="contenido">
		<div id="page">
		    <div class="row">
			<ui:include src="../menuAdministracion.xhtml" rendered="#{not empty sesion.usuario}" />
		    </div>
		    <div class="row">
			<h:form rendered="#{not empty sesion.usuario}" styleClass="textoIzquierda" >
			    <div class="col-lg-12">
				<div class="col-lg-4"></div>
				<div class="col-lg-6">
				    <h2 class="page-header">Catálogo de Ayudas</h2>
				</div>
			    </div>
			    <p:panelGrid >

				<p:panelGrid columns="3">
				    <h:outputText value="Filtro por Módulo: " />
				    <p:selectOneMenu value="#{ayudaBean.idModuloSeleccionado}" valueChangeListener="#{ayudaBean.cargarOpcionesInCombo}" style="width: 200px;" >
					<f:selectItem itemLabel="Seleccione Módulo..." itemValue="-1" />
					<f:selectItems value="#{ayudaBean.modulosListItem}" />
				    </p:selectOneMenu>
				    <p:commandLink type="submit" value="+" title="Crear Módulo" action="#{ayudaBean.mostrarPopupCrearModulo(actionEvent)}" styleClass="btn btn-default" />
				</p:panelGrid>

				<p:panelGrid columns="3">
				    <h:outputText value="Filtro por Opción: " />
				    <p:selectOneMenu value="#{ayudaBean.idOpcionSeleccionada}" valueChangeListener="#{ayudaBean.cargarAyudasInTable}" style="width: 200px;" >
					<f:selectItem itemLabel="Seleccione Opción..." itemValue="-1" />
					<f:selectItems value="#{ayudaBean.opcionesListItem}" />
				    </p:selectOneMenu>
				    <p:commandLink type="submit" value="+" title="Crear Opción" action="#{ayudaBean.mostrarPopupCrearOpcion(actionEvent)}" styleClass="btn btn-default" />
				</p:panelGrid>

				<br />

				<p:panelGrid columns="1" >
				    <p:commandLink type="submit" title="Crear Ayuda" action="#{ayudaBean.mostrarPopupCrearAyuda(actionEvent)}" styleClass="btn btn-default"  style="margin-top: 5px" >
					<p:graphicImage url="resources/imagenes/button_create.png" alt="Crear Ayuda" styleClass="imagenSinBorde" />
				    </p:commandLink> 
				    <p:commandLink value="Crear Ayuda" styleClass="linkPequenio" action="#{ayudaBean.mostrarPopupCrearAyuda(actionEvent)}" />
				</p:panelGrid>     

				<my:dataGrid id="dataGridAyudas" rows="10"  value="#{ayudaBean.ayudasFiltradasByModuloAndOpcionDataModel}" showPaginator="true" textoResultado="Mostrando ayudas del " textoPagina="pagina" textoDe="de" >
				    <my:column columnName="nombre" headerValue="Nombre"
					       itemValue="#{data.nombre}" isColumSort="true"/>
				    <p:column>
					<p:commandLink value="Modificar" action="#{ayudaBean.mostrarPopupActualizar(actionEvent)}" styleClass="link" />
				    </p:column>
				    <p:column>
					<p:commandLink value="Eliminar" action="#{ayudaBean.mostrarPopupEliminar(actionEvent)}" styleClass="link" />
				    </p:column>
				    <p:column>
					<p:commandLink value="Administrar Archivos" action="#{ayudaBean.goToAdministrarArchivosAyudas()}" styleClass="link" />
				    </p:column>                   
				</my:dataGrid>
			    </p:panelGrid>
			</h:form>

			<h:form>
			    <my:panelPopup tituloPanel="Crear Ayuda" mostrarPanel="#{ayudaBean.modalRenderedPopupCrearAyuda}" conBoton="false" >
				<center><h:messages errorClass="mensaje" infoClass="mensaje"/></center>
				<p:panelGrid columns="2">
				    <h:outputLabel value="Módulo: "/>
				    <h:outputText id="nombreModuloSeleccionado" value="#{ayudaBean.nombreModuloSeleccionado}" style="width: 200px" styleClass="f11"/>
				    <h:outputLabel value="Opción: "/>
				    <h:outputText id="nombreOpcionSeleccionada" value="#{ayudaBean.nombreOpcionSeleccionada}" style="width: 200px" styleClass="f11"/>                    
				    <h:outputLabel value="Nombre: "/>
				    <p:inputText id="nombreAyuda" value="#{ayudaBean.nombreAyuda}" style="width: 200px" styleClass="f11" maxlength="200"/>
				</p:panelGrid>
				<center>
				    <p:panelGrid columns="2">
					<p:commandButton value="Crear" action="#{ayudaBean.crearAyuda(actionEvent)}" styleClass="btn btn-info"/>
					<p:commandButton value="Cancelar" action="#{ayudaBean.cancelarCrearAyuda(actionEvent)}" styleClass="btn btn-default"/>        
				    </p:panelGrid>                        
				</center>
			    </my:panelPopup>
			</h:form>

			<h:form>
			    <my:panelPopup tituloPanel="Actualizar Ayuda" mostrarPanel="#{ayudaBean.modalRenderedPopupActualizarAyuda}" conBoton="false">
				<center><h:messages errorClass="mensaje" infoClass="mensaje"/></center>
				<p:panelGrid columns="2">
				    <h:outputLabel value="Módulo: "/>
				    <h:outputText id="nombreModuloSeleccionado" value="#{ayudaBean.nombreModuloSeleccionado}" style="width: 200px" styleClass="f11" />
				    <h:outputLabel value="Opción: "/>
				    <h:outputText id="nombreOpcionSeleccionada" value="#{ayudaBean.nombreOpcionSeleccionada}" style="width: 200px" styleClass="f11" />                    
				    <h:outputLabel value="Nombre: "/>
				    <p:inputText id="nombreAyuda" value="#{ayudaBean.nombreAyuda}" style="width: 200px" styleClass="f11" maxlength="200"/>
				</p:panelGrid>
				<center>
				    <p:panelGrid columns="2">
					<p:commandButton value="Actualizar" action="#{ayudaBean.actualizarAyuda(actionEvent)}" styleClass="btn btn-info"/>
					<p:commandButton value="Cancelar" action="#{ayudaBean.cancelarActualizarAyuda(actionEvent)}" styleClass="btn btn-default"/>        
				    </p:panelGrid>                        
				</center>
			    </my:panelPopup>
			</h:form>

			<h:form>
			    <my:panelPopup tituloPanel="Eliminar Ayuda" mostrarPanel="#{ayudaBean.modalRenderedPopupEliminarAyuda}" conBoton="false">
				<center><h:messages errorClass="mensaje" infoClass="mensaje"/></center>  
				<p:panelGrid columns="3">
				    <h:outputText value="Está seguro que desea eliminar la ayuda " />
				    <h:outputText value="#{ayudaBean.ayudaSeleccionada.nombre}" style="font-weight: bold;" />
				    <h:outputText value="?" />
				</p:panelGrid>

				<center>
				    <p:panelGrid columns="2">
					<p:commandButton value="Confirmar" action="#{ayudaBean.eliminarAyuda(actionEvent)}" styleClass="btn btn-info"/>
					<p:commandButton value="Cancelar" action="#{ayudaBean.cancelarEliminarAyuda(actionEvent)}" styleClass="btn btn-default"/>        
				    </p:panelGrid>                        
				</center>
			    </my:panelPopup>
			</h:form>  

			<h:form>
			    <my:panelPopup tituloPanel="Crear Opción" mostrarPanel="#{ayudaBean.modalRenderedPopupCrearOpcion}" conBoton="false" >
				<center><h:messages errorClass="mensaje" infoClass="mensaje"/></center>
				<p:panelGrid columns="2">
				    <h:outputLabel value="Módulo: "/>
				    <h:outputText id="nombreModuloSeleccionado" value="#{ayudaBean.nombreModuloSeleccionado}" style="width: 200px" styleClass="f11" />
				    <h:outputLabel value="Nombre: "/>
				    <p:inputText id="nombreOpcion" value="#{ayudaBean.nombreOpcion}" style="width: 200px" styleClass="f11" maxlength="64"/>
				    <h:outputLabel value="Página: "/>
				    <p:inputText id="paginaOpcion" value="#{ayudaBean.paginaOpcion}" style="width: 200px" styleClass="f11" maxlength="64" />
				</p:panelGrid>
				<br />

				<center>
				    <p:panelGrid columns="2">
					<p:commandButton value="Crear" action="#{ayudaBean.crearOpcion(actionEvent)}" styleClass="btn btn-info"/>
					<p:commandButton value="Cancelar" action="#{ayudaBean.cancelarCrearOpcion(actionEvent)}" styleClass="btn btn-default"/>        
				    </p:panelGrid>                        
				</center>
			    </my:panelPopup>
			</h:form>  

			<h:form>
			    <my:panelPopup tituloPanel="Crear Módulo" mostrarPanel="#{ayudaBean.modalRenderedPopupCrearModulo}" conBoton="false" >
				<center><h:messages errorClass="mensaje" infoClass="mensaje"/></center>  
				<table width="300px" cellpadding="0" cellspacing="0">
				    <tr>
					<td align="right"><h:outputLabel value="Nombre: "/></td>
					<td><p:inputText id="nombreModulo" value="#{ayudaBean.nombreModulo}" style="width: 200px" styleClass="f11" maxlength="32"/></td>
				    </tr>
				    <tr>
					<td align="right"><h:outputLabel value="Ruta: "/></td>
					<td><p:inputText id="rutaModulo" value="#{ayudaBean.rutaModulo}" style="width: 200px" styleClass="f11" maxlength="64" /></td>
				    </tr>
				</table>
				<center>
				    <p:panelGrid columns="2">
					<p:commandButton value="Crear" action="#{ayudaBean.crearModulo(actionEvent)}" styleClass="btn btn-info"/>
					<p:commandButton value="Cancelar" action="#{ayudaBean.cancelarCrearModulo(actionEvent)}" styleClass="btn btn-default"/>        
				    </p:panelGrid>                        
				</center>
			    </my:panelPopup>
			</h:form>   
		    </div>
		</div>
            </ui:define>

        </ui:composition>

    </h:body>
</html>
