<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"    
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"  
      
      xmlns:my="http://www.mytags.com/schema/mytags"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>

        <ui:composition template="./../../../WEB-INF/facelets/templates/templateGrupos.xhtml">
            <ui:define name="contenido">
		<div id="Pa">
		    <div class="row"> 
			<h:form rendered="#{not empty sesion.usuario}" styleClass="textoIzquierda" id="frmUserCampo">
			    <div class="col-lg-12">
				<div class="col-lg-4"></div>
				<div class="col-lg-6">
				    <h2 class="page-header">Usuarios aprueban Ordenes de compra</h2>
				</div>
			    </div>
			    <div class="col-lg-12 col-xs-12">
				<p:commandLink title="Agregar" styleClass="btn btn-default" 
						 immediate="true" action="#{usuarioBean.agregarAprobadorOrdenCompra}">
				    <p:graphicImage url="./resources/imagenes/agregar.png" styleClass="imagenSinBorde" />
				</p:commandLink>
				<p:commandLink  styleClass="linkPequenio" immediate="true" value="Agregar" title="Regresar" 
						  action="#{usuarioBean.agregarAprobadorOrdenCompra}"/>   

			    </div>
			    <div class="col-lg-12 col-xs-12">
				<f:facet name="header"><h:panelGroup><h:outputText value="#{msgs['sistema.filtro']}"/></h:panelGroup></f:facet>
				<p:selectOneRadio value="#{usuarioBean.idCampo}" 
						    valueChangeListener="#{usuarioBean.cambiarSeleccionCampo}"
						     layout="lineDirection" >
				    <f:selectItems value="#{usuarioBean.listaCampoPorUsuario}"/>
				</p:selectOneRadio>
			    </div>
			    <div class="col-lg-12 col-xs-12">
				<my:dataGrid id="dtCampoUser" 
					     value="#{usuarioBean.traerAprobadorOrdenCompra}"                            
					     showPaginator="false">
				    <p:column>
					<f:facet name="header"><h:outputText value="Nombre"/></f:facet>
					<h:outputText value="#{data.nombre}"/>
				    </p:column>
				    <p:column>
					<f:facet name="header"><h:outputText value="Puesto"/></f:facet>
					<h:outputText value="#{data.puesto}"/>
				    </p:column>
				    <p:column>
					<p:commandLink value="#{msgs['sistema.eliminar']}" styleClass="link" action="#{usuarioBean.eliminarUsuarioApruebaOC}"
							 onclick="if (!confirm('La operación va a quitar al usuario de la lista de aprobadores de OC/S, ¿está seguro?  '))
								     return false;"/>
				    </p:column>
				</my:dataGrid>
			    </div>
			</h:form>

			<!---->
			<h:form id="frmPopApruebaOC">
			    <my:panelPopup tituloPanel="#{msgs['sia.campo.agregar.campo.usuario']} " 
					   mostrarPanel="#{usuarioBean.usuarioVOAlta != null and usuarioBean.apruebaOCPop}" conBoton="false" >
				<center><h:message for="frmPopApruebaOC" errorClass="errorMessage" infoClass="infoMessage" styleClass="textoMensajeError"/></center>
				<h:panelGroup>
				    <br/>
				    <p:panelGrid columns="2">
					<h:outputText value="Usuario: "/>
					<p:inputText id="autocompleteUsuario" size="40" 
						       style="z-index: 10000015;"
						       onclick="autocompletarUsuario(this, 'hidenDesUsuario', 'frmPopApruebaOC');"/>                            
					<h:inputHidden id="hidenDesUsuario" value="#{usuarioBean.u}"/>
				    </p:panelGrid>
				    <br/>
				    <center>
					<p:panelGrid columns="2" >
					    <p:commandLink value="#{msgs['sistema.aceptar']}" action="#{usuarioBean.guardarUsuarioApruebaOC}" styleClass="btn btn-info" />
					    <p:commandLink value="#{msgs['sistema.cancelar']}" action="#{usuarioBean.cancelarUsuarioApruebaOC}" styleClass="btn btn-default"  />
					</p:panelGrid>
				    </center>
				</h:panelGroup>
			    </my:panelPopup>
			</h:form>
		    </div>
		</div>
	    </ui:define>

	</ui:composition>

    </body>
</html>
