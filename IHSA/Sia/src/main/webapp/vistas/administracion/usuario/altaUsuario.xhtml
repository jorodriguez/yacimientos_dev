<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"    
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"  
      
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <body>
        <ui:composition template="./../../../WEB-INF/facelets/templates/templateSistema.xhtml">
            <ui:define name="contenido">
                <h:form   styleClass="textoIzquierda" id="frmUser">
                    <br/>
                    <center>
                        <p:panelGrid columns="1">
                            <h:outputText value="Administración" styleClass="tituloEncabezado"/>
                        </p:panelGrid>
                        <br/>
                    </center>     
                    <!--p:panelGrid>
                        <p:commandLink title="Regresar" styleClass="btn btn-default" 
                                         immediate="true"  action="#{usuarioBean.cancelarModificacionUuario}" action="consultaUsuario">
                            <p:graphicImage url="./resources/imagenes/regresar.png" styleClass="imagenSinBorde" />
                        </p:commandLink>
                        <p:commandLink  styleClass="linkPequenio" immediate="true" value="Regresar" title="Regresar" action="consultaUsuario" action="#{usuarioBean.cancelarModificacionUuario}"/>    
                    </p:panelGrid-->
                    <h:messages  id="error" infoClass="textoMensajeError"/>
                    <p:panelGrid columns="2" >
                        <f:facet name="header"><h:outputText value="Registro de usuarios" styleClass="textoListaTabla"/></f:facet>
                        <p:panelGrid columns="2" >
                            <p:panelGrid columns="2">
                                <h:outputText value="Mail"/>
                                <h:outputText value="*"/>
                            </p:panelGrid>
                            <p:inputText value="#{usuarioBean.usuarioVOAlta.mail}" size="30"  required="true" requiredMessage="Agregue el mail"/>
                            <p:panelGrid columns="2">
                                <h:outputText value="#{msgs['usuario.bloque.default']}"/>
                                <h:outputText value="*"/>
                            </p:panelGrid>                                
                            <p:panelGrid columns="2">
                                <p:selectOneMenu value="#{usuarioBean.usuarioVOAlta.idCampo}" id="campoUser">
                                    <f:selectItem itemLabel="Seleccione . . . " itemValue="-1"/>
                                    <f:selectItems value="#{usuarioBean.listaCampo}"/>
                                </p:selectOneMenu>
                                <h:message errorClass="textoMensajeError" infoStyle="textoMensajeError" for="campoUser"/>
                            </p:panelGrid>
                            <p:panelGrid columns="2">
                                <h:outputText value="Nombre"/>
                                <h:outputText value="*"/>
                            </p:panelGrid>                                
                            <p:panelGrid columns="2">
                                <p:inputText  value="#{usuarioBean.usuarioVOAlta.nombre}" size="40" required="true" requiredMessage="Agregue el nombre" id="nombreUser"/>
                                <h:message errorClass="textoMensajeError" infoStyle="textoMensajeError" for="nombreUser"/>
                            </p:panelGrid>
                            <p:panelGrid columns="2">
                                <h:outputText value="Puesto"/>
                                <h:outputText value="*"/>
                            </p:panelGrid>

                            <!--Auto completar el puesto-->
                            <p:autoComplete id="puestoUser" immediate="true" 
                                                 value="#{usuarioBean.rhPuestoVo.nombre}" 
                                                 completeMethod="#{usuarioBean.puestoListener}">
                                <f:facet name="selectInputText">
                                    <p:panelGrid columns="2" style="margin-bottom: 2px;">
                                        <h:outputText id="autoCompletePuesto" value="#{puesto.nombre}" />
                                    </p:panelGrid>
                                </f:facet>
                            </p:autoComplete> 
                            <p:panelGrid columns="2">
                                <h:outputText value="Clave"/>
                                <h:outputText value="*"/>
                            </p:panelGrid>
                            <p:panelGrid columns="2">
                                <p:inputText value="#{usuarioBean.usuarioVOAlta.clave}" required="true" requiredMessage="Agregue la clave" id="userClave"/>
                                <h:message errorClass="textoMensajeError" infoStyle="textoMensajeError" for="userClave"/>
                            </p:panelGrid>
                            <h:outputText value="Gerencia"/>
                            <p:selectOneMenu value="#{usuarioBean.idGerencia}">
                                <f:selectItem itemLabel="Seleccione . . ." itemValue="-1"/>
                                <f:selectItems value="#{usuarioBean.listaGerencia}"/>
                            </p:selectOneMenu>
                            <h:outputText value="Admin SIA"/>
                            <p:selectBooleanCheckbox value="#{usuarioBean.usuarioVOAlta.adminSIA}"/>
                            <h:outputText value="Admin contratos"/>
                            <p:selectBooleanCheckbox value="#{usuarioBean.usuarioVOAlta.adminContrato}"/>
                            <h:outputText value="Admin SGL"/>
                            <p:selectBooleanCheckbox value="#{usuarioBean.usuarioVOAlta.adminSGL}"/>
                            <h:outputText value="Responsable SGL"/>
                            <p:selectBooleanCheckbox value="#{usuarioBean.usuarioVOAlta.responsableSGL}"/>
                            <h:outputText value="Seguridad"/>
                            <p:selectBooleanCheckbox value="#{usuarioBean.usuarioVOAlta.seguridad}"/>
                            <h:outputText value="#{msgs['usuario.asistenteDireccion']}"/>
                            <p:selectBooleanCheckbox value="#{usuarioBean.usuarioVOAlta.asistenteDireccion}"/>                            
                        </p:panelGrid>
                        <p:panelGrid columns="2" >  
                            <p:panelGrid columns="2">
                                <h:outputText value="Destinatarios"/>
                                <h:outputText value="*"/>
                            </p:panelGrid>
                            <p:panelGrid columns="2">
                                <p:inputText value="#{usuarioBean.usuarioVOAlta.destinatarios}" size="30" required="true" requiredMessage="Es necesario agregar mail destino" id="destinoMail"/>
                                <h:message errorClass="textoMensajeError" infoStyle="textoMensajeError" for="destinoMail"/>                               
                                <h:outputText value="Si hay más de un mail, separarlos por comas." styleClass="textoPequenio"/>
                            </p:panelGrid> 
                            <h:outputText value="Teléfono"/>
                            <p:inputText value="#{usuarioBean.usuarioVOAlta.telefono}" size="20"/>
                            <h:outputText value="Extensión"/>
                            <p:inputText value="#{usuarioBean.usuarioVOAlta.extension}" size="15"/>
                            <h:outputText value="Sexo"/>
                            <p:selectOneRadio value="#{usuarioBean.usuarioVOAlta.sexo}">
                                <f:selectItem itemLabel="Masculino" itemValue="M"/>
                                <f:selectItem itemLabel="Femenino" itemValue="F"/>
                            </p:selectOneRadio>
                            <h:outputText value="Celular"/>
                            <p:inputText value="#{usuarioBean.usuarioVOAlta.celular}"/>
                            <h:outputText value="Fecha nacimiento"/>
                            <p:datePicker value="#{usuarioBean.usuarioVOAlta.fechaNacimiento}">
                                <f:convertDateTime pattern="dd/MM/yyy"/>
                            </p:datePicker>
                            <h:outputText value="RFC"/>
                            <p:inputText value="#{usuarioBean.usuarioVOAlta.rfc}"/>
                            <p:panelGrid columns="2">
                                <h:outputText value="Pregunta secreta"/>
                                <h:outputText value="*"/>
                            </p:panelGrid>
                            <p:panelGrid columns="2">
                                <p:inputTextarea value="#{usuarioBean.usuarioVOAlta.pregunta}" cols="45" rows="1" maxlength="48" required="true" 
                                                   requiredMessage="Agregue la pregunta" id="pgt"/>
                                <h:message errorClass="textoMensajeError" infoStyle="textoMensajeError" for="pgt"/>
                            </p:panelGrid>
                            <p:panelGrid columns="2">
                                <h:outputText value="Respuesta"/>
                                <h:outputText value="*"/>
                            </p:panelGrid>
                            <p:panelGrid columns="2">
                                <p:inputTextarea value="#{usuarioBean.usuarioVOAlta.respuesta}" cols="45" rows="1" maxlength="48" required="true" 
                                                   requiredMessage="Agregue la respuesta" id="res"/>
                                <h:message errorClass="textoMensajeError" infoStyle="textoMensajeError" for="res"/>
                            </p:panelGrid>
                        </p:panelGrid>
                        <p:panelGrid columns="2">   
                            <p:commandButton id="guardar" value="Guardar" 
                                               action="#{usuarioBean.guardarUsuario}" styleClass="btn btn-info"/>
                            <p:commandButton value="Cancelar" immediate="true" action="/vistas/administracion/principalAdministrar" 
                                               action="#{usuarioBean.cancelarUsuario}" 
                                               styleClass="btn btn-default"/>
                        </p:panelGrid>
                        
                    </p:panelGrid>

                </h:form>
            </ui:define>
        </ui:composition>

    </body>
</html>
