<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"

                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/templates/crud.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:sia="http://www.sia.com/componentes">

    <ui:define name="tituloPagina">
        #{msg['sia.inventarios.reportes.entradasalida.modulo']}
    </ui:define>
    <ui:define name="titulo">
        #{msg['sia.inventarios.reportes.entradasalida.titulo']}
    </ui:define>

    <ui:define name="botones">
        <h:messages styleClass="mensajes-ul" infoClass="ui-widget ui-corner-all ui-state-highlight input-msg" errorClass=" ui-widget ui-corner-all ui-state-error input-msg"/>
        <div class="clearfix" style="width: 900px">
            <div class="fleft">
                <button type="button" id="btnBuscar" data-icon="ui-icon-search">#{msg['sia.inventarios.comun.buscar']}</button>
            </div>
            <div class="fright">
                <button type="button" onclick="window.print();" class="hbutton-imp" data-icon="ui-icon-print">#{msg['sia.inventarios.comun.imprimir']}</button>
                <p:commandButton value="Exportar">
                    <p:dataExporter id="dataExporter" 
                                    type="csv" target="tablaDatos" fileName="entradasalidas" encoding="ISO-8859-1" />
                </p:commandButton>
            </div>
        </div>

    </ui:define>

    <ui:define name="filtros">
        <h:panelGrid columns="2" width="500px" id="panelFiltro">
            <h:outputText value="#{msg['sia.inventarios.reportes.rango.fecha']}:"/>
            <h:panelGroup styleClass="rango">
                <h:outputText value="#{msg['sia.inventarios.reportes.rango.fecha.entre']}" class="entre"/>
                <p:datePicker id="dtFechaInicio"
                                   value="#{entradasSalidas.filtro.fechaInicio}"
                                   pattern="dd/MM/yyyy"
                                   validator="#{entradasSalidas.fechaValidador}"
                                   styleClass="campo"/>
                <h:outputText value="#{msg['sia.inventarios.reportes.rango.fecha.y']}" class="separador"/>
                <p:datePicker id="dtFechaFin"
                                   value="#{entradasSalidas.filtro.fechaFin}"
                                   pattern="dd/MM/yyyy"                                   
                                   styleClass="campo"/>
            </h:panelGroup>
            <h:outputText value="#{msg['sia.inventarios.reportes.entradasalida.minimoUnidadesEntrantes']}:"/>
            <h:inputText id="txtFiltroNumeroEntrantes" value="#{entradasSalidas.filtro.numeroEntradas}" label="#{msg['sia.inventarios.reportes.entradasalida.minimoUnidadesEntrantes']}"
                         styleClass="ui-inputfield ui-textentry ui-widget ui-state-optional ui-corner-all" size="10" maxlength="10"/>
            <h:outputText value="#{msg['sia.inventarios.reportes.entradasalida.minimoUnidadesSalientes']}:"/>
            <h:inputText id="txtFiltroNumeroSalientes" value="#{entradasSalidas.filtro.numeroSalidas}" label="#{msg['sia.inventarios.reportes.entradasalida.minimoUnidadesSalientes']}"
                         styleClass="ui-inputfield ui-textentry ui-widget ui-state-optional ui-corner-all" size="10" maxlength="10"/>
        </h:panelGrid>
        <div class="filtro-butones">
            <h:commandLink  value="#{msg['sia.inventarios.comun.buscarTexto']}" action="#{entradasSalidas.cargarListaConFiltros()}" styleClass="hbutton-bu">
                <f:ajax execute="panelFiltro" render="@all"/>
            </h:commandLink>
            <h:commandLink value="#{msg['sia.inventarios.comun.reestablecer']}" immediate="true" action="#{entradasSalidas.reestablecer()}" styleClass="hbutton-re">
                <f:ajax render="@all"/>
            </h:commandLink>
        </div>
    </ui:define>

    <ui:define name="tabla">        
        <p:dataTable id="tablaDatos"
                     value="#{entradasSalidas.lista}"                       
                     var="m"
                     style="width: 900px;">
            <p:column id="id" headerText="#{msg['sia.inventarios.comun.articulo']}" sortBy="#{m.articuloNombre}" style="width: 600px">
                <h:outputText value="#{m.articuloNombre} (#{m.articuloCodigo})"/>
            </p:column>
            <p:column id="codigo" headerText="#{msg['sia.inventarios.reportes.entradasalida.unidadesEntrantes']}" sortBy="#{m.numeroEntradas}" style="width: 150px">
                <h:outputText value="#{m.numeroEntradas}"/>
            </p:column>
            <p:column id="nombre" headerText="#{msg['sia.inventarios.reportes.entradasalida.unidadesSalientes']}" sortBy="#{m.numeroSalidas}" style="width: 150px">
                <h:outputText value="#{m.numeroSalidas}"/>
            </p:column>            
            <p:ajax event="page"/>
        </p:dataTable>    
        <h:outputText value="#{msg['sia.inventarios.reportes.entradasalida.reporteMensaje']}" styleClass="mensajePaginacion reporte"/>
    </ui:define>
</ui:composition>
