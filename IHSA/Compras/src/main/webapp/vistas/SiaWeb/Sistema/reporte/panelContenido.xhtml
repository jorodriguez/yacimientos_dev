<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <body>
        <ui:composition template="./../../templates/template.xhtml">
            <ui:define name="tituloPagina">
                Panel de Contenido Nacional
            </ui:define>
            <ui:define name="contenido">
                <h:form id="frmRepoCn">
                    <div class="input-group col-6">
                        <div class="col-1">
                            <h4>AÃ±o: </h4>
                        </div>
                        <div class="col-4">
                            <p:selectOneMenu value="#{reporteContenidoBean.idAnio}">
                                <f:selectItems value="#{reporteContenidoBean.mapaSeleccion.get('selAnio')}"/>   
                                <p:ajax listener="#{reporteContenidoBean.cambiarAnio}" update="@form"/> 
                            </p:selectOneMenu>
                        </div>
                    </div>
                    <div class="card"></div>
                    <div class="row">
                        <div class="col-4">
                            <div class="card card-primary" data-target="#">
                                <div class="card-header">
                                    <div class="input-group col-12">
                                        <div class="col-8">
                                            <h4> <a data-toggle="collapse" href="#totalocs"  style="color: white;"><b>Total oc/s</b></a></h4>
                                        </div>
                                        <div class="col-4">
                                            <p:selectOneMenu value="#{reporteContenidoBean.idMonOcs}">
                                                <f:selectItems value="#{reporteContenidoBean.mapaSeleccion.get('monOcs')}"/>
                                                <p:ajax listener="#{reporteContenidoBean.buscarTotalOcs}" update="@form"/>
                                            </p:selectOneMenu>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body collapse" id="totalocs">
                                    <ul class="list-group">
                                        <ui:repeat value="#{reporteContenidoBean.mapaTotales.get('ocs')}" var="totOcs">
                                            <li class="list-group-item">
                                                #{totOcs.bloque} : 
                                                <h:outputLabel value="#{totOcs.total}">
                                                    <f:convertNumber type="currency"/>
                                                </h:outputLabel>
                                            </li>
                                        </ui:repeat>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="card card-primary">
                                <div class="card-header">   
                                    <div class="input-group col-12">
                                        <div class="col-8">
                                            <h4> <a data-toggle="collapse" href="#totalfac"  style="color: white;"><b>Total facturado</b></a></h4>
                                        </div>
                                        <div class="col-4">
                                            <p:selectOneMenu value="#{reporteContenidoBean.idMonFac}" >
                                                <f:selectItems value="#{reporteContenidoBean.mapaSeleccion.get('monFac')}"/>
                                                <p:ajax listener="#{reporteContenidoBean.buscarTotalFac}" update="@form"/>
                                            </p:selectOneMenu>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body collapse" id="totalfac">
                                    <ul class="list-group">
                                        <ui:repeat value="#{reporteContenidoBean.mapaTotales.get('factura')}" var="totFac">
                                            <li class="list-group-item">
                                                #{totFac.campo} : 
                                                <h:outputLabel value="#{totFac.monto}"
                                                               style="text-align: right;">
                                                    <f:convertNumber type="currency"/>
                                                </h:outputLabel>                                      
                                            </li>
                                        </ui:repeat>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="card card-primary" data-toggle="collapse" data-target="#totalcn">
                                <div class="card-header"><b>Total Contenido Nacional</b></div>
                                <div class="card-body collapse" id="totalcn">
                                    <ul class="list-group">
                                        <ui:repeat value="#{reporteContenidoBean.mapaTotales.get('cn')}" var="totCN">
                                            <li class="list-group-item">
                                                #{totCN.campo} : 
                                                <h:outputLabel value="#{totCN.monto}"
                                                               style="text-align: right;">
                                                    <f:convertNumber type="currency"/>
                                                </h:outputLabel>
                                            </li>
                                        </ui:repeat>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div id="graficaTotalOcs" class="col-4"></div>
                        <div id="graficaTotalFac" class="col-4"></div>
                        <div id="graficaTotalCn" class="col-4"></div>
                    </div>
                    <div class="card"></div>
                    <div class="row">
                        <div class="col-12">
                            <div class="card card-primary">
                                <div class="card-header">
                                    <div class="input-group col-12">
                                        <div class="col-8">
                                            <h4> <b>Proveedores</b></h4>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div id="graficaProveedoresTop"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--div class="row">
                        <div class="col-12">
                            <div class="card card-primary">
                                <div class="card-header">
                                    <div class="input-group col-12">
                                        <div class="col-8">
                                            <h4> <b>Contenido Nacional</b></h4>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div id="graficaProveedoresTop"/>
                                </div>
                            </div>
                        </div>
                    </div-->
                </h:form>
            </ui:define>
        </ui:composition>
    </body>
</html>
