<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" > 
 
    <!--
        Maneja la excepción  ViewExpiredException y muestra un dialog para volver a realizar el login.    
        debe ir incluida en el template principal y no debe estar configurado el tag <error-page> en web.xml
    -->
    
    <p:ajaxExceptionHandler type="javax.faces.application.ViewExpiredException" 
                                    update="viewExpiredDialog" 
                                    onexception="PF('viewExpiredDialog').show();" />

    <p:dialog id="viewExpiredDialog" header="Session Expirada" 
              widgetVar="viewExpiredDialog" height="250px" 
              onShow="document.location.href = document.location.href;">
        <h:form id="login" >       
            <section class="content">
                <div class="error-page">
                    <h2 class="headline">
                        <img src="/resources/img/againlogin.jpg" style="width: 200px"/> 
                    </h2>
                    <div class="error-content">
                        <h3><i class="fa fa-warning d"></i> 
                            Sesión Expirada 
                        </h3>
                        <hr class="horizontal"/>
                        <p>                        
                            Por favor vuelva a iniciar sesión 
                        </p>      
                        <p> 
                            <p:commandLink actionListener="#{usuarioBean.cerrarSesion}" ajax="false">
                                <i class="fa fa-sign-in-alt text-muted"/>
                                <span>Clic aquí para iniciar sesión. </span>                            
                            </p:commandLink>
                        </p>                    
                    </div>
                </div>
            </section>
        </h:form>
    </p:dialog>            
  
</ui:composition>