<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html">
    <div class="row" >
        <div class="input-group col-4" >
            <div class="col-12" style="text-align: left;" >
                <strong><h:outputLabel styleClass="control-label"   value="Compañia: "/></strong>
            </div>
            <div class="col-12">
                <h:outputText styleClass="control-label"  value="#{ordenBean.ordenActual.compania.nombre}"/>
            </div>

            <div class="col-12" style="text-align: left;" >
                <strong><h:outputLabel styleClass="control-label" value="Estatus:"/></strong>
            </div>
            <div class="col-12">
                <h:outputText styleClass="control-label" value="#{ordenBean.ordenActual.autorizacionesOrden.estatus.nombre}"/>
            </div>
        </div>
        <div class="input-group col-4" >
            <div class="col-12" style="text-align: left;" >
                <strong><h:outputLabel styleClass="control-label"   value="Bloque:"/></strong>
            </div>
            <div class="col-12">
                <h:outputText styleClass="control-label"  value="#{ordenBean.ordenActual.apCampo.nombre}"/>
            </div>

            <div class="col-12" style="text-align: left;" >
                <strong><h:outputLabel styleClass="control-label" value="Destino:"/></strong>
            </div>
            <div class="col-12">                        
                <h:outputText styleClass="control-label" value="#{ordenBean.ordenActual.destino}"/>
            </div>
        </div>
        <div class="input-group col-4 " >
            <div class="col-12" style="text-align: left;" >
                <strong><h:outputLabel styleClass="control-label"   value="Pago:"/></strong>
            </div>
            <div class="col-12">
                <h:outputText styleClass="control-label"  value="#{ordenBean.ordenActual.ocTerminoPago.nombre}"/>
            </div>

            <div class="col-12" style="text-align: left;" >
                <strong><h:outputLabel styleClass="control-label" value="Elaboro:"/></strong>
            </div>
            <div class="col-12">
                <h:outputText styleClass="control-label" value="#{ordenBean.ordenActual.analista.nombre}"/>
            </div>
        </div>
        <div class="input-group col-4" >
            <div class="col-12" style="text-align: left;" >
                <strong><h:outputLabel styleClass="control-label"   value="Solicitó:"/></strong>
            </div>
            <div class="col-12">
                <h:outputText styleClass="control-label"   value="#{ordenBean.ordenActual.gerencia.nombre}"/>
            </div>

            <div class="col-12" style="text-align: left;" >
                <strong><h:outputLabel styleClass="control-label" value="Proveedor:"/></strong>
            </div>
            <div class="col-12">                        
                <h:outputText styleClass="control-label" value="#{ordenBean.ordenActual.proveedor.nombre}"/>
            </div>
        </div>
        <div class="input-group col-4 " >
            <div class="col-12" style="text-align: left;" >
                <strong><h:outputLabel styleClass="control-label"   value="Responsable:"/></strong>
            </div>
            <div class="col-12">
                <h:outputText styleClass="control-label"   value="#{ordenBean.ordenActual.responsableGerencia.nombre}"/>
            </div>

            <div class="col-12" style="text-align: left;" >
                <strong><h:outputLabel styleClass="control-label" value="Contrato Marco:"/></strong>
            </div>
            <div class="col-12">
                <h:panelGroup  rendered="#{ordenBean.ordenActual.contrato ne 'OCS_SIN_CONTRATO'}">
                    <p:commandLink value="#{ordenBean.ordenActual.contrato}" action="#{ordenBean.llenarListaConvenio(ordenBean.ordenActual.contrato)}"
                                   onclick="$(dialogoContratos).modal('show');"
                                   process="@this" update="formContratoOrden">
                    </p:commandLink>
                </h:panelGroup>
                <h:panelGroup rendered="#{ordenBean.ordenActual.contrato eq 'OCS_SIN_CONTRATO'}">
                    <h:outputLabel value="#{ordenBean.ordenActual.contrato}"/>
                </h:panelGroup>
            </div>
        </div>
        <div class="input-group col-4" >
            <div class="col-12" style="text-align: left;" >
                <strong><h:outputLabel styleClass="control-label"   value="OT:"/></strong>
            </div>
            <div class="col-12">
                <ui:fragment rendered="#{ordenBean.ordenActual.multiproyecto eq 'False'}">
                    <h:outputText styleClass="control-label"  value="#{ordenBean.ordenActual.proyectoOt.nombre}"/>
                </ui:fragment>
                <ui:fragment rendered="#{ordenBean.ordenActual.multiproyecto eq 'True'}">
                    <h:outputText styleClass="control-label"  value="Multiproyecto OT"/>
                </ui:fragment>
            </div>

            <div class="col-12" style="text-align: left;" >
                <strong><h:outputLabel styleClass="control-label" value="Revisa:"/></strong>
            </div>
            <div class="col-12">
                <h:outputText styleClass="control-label" value="#{ordenBean.ordenActual.autorizacionesOrden.autorizaMpg.nombre}"/>
            </div>
        </div>
        <div class="input-group col-4" >
            <div class="col-12" style="text-align: left;" >
                <strong><h:outputLabel styleClass="control-label"    value="Destino:"/></strong>
            </div>
            <div class="col-12">
                <h:outputText styleClass="control-label"  value="#{ordenBean.ordenActual.destino}"/>
            </div>                    
            <div class="col-12" style="text-align: left;" >
                <strong><h:outputLabel styleClass="control-label" value="Tipo de orden:"/></strong>
            </div>
            <ui:fragment rendered="#{ordenBean.ordenActual.tipo eq 'PS'}">
                <div class="col-12">
                    <h:outputText styleClass="control-label" value="Producto / Servicio"/>
                </div>
            </ui:fragment>
            <ui:fragment rendered="#{ordenBean.ordenActual.tipo eq 'AF'}">
                <div class="col-12">
                    <h:outputText styleClass="control-label" value="Activo Fijo"/>
                </div>
            </ui:fragment>
            <ui:fragment rendered="#{ordenBean.ordenActual.tipo eq 'AI'}">
                <div class="col-12">
                    <h:outputText styleClass="control-label" value="Antes de integración" />
                </div>
            </ui:fragment>                    
        </div>
        <ui:fragment rendered="#{usuarioBean.usuarioConectado.apCampo.cartaIntencion eq true}">
            <div class="input-group col-4 " >
                <div class="col-12" style="text-align: left;" >
                    <strong><h:outputLabel styleClass="control-label"    value="REPSE:"/></strong>
                </div>
                <div class="col-12">
                    <h:outputText styleClass="control-label"  value="#{(ordenBean.ordenActual.repse eq true) ? 'Si' : 'No'} "/>
                </div>          
            </div>
        </ui:fragment>                
    </div>
    <div class=" input-group card" style="border: white; border-style: solid; border-width: 1px;">
        <div class="input-group " >
            <div class="col-12" style="text-align: left;" >
                <strong><h:outputText styleClass="control-label"    value="Observación de la rsequisición:"/></strong>
            </div>
            <div class="col-9 col-xs-12">
                <h:outputText styleClass="control-label" rendered="#{ordenBean.ordenActual.requisicion.observaciones != null}" value="#{ordenBean.ordenActual.requisicion.observaciones}"/>
                <h:outputText styleClass="control-label" rendered="#{ordenBean.ordenActual.requisicion.observaciones == null}" value=" "/>
            </div>  
        </div>
        <div class="input-group " >
            <div class="col-12" style="text-align: left;" >
                <strong><h:outputText styleClass="control-label"   value="Observaciones al proveedor:"/></strong>
            </div>
            <div class="col-9 col-xs-12">
                <h:outputText styleClass="control-label" rendered="#{ordenBean.ordenActual.nota != null}"  value="#{ordenBean.ordenActual.nota}"/>
                <h:outputText styleClass="control-label" rendered="#{ordenBean.ordenActual.nota == null}"  
                              style="color: #eee;"
                              value="_"/>
            </div>
        </div>                    
        <div class="input-group " >
            <div class="col-12" style="text-align: left;" >
                <strong><h:outputText styleClass="control-label"   value="Comentarios internos:"/></strong>
            </div>
            <div class="col-9 col-xs-12">
                <h:outputText styleClass="control-label" rendered="#{ordenBean.ordenActual.observaciones != null}" value="#{ordenBean.ordenActual.observaciones}"/>
                <h:outputText styleClass="control-label" rendered="#{ordenBean.ordenActual.observaciones == null}" 
                              style="color: #eee;"
                              value="_"/>
            </div>
        </div>
    </div>
    <div class="row">  
        <div class="col-12">
            <ui:include src="../../Orden/fragmento/itemsOrden.xhtml"/>
            <div class="row">
                <div class="col-9"></div>
                <div class="col-3">
                    <div class="row">
                        <div class="col-4 text text-right " >
                            <strong><h:outputLabel styleClass="control-label" value="SubTotal:"/></strong>
                        </div>
                        <div class="col-8 text text-left" >
                            <h:outputLabel value="#{ordenBean.ordenActual.subtotal}">
                                <f:convertNumber currencySymbol="$" groupingUsed="true" maxFractionDigits="2" type="currency"/>
                            </h:outputLabel>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-4 text text-right" >
                            <strong><h:outputLabel styleClass="control-label" value="IVA:"/></strong>
                        </div>
                        <div class="col-8 text text-left" >
                            <h:outputLabel value="#{ordenBean.ordenActual.iva}">
                                <f:convertNumber currencySymbol="$" groupingUsed="true" maxFractionDigits="2" type="currency"/>
                            </h:outputLabel>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-4 text text-right" >
                            <strong><h:outputLabel styleClass="control-label" value="Descuento:"/></strong>
                        </div>
                        <div class="col-8 text text-left" >
                            <h:outputLabel value="#{ordenBean.ordenActual.descuento}">
                                <f:convertNumber currencySymbol="$" groupingUsed="true" maxFractionDigits="2" type="currency"/>
                            </h:outputLabel>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-4 text text-right " >
                            <strong><h:outputLabel styleClass="control-label" value="Total:"/></strong>
                        </div>
                        <div class="col-8 text text-left" >
                            <h:outputLabel value="#{ordenBean.ordenActual.total}">
                                <f:convertNumber currencySymbol="$" groupingUsed="true" maxFractionDigits="2" type="currency"/>
                            </h:outputLabel>
                        </div> 
                    </div>
                    <div class="row">
                        <div class="col-4 text text-right" >
                            <strong><h:outputLabel styleClass="control-label" value="Móneda:"/></strong>
                        </div>
                        <div class="col-4 col-8 text text-left" >
                            <h:outputLabel value="#{ordenBean.ordenActual.moneda.siglas}"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>   
    <div class="row">  
        <p:dataTable size="small" stripedRows="true" showGridlines="true"  value="#{ordenBean.listaItems}" 
                     var="data" styleClass="table table-striped" style="margin-bottom: 5px;">
            <f:facet name="header"><h:outputText value="Decripción adicional por partida: #{ordenBean.ordenActual.consecutivo}"/></f:facet>
            <p:column width="20%" headerText="Partida">
                #{data.artNumeroParte}
            </p:column>
            <p:column headerText="Descripción">
                <h:outputText value="#{data.observaciones}"/>

            </p:column>
        </p:dataTable>                
    </div>   
</ui:composition>