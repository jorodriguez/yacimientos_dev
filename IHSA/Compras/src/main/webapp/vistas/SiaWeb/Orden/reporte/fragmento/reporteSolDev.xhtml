<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html">
    <p:panel id="pnlEst" >
        <h:outputText value="#{msgs['sistema.fecha.inicio']}"/>      
        <p:datePicker value="#{reporteBean.inicio}" pattern="dd/MM/yyyy"/>
        <h:message errorClass="errorMessage" fatalClass="fatalMessage" for="inicio" infoClass="infoMessage"
                   style="color: rgb(204, 0, 0);width: 214px" warnClass="warnMessage"/>
        <h:outputText value="#{msgs['sistema.fecha.fin']}" />
        <p:datePicker value="#{reporteBean.fin}" pattern="dd/MM/yyyy"/>
        <h:message errorClass="errorMessage" fatalClass="fatalMessage" for="fin" infoClass="infoMessage"
                   style="color: rgb(204, 0, 0);width: 214px" warnClass="warnMessage"/>
        <p:commandLink value="#{msgs['sistema.buscar']}" action="#{reporteBean.traerOCSSolDev}" 
                       styleClass="btn btn-sm btn-primary" process="@this frmRep:tbReportes:pnlEst"
                       update="frmRep:tbReportes:pnlResEst"/>
        <br/>
        <h:inputHidden id="hidenIndTab" value="#{reporteBean.indiceTab}"/>
        <h:inputHidden id="hidenComprador" value="#{reporteBean.nombreUsuario}"/>
        <p:commandLink id="btnPorComprador" value="Buscar" 
                       action="#{reporteBean.traerOCSComprador}" process="@this frmRep:tbReportes:pnlEst"
                       style="display: none;" update="frmRep:tbReportes:pnlResEst"/>
    </p:panel>
    <!--Grafica-->                    
    <div id="graficaSolDevCan" style="min-width: 500px; height: 400px; margin: 0 auto;" ></div>
    <p:panel id="pnlResEst">             
        <c:if test="#{reporteBean.indiceTab eq 1}">
            <h:outputLabel value="OC/S Solicitadas" />
            <ui:include src="../../../Orden/reporte/fragmento/tabla/columnaOCSSolicitada.xhtml"/>
        </c:if>
        <c:if test="#{reporteBean.indiceTab eq 2}">
            <h:outputLabel value="OC/S Devueltas" />
            <p:dataTable size="small" stripedRows="true" showGridlines="true" id="dtDevueltas" value="#{reporteBean.lista}" var="data"
                         rows="20" styleClass="dataPaginatorDataTable" 
                         paginator="true"  
                         paginatorPosition="bottom" 
                         style="font-size: 1em;" >
                <f:facet name="header"><h:outputLabel value="#{reporteBean.nombreUsuario}"/></f:facet>
                <ui:include src="../../../Orden/reporte/fragmento/tabla/tablaOCSMovimiento.xhtml"/>
            </p:dataTable>

            <p:commandButton value="Exportar" styleClass="p-mr-2 p-mb-2"> 
                <p:dataExporter fileName="dtOCSDevueltas" type="xls" target="dtDevueltas" />
            </p:commandButton>
        </c:if>
        <c:if test="#{reporteBean.indiceTab eq 1}">
            <h:outputLabel value="OC/S Canceladas" />
            <p:dataTable size="small" stripedRows="true" showGridlines="true" id="dtOCSCancelada" value="#{reporteBean.lista}" var="data"
                         rows="20" styleClass="dataPaginatorDataTable" 
                         paginator="true"  
                         paginatorPosition="bottom" 
                         style="font-size: 1em;" >
                <f:facet name="header"><h:outputLabel value="#{reporteBean.nombreUsuario}"/></f:facet>
                <ui:include src="../../../Orden/reporte/fragmento/tabla/tablaOCSMovimiento.xhtml"/>
            </p:dataTable>
            <p:commandButton value="Exportar" styleClass="p-mr-2 p-mb-2" process="@this frmRep:tbReportes:dtOCSCancelada"> 
                <p:dataExporter fileName="OCSCancelada" type="xls" target="dtOCSDevueltas" />
            </p:commandButton>

        </c:if>
    </p:panel>
</ui:composition>