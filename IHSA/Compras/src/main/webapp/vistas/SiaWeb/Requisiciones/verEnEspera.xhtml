<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html">
    <div class="row">        
        <div class="col-12 col-xs-12">            
            <div class="input-group border mt-2" >
                <div class="form-group col-12">
                    <h:outputLabel class="col-2 control-label" value="Usuario puso en espera:" /> 
                    <div class="col-4">
                        <h:outputText  value="#{requisicionBean.esperaVO.registro.usuario}"/>
                    </div>

                    <h:outputLabel class="col-1 control-label" value="Fecha:" /> 
                    <div class="col-2">
                        <h:outputText  value="#{requisicionBean.esperaVO.registro.fecha}">
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </h:outputText>
                    </div>

                    <h:outputLabel class="col-1 control-label" value="Hora:"/>
                    <div class="col-2">
                        <h:outputText  value="#{requisicionBean.esperaVO.registro.hora}">
                            <f:convertDateTime pattern="hh:mm aa"/>
                        </h:outputText>
                    </div>
                </div>
                <div class="form-group col-12">
                    <h:outputLabel class="col-2 control-label" value="Motivo:" />
                    <div class="col-10"><h:outputText  value="#{requisicionBean.esperaVO.registro.motivo}" /></div>
                </div>
            </div>
        </div>


        <div class="col-12 col-xs-12">            
            <p:dataTable size="small" stripedRows="true" showGridlines="true"  value="#{requisicionBean.esperaVO.msgs}" var="currentRow"   styleClass="table table-striped">
                <f:facet name="header">
                    <h:outputLabel value="Mensajes"/>
                </f:facet>
                <p:column>
                    <h:outputText value="#{currentRow.usuario}"/>
                    <f:facet name="header">
                        <h:outputText value="Usuario"/>
                    </f:facet>
                </p:column>
                <p:column>
                    <h:outputText value="#{currentRow.fecha}">
                        <f:convertDateTime dateStyle="default" type="date"/>
                    </h:outputText>
                    <f:facet name="header">
                        <h:outputText value="Fecha"/>
                    </f:facet>
                </p:column>
                <p:column>
                    <h:outputText value="#{currentRow.hora}">
                        <f:convertDateTime pattern="hh:mm aa" timeStyle="default" type="time"/>
                    </h:outputText>
                    <f:facet name="header">
                        <h:outputText value="Hora"/>
                    </f:facet>
                </p:column>
                <p:column>
                    <h:outputText value="#{currentRow.motivo}"/>
                    <f:facet name="header">
                        <h:outputText value="Motivo"/>
                    </f:facet>
                </p:column>
            </p:dataTable>
        </div>

        <div class="col-12 col-xs-12">
            <p:dataTable size="small" stripedRows="true" showGridlines="true"  value="#{cargaEtsBean.etsPorRequisicionEspera}" var="ets" styleClass="table table-striped">
                <f:facet name="header">
                    <h:outputLabel value="Archivos"/>
                </f:facet>
                <p:column>

                    <f:facet name="header">
                        <h:outputLabel value="Nombre"/>
                    </f:facet>
                    <h:outputText value="#{ets['siAdjunto'].nombreSinUUID}"/>
                </p:column>

                <p:column>
                    <f:facet name="header">
                        <h:outputLabel value="Tamaño"/>
                    </f:facet>
                    <h:outputText  value="#{ets['siAdjunto'].peso}"/>
                </p:column>
                <p:column>
                    <f:facet name="header">
                        <h:outputLabel value="Tipo de contenido"/>
                    </f:facet>
                    <h:outputText value="#{ets['siAdjunto'].tipoArchivo}"/>
                </p:column>
                <p:column>
                    <f:facet name="header">
                        <h:outputLabel value="Fecha"/>
                    </f:facet>
                    <h:outputText value="#{ets['siAdjunto'].fechaGenero}">
                        <f:convertDateTime dateStyle="default" type="date"/>
                    </h:outputText>
                </p:column>                                        
                <p:column>
                    <h:outputLink target="_blank"  value="/Compras/AbrirArchivo?ZWZ2W=#{ets['siAdjunto'].id}&amp;ZWZ3W=#{ets['siAdjunto'].uuid}">
                        <h:outputText value=" Abrir"/>
                    </h:outputLink>
                </p:column>
                <p:column>
                    <p:commandLink value="Eliminar"  styleClass="btn btn-default"
                                   action="#{cargaEtsBean.eliminarEsperaEts(ets.wrappedData)}">
                        <p:confirm header="Confirmar" message="¿Está seguro de eliminar el archivo...? "/>
                    </p:commandLink>
                </p:column>
            </p:dataTable>
        </div>        

    </div>
</ui:composition>

