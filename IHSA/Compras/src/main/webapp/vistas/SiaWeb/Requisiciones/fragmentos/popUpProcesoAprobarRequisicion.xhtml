<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                >  
    <div class="modal fade" id="dialogoCancelarReq" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Cancelar requisición</h4>
                </div>

                <h:form id="frmCanReq">
                    <div class="modal-body">
                        <div class="row">
                            <div class="input-group" >
                                <div class="form-group col-12" >
                                    <h:outputText class="col-2 control-label" value="Gerencia:" /> 
                                    <div class="col-10">
                                        <h:outputText class="form-control" value="#{requisicionBean.requisicionActual.gerencia.nombre}"/>
                                    </div>
                                </div>
                                <div class="form-group col-12" >
                                    <h:outputText class="col-2 control-label" value="ProyectoOT:"/>
                                    <div class="col-10">
                                        <h:outputText class="form-control" value="#{requisicionBean.requisicionActual.proyectoOt.nombre}"/>
                                    </div>
                                </div>
                                <div class="form-group col-12">
                                    <h:outputText class="col-2 control-label" value="Fecha Solicita" />
                                    <div class="col-10"><h:outputText class="form-control" value="#{requisicionBean.requisicionActual.fechaSolicito}" >
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <h:outputText class="col-2 control-label" value="Introduzca el motivo:*"/>
                                <div class="col-10">
                                    <h:inputTextarea styleClass="form-control" id="motivoCancelo"  
                                                     value="#{requisicionBean.motivo}" 
                                                     required="true" requiredMessage="Agregar el motivo"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <p:commandButton id="buttonAceptar"
                                         value="Aceptar"
                                         styleClass="btn btn-info"
                                         action="#{requisicionBean.cancelarRequisicion}"
                                         process="@form"
                                         update="form1"/>
                        <p:commandLink id="buttonCancelar"
                                       value="Cancelar"
                                       styleClass="btn btn-cancelar"
                                       onclick="cerrarDialogoModal(dialogoCancelarReq);"
                                       title="Cerrar ventana sin cancelar la requisición..." 
                                       immediate="true"/>
                    </div>
                </h:form>
            </div>
        </div>
    </div>
    <!-- Modal Panel Popup Rechazo -->
    <div class="modal fade" id="dialogoDevReq" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Devolver requisición</h4>
                </div>

                <h:form id="frmDev">
                    <div class="modal-body">
                        <div class="row">
                            <div class="form-group col-12 col-xs-12" >
                                <strong><h:outputText styleClass="col-5 control-label" value="Gerencia:" /> </strong>
                                <div class="col-12">
                                    <h:outputText styleClass="control-label" value="#{requisicionBean.requisicionActual.gerencia.nombre}"/>
                                </div>
                            </div>                                    
                            <div class="form-group col-12 col-xs-12" >
                                <strong><h:outputText styleClass="col-5 control-label" value="Fecha Solicita:" /></strong>
                                <div class="col-7"><h:outputText styleClass="control-label" value="#{requisicionBean.requisicionActual.fechaSolicito}" >
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </div>
                            </div>
                            <div class="form-group">
                                <strong><h:outputText class="col-2 control-label" value="Introduzca el motivo:"/></strong>
                                <div class="col-12">
                                    <h:inputTextarea styleClass="form-control" id="motivoCancelo"  value="#{requisicionBean.motivo}" 
                                                     required="true" requiredMessage="Agregar el motivo"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <p:commandButton value="Aceptar"
                                         styleClass="btn btn-info"
                                         action="#{requisicionBean.rechazarRequisicion}"
                                         process="@form"
                                         update="form1"/>
                        <p:commandLink value="Cancelar"
                                       styleClass="btn btn-default"
                                       onclick="cerrarDialogoModal(dialogoDevReq);"
                                       title="Cerrar ventana..." 
                                       immediate="true"/>
                    </div>
                </h:form>
            </div>
        </div>
    </div>
    <!--NOTAS-->
    <!-- Modal Panel Popup Rechazo -->
    <div class="modal fade" id="dialogoNotaReq" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Crear nota</h4>
                </div>

                <h:form id="frmNotaReq">
                    <div class="modal-body">
                        <div class="row">
                            <div class="input-group " >
                                <div class="form-group col-12" >
                                    <strong><h:outputText class="col-2 control-label" value="Gerencia:" /></strong>
                                    <div class="col-10">
                                        <h:outputText class="control-label" value="#{requisicionBean.requisicionActual.gerencia.nombre }"/>
                                    </div>
                                </div>
                                <div class="form-group col-12" >
                                    <strong><h:outputText class="col-2 control-label" value="ProyectoOT:"/></strong>
                                    <div class="col-10">
                                        <h:outputText class="control-label" value="#{requisicionBean.requisicionActual.proyectoOt.nombre}"/>
                                    </div>
                                </div>
                                <div class="form-group col-12">
                                    <strong><h:outputText class="col-2 control-label" value="Fecha Solicita:" /></strong>
                                    <div class="col-10"><h:outputText class="control-label" value="#{requisicionBean.requisicionActual.fechaSolicito}" >
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group ">
                            <strong><h:outputText class="col-2 control-label" value="Nota:*"/></strong>
                            <div class="col-12">
                                <h:inputTextarea styleClass="form-control" id="nota"  value="#{notaRequisicionBean.textoNoticia}" 
                                                 required="true" requiredMessage="Agregar la nota"/>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <p:commandButton action="#{requisicionBean.completarCreacionNota}" 
                                         styleClass="btn btn-info" value="Aceptar"
                                         process="@form" update="form1:tbRequi"/>
                        <p:commandLink onclick="cerrarDialogoModal(dialogoNotaReq);"
                                       styleClass="btn btn-default" title="Cerrar ventana..." value="Cancelar"
                                       immediate="true"/>
                    </div>
                </h:form>
            </div>
        </div>
    </div>

    <!-- Autorizar ITEMS REQUISICION  -->
    <div class="modal fade" id="AutorizaCantidadItemsRequi" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog" style="width: 80%;">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">#{requisicionBean.operacionItem} Ítem</h4>
                </div>
                <h:form id="frmAutCantidad">
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-12">
                                <div class="input-group panel " >

                                    <div class="form-group col-12" >
                                        <strong><h:outputText class="col-2 control-label" value="Núm. de parte:" /></strong>
                                        <div class="col-10">
                                            <h:inputText disabled="true" size="50" class="form-control" 
                                                         value="#{requisicionBean.itemActual.invArticulo != null ? requisicionBean.itemActual.invArticulo.codigo : requisicionBean.itemActual.numeroParte}"/>
                                        </div>
                                    </div>
                                    <ui:fragment rendered="#{requisicionBean.requisicionActual.tipo eq 'PS'}">
                                        <div class="form-group col-12" >
                                            <strong><h:outputText class="col-2 control-label" value="Tarea:" /> </strong>
                                            <div class="col-10">                                                                                            
                                                <h:inputText disabled="true" size="50" class="form-control" value="#{requisicionBean.itemActual.ocTarea.ocNombreTarea.nombre}"/>
                                            </div>
                                        </div>
                                    </ui:fragment>

                                    <div class="form-group col-12" >
                                        <strong><h:outputText class="col-2 control-label" value="Unidad:" /></strong>
                                        <div class="col-10">
                                            <h:inputText disabled="true" size="50" class="form-control" value="#{requisicionBean.itemActual.invArticulo != null ? requisicionBean.itemActual.invArticulo.unidad.nombre : requisicionBean.itemActual.siUnidad.nombre}"/>
                                        </div>
                                    </div>

                                    <div class="form-group col-12" >
                                        <strong><h:outputText class="col-2 control-label" value="Descripción: " /></strong>
                                        <div class="col-10">
                                            <h:inputTextarea disabled="true" style="width: 100%;" class="form-control" value='#{requisicionBean.descItem}'/>
                                        </div>
                                    </div>

                                    <div class="form-group col-12" >
                                        <strong><h:outputText class="col-2 control-label" value="Cantidad Solicitada:" /></strong>
                                        <div class="col-10">
                                            <h:inputText disabled="true" class="form-control" value="#{requisicionBean.itemActual.cantidadSolicitada}"/>
                                        </div>
                                    </div>

                                    <div class="form-group col-12" >
                                        <strong><h:outputText class="col-2 control-label" value="Cantidad Solicitada:" /></strong>
                                        <div class="col-10">
                                            <h:inputText disabled="true" class="form-control" value="#{requisicionBean.itemActual.cantidadSolicitada}"/>
                                        </div>
                                    </div>

                                    <div class="form-group col-12" >
                                        <strong><h:outputText class="col-2 control-label" value="Cantidad Autorizada:"/></strong>
                                        <div class="col-10">
                                            <h:inputText class="form-control" value="#{requisicionBean.itemActual.cantidadAutorizada}"/>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group panel">
                                <strong><h:outputText class="col-2 control-label" value="Observaciones:"/></strong>
                                <div class="col-12">
                                    <h:inputTextarea styleClass="form-control" rows="3" value="#{requisicionBean.itemActual.observaciones}" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <p:commandButton value="#{requisicionBean.operacionItem}" id="buttonAceptar2" 
                                         styleClass="btn btn-info"
                                         action="#{requisicionBean.completarActualizacionItem}"
                                         process="@form" update="form1:tbRequi"/>
                        <p:commandLink value="Cancelar" id="buttonCancelar2" 
                                       styleClass="btn btn-default"
                                       onclick="cerrarDialogoModal(AutorizaCantidadItemsRequi);"
                                       title="Cerrar ventana..." 
                                       immediate="true"/>                                    
                    </div>
                </h:form>
            </div>
        </div>
    </div>

    <div class="modal fade" id="dialogoCancelarVariasReq" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Cancelar requisición</h4>
                </div>

                <h:form id="frmCanReqV">
                    <div class="modal-body panel panel-footer">
                        <div class="row">
                            <div class="col-12">
                                <div class="modal-body">
                                    <h:outputText style="text-align: center; color: red; font-weight: bold" 
                                                  value="Se cancelarán todas las Requisiciones con el mismo motivo"/>
                                </div>                                
                            </div>
                        </div>
                        <div class="container-fluid">
                            <div class="form-group panel">
                                <h:outputText styleClass="col-2 control-label" style="padding-top: 5%;" value="Motivo:*"/>
                                <div class="col-10">
                                    <h:inputTextarea styleClass="form-control" id="motivoCancelo" rows="3" value="#{requisicionBean.motivo}"
                                                     required="true" requiredMessage="Agregar el motivo"/> 
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <p:commandButton id="buttonAceptar"
                                         value="Aceptar"
                                         styleClass="btn btn-info"
                                         action="#{requisicionBean.cancelarVariasRequisicion}"
                                         process="@form" update="form1:tbRequi"/>

                        <p:commandLink id="buttonCancelar"
                                       value="Cancelar"
                                       styleClass="btn btn-cancelar"
                                       onclick="cerrarDialogoModal(dialogoCancelarVariasReq);"
                                       title="Cerrar ventana sin cancelar la requisición..." 
                                       immediate="true"/>
                    </div>
                </h:form>
            </div>
        </div>
    </div>


    <!-- Modal Panel Popup Rechazo -->
    <div class="modal fade" id="dialogoDevVariasReq" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Devolver requisición(es)</h4>
                </div>

                <h:form id="frmDevV">
                    <div class="modal-body panel panel-footer">
                        <div class="row">
                            <div class="col-12">
                                <div class="modal-body">
                                    <h:outputText style="text-align: center; color: red; font-weight: bold" 
                                                  value="Se devolverán todas las Requisiciones con el mismo motivo"/>
                                </div>                                
                            </div>
                        </div>
                        <div class="container-fluid">
                            <div class="form-group panel">
                                <h:outputText styleClass="col-2 control-label" style="padding-top: 5%;" value="Motivo:*"/>
                                <div class="col-10">
                                    <h:inputTextarea styleClass="form-control" id="motivoRechazo" rows="3" value="#{requisicionBean.motivo}"
                                                     required="true" requiredMessage="Agregar el motivo."/> 
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <p:commandButton value="Aceptar"
                                         styleClass="btn btn-info"
                                         action="#{requisicionBean.devolverVariasRequisicion}"
                                         process="@form" update="form1:tbRequi"/>
                        <p:commandLink value="Cancelar"
                                       styleClass="btn btn-default"
                                       onclick="cerrarDialogoModal(dialogoDevVariasReq);"
                                       title="Cerrar ventana..." 
                                       immediate="true"/>
                    </div>
                </h:form>
            </div>
        </div>
    </div>


    <!--Nueva Requi desde otra -->
    <!-- Modal Panel Popup Rechazo -->
    <div class="modal fade" id="dialogoMostrarInventario" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog" style="width: 60%;">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Inventario</h4>
                </div>
                <h:form id="frmInv">
                    <div class="modal-body">
                        <p:dataTable size="small" stripedRows="true" showGridlines="true" value="#{requisicionBean.inventario}" var="dataInv" 
                                     >
                            <p:column headerText="Almacen">
                                #{dataInv.almacenNombre}
                            </p:column>
                            <p:column headerText="Mínimo">
                                #{dataInv.minimoUnidades}
                            </p:column>
                            <p:column headerText="Máximo">
                                #{dataInv.maximoDeInventario}
                            </p:column>
                            <p:column headerText="Disponible">
                                #{dataInv.numeroUnidades}
                            </p:column>
                            <p:column headerText="Nota">
                                #{dataInv.notasInventario}
                            </p:column>
                        </p:dataTable>
                    </div>
                    <div class="modal-footer">
                        <p:commandButton value="Cerrar"
                                         styleClass="btn btn-default"
                                         onclick="cerrarDialogoModal(dialogoMostrarInventario);"
                                         title="Cerrar ventana..." 
                                         immediate="true"/>
                    </div>
                </h:form>
            </div>
        </div>
    </div>
</ui:composition>