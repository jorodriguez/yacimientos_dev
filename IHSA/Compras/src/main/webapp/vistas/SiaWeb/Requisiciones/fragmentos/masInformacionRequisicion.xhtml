<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html">
    <div class="col-12 mt-2" > 
        <div class="row" >Más información</div>
        <div class="card" >
            <div class="row" >
                <div class="col-4">
                    <div class="form-group">
                        <strong><h:outputText styleClass="col-12 control-label" value="Gerencia:" /></strong> 
                        <div class="col-12">
                            <h:outputText styleClass="control-label" value="#{requisicionBean.requisicionActual.gerencia.nombre}"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <strong><h:outputText styleClass="col-12 control-label" value="Referencia:"/></strong>
                        <div class="col-12">
                            <h:outputText styleClass="control-label" value="#{requisicionBean.requisicionActual.referencia}"/>
                        </div>
                    </div>
                    <div class="form-group" >                
                        <strong><h:outputText styleClass="col-12 control-label" value="Fecha Solicita" /></strong>
                        <div class="col-12"><h:outputText styleClass="control-label" value="#{requisicionBean.requisicionActual.fechaSolicito}" >
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </div>
                    </div>
                </div>
                <div class="col-4">
                    <div class="form-group">
                        <strong><h:outputText styleClass="col-12 control-label" value="Lugar entrega:"/></strong>
                        <div class="col-12">
                            <h:outputText styleClass="control-label" value="#{requisicionBean.requisicionActual.lugarEntrega}"/>
                        </div>
                    </div>
                    <div class="form-group col-12" >            
                        <strong><h:outputText styleClass="col-12 control-label" value="Tipo requisicion:"/></strong>
                        <div class="col-12">
                            <h:outputText styleClass="control-label" value="#{requisicionBean.requisicionActual.tipo eq 'AF' ? 'Activo Fijo' : 'Producto/Servicio'}" />
                        </div>
                    </div>
                    <div class="form-group">
                        <strong><h:outputText styleClass="col-12 control-label" value="Proveedor:"/></strong>
                        <div class="col-12">
                            <h:outputText styleClass="control-label" value="#{requisicionBean.requisicionActual.proveedor}"/>
                        </div>
                    </div>
                </div>
                <div class="col-4">
                    <div class="form-group" >
                        <strong><h:outputText styleClass="col-12 control-label" value="USO CFDI:"/></strong>
                        <div class="col-12">
                            <h:outputText styleClass="control-label" value="#{requisicionBean.requisicionActual.ocUsoCFDI.codigo} - #{requisicionBean.requisicionActual.ocUsoCFDI.nombre}"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <strong><h:outputText styleClass="col-12 control-label" value="Contrato:"/></strong>
                        <div class="col-12">
                            <h:outputText styleClass="control-label" value="#{requisicionBean.requisicionActual.contrato ? 'CON CONTRATO' : 'SIN CONTRATO'}"/>
                        </div>
                    </div>                
                    <div class="form-group" >
                        <div class="col-6 col-xs-12"></div>
                        <strong><h:outputText styleClass="col-12 control-label" value="Solicita:"/></strong>
                        <div class="col-12">
                            <h:outputText styleClass="control-label" value="#{requisicionBean.requisicionActual.solicita.nombre}"/>
                        </div>
                    </div>
                </div>        
            </div>
        </div>
        <div class="input-group card" >
            <div class="form-group col-12" >
                <strong><h:outputText styleClass="col-12 control-label" value="Observación:" /></strong> 
                <div class="col-10 col-xs-12">
                    <h:outputText styleClass="control-label" value="#{requisicionBean.requisicionActual.observaciones}"/>
                </div>
            </div>
        </div>

        <div class="col-12 mt-2">
            <div class="col-12" >
                <h:outputText styleClass="col-3 col-xs-6" value="Items de la requisición: "/><strong><h:outputText styleClass="col-3 col-xs-6" value="#{requisicionBean.requisicionActual.consecutivo}"/></strong>
            </div>

            <div class="input-group" >
                <ui:repeat rendered="#{requisicionBean.itemsProcesoAprobar.rowCount gt 0}" value="#{requisicionBean.itemsProcesoAprobar}" var="currentRow">
                    <div class="col-11" style="margin-bottom: 15px; border-bottom-color: black">
                        <ui:fragment rendered="#{currentRow['idpresupuesto']  gt 0}">
                            <div class="input-group">
                                <div class="col-3">
                                    <div class="col-12">
                                        <strong><h:outputText styleClass="control-label" value="Presupuesto"/></strong>
                                    </div>                                    
                                    <div class="col-12">                                        
                                        <h:outputText styleClass="control-label" title="#{currentRow['presupuestoCodigo'] eq 'null' ? '' : currentRow['presupuestoCodigo']}" value="#{currentRow['presupuestoNombre'] eq 'null' ? '' : currentRow['presupuestoNombre']}"/>                                        
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="col-12">                                                                                
                                        <strong><h:outputText styleClass="control-label" value="Presup Año y Mes"/></strong>                                        
                                    </div>
                                    <div class="col-12">                                                                                                                            
                                        <h:outputText styleClass="control-label" value="Año #{currentRow['anioPresupuesto']} y" title="#{currentRow['anioPresupuesto']}"/>
                                        <h:outputText styleClass="control-label" value="  Mes #{currentRow['mesPresupuesto']}" title="#{currentRow['mesPresupuesto']}"/>                                
                                    </div>
                                </div>

                                <div class="col-3">
                                    <div class="col-12">
                                        <strong><h:outputText styleClass="control-label" value="Actividad"/></strong>
                                    </div>
                                    <div class="col-12">                                            
                                        <h:outputText styleClass="control-label" value="#{currentRow['nombreActPedrolera']}" title="#{currentRow['codigoActPedrolera']}"/>                                            
                                    </div>
                                </div>

                                <div class="col-3">
                                    <div class="col-12">
                                        <strong><h:outputText styleClass="control-label" value="Proyecto OT"/></strong>
                                    </div>                                    
                                    <div class="col-12">
                                        <ui:fragment rendered="#{requisicionBean.requisicionActual.multiproyecto  eq 'False'}">
                                            <h:outputText styleClass="control-label" title="#{currentRow['proyectoOtCC'] eq 'null' ? '' : currentRow['proyectoOtCC']}" value="#{currentRow['proyectoOt'] eq 'null' ? '' : currentRow['proyectoOt']}"/>
                                        </ui:fragment>
                                        <ui:fragment rendered="#{requisicionBean.requisicionActual.multiproyecto  eq 'True'}">
                                            <h:outputText styleClass="control-label" title="#{currentRow['multiProyectos']}" value="#{currentRow['multiProyectos'].length() gt 90 ? currentRow['multiProyectos'].substring(0, 85).concat('.....') : currentRow['multiProyectos']}"/>
                                        </ui:fragment>
                                    </div>
                                </div>
                            </div>
                        </ui:fragment>
                        <div class="input-group">
                            <ui:fragment rendered="#{currentRow['idpresupuesto']  lt 1}">
                                <div class="col-3">
                                    <div class="col-12">
                                        <strong><h:outputText styleClass="control-label" value="Proyecto OT"/></strong>
                                    </div>                                    
                                    <div class="col-12">
                                        <ui:fragment rendered="#{requisicionBean.requisicionActual.multiproyecto  eq 'False'}">
                                            <h:outputText styleClass="control-label" title="#{currentRow['proyectoOtCC'] eq 'null' ? '' : currentRow['proyectoOtCC']}" value="#{currentRow['proyectoOt'] eq 'null' ? '' : currentRow['proyectoOt']}"/>
                                        </ui:fragment>
                                        <ui:fragment rendered="#{requisicionBean.requisicionActual.multiproyecto  eq 'True'}">
                                            <h:outputText styleClass="control-label" title="#{currentRow['multiProyectos']}" value="#{currentRow['multiProyectos'].length() gt 90 ? currentRow['multiProyectos'].substring(0, 85).concat('.....') : currentRow['multiProyectos']}"/>
                                        </ui:fragment>
                                    </div>
                                </div>
                            </ui:fragment>
                            <div class="col-3">
                                <div class="col-12">
                                    <ui:fragment rendered="#{requisicionBean.requisicionActual.apCampo.tipo eq 'N'}">
                                        <strong><h:outputText styleClass="control-label" value="Tipo de Tarea"/></strong>
                                    </ui:fragment>
                                    <ui:fragment rendered="#{requisicionBean.requisicionActual.apCampo.tipo eq 'C'}">
                                        <strong><h:outputText styleClass="control-label" value="Subactividad"/></strong>
                                    </ui:fragment>                                            
                                </div>
                                <div class="col-12">
                                    <ui:fragment rendered="#{requisicionBean.requisicionActual.tipo  eq 'PS' or requisicionBean.requisicionActual.apCampo.tipo eq 'C'}">
                                        <h:outputText styleClass="control-label" value="#{currentRow['tipoTarea']}"/>
                                    </ui:fragment>
                                    <ui:fragment rendered="#{requisicionBean.requisicionActual.apCampo.tipo eq 'N' and requisicionBean.requisicionActual.tipo  eq 'AF'}">
                                        <h:outputText styleClass="control-label" value="Activo Fijo"/>
                                    </ui:fragment>
                                </div>
                            </div>
                            <ui:fragment rendered="#{requisicionBean.requisicionActual.tipo  eq 'PS' or requisicionBean.requisicionActual.apCampo.tipo  eq 'C'}">
                                <div class="col-3">
                                    <div class="col-12">
                                        <strong><h:outputText styleClass="control-label" value="Tarea"/></strong>
                                    </div>
                                    <div class="col-12">
                                        <h:outputText styleClass="control-label" title="#{currentRow['codeTarea']}" value="#{currentRow['nombreTarea']}"/>                        
                                    </div>
                                </div>
                            </ui:fragment>                
                            <ui:fragment rendered="#{requisicionBean.requisicionActual.apCampo.tipo  eq 'C'}">
                                <div class="col-3">
                                    <div class="col-12">
                                        <strong><h:outputText styleClass="control-label" value="Subtarea"/></strong>
                                    </div>
                                    <div class="col-12">                                            
                                        <h:outputText styleClass="control-label" title="#{currentRow['codigoSubTarea']}" value="#{currentRow['subTarea']}"/>                                                                    
                                    </div>
                                </div>
                            </ui:fragment>
                        </div>
                        <div class="row">
                            <div class="col-3">
                                <div class="col-12">
                                    <strong><h:outputText styleClass="control-label" value="Número parte"/></strong>
                                </div>
                                <div class="col-12">
                                    <h:outputText styleClass="control-label" value="#{currentRow['artNumeroParte'] eq 'null' ? '' : currentRow['artNumeroParte']}"/>
                                </div>
                            </div>
                            <div class="col-1">
                                <div class="col-12">
                                    <strong><h:outputText styleClass="control-label" value="Cantidad"/></strong>
                                </div>
                                <div class="col-1"></div>
                                <div class="col-11">                            
                                    <h:outputText styleClass="control-label" value="#{currentRow['cantidadAutorizada']}">
                                        <f:convertNumber maxFractionDigits="3"/>
                                    </h:outputText>
                                </div>
                            </div>                
                            <div class="col-2">
                                <div class="col-12">
                                    <strong><h:outputText styleClass="control-label" value="Unidad" /></strong>
                                </div>
                                <div class="col-12">
                                    <h:outputText styleClass="control-label" value="#{currentRow['artUnidad']}"/>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="col-12">
                                    <strong><h:outputText styleClass="control-label" value="Descripción"/></strong>
                                </div>
                                <div class="col-12">
                                    <h:outputText styleClass="control-label"  value="#{currentRow['artDescripcion']}"/>
                                </div>
                            </div>                    
                        </div>
                        <!-- ui:fragment rendered="#{currentRow['usuarioBeneficiado'] ne ''}">
                            <div class="row">                            
                                <div class="col-6">
                                    <div class="col-12">
                                        <strong><h:outputText styleClass="control-label" value="Usuario beneficiado"/></strong>
                                    </div>
                                    <div class="col-12">
                                        <h:outputText styleClass="control-label" value="#{currentRow['usuarioBeneficiado'] eq 'null' ? '' : currentRow['usuarioBeneficiado']}"/>
                                    </div>
                                </div>
                            </div>
                        </ui:fragment -->
                    </div>
                    <div class="col-1">
                        <ui:fragment rendered="#{requisicionBean.requisicionActual.multiproyecto  eq 'False'}">
                            <div class="form-inline" >
                                <p:commandLink styleClass="btn btn-default"
                                               action="#{requisicionBean.seleccionarItem(currentRow.idRequisicionDetalle)}"
                                               title="Clic aqui para modificar el item..." 
                                               process="@this" update="frmAutCantidad">
                                    <i class="fa fa-edit text-primary"/>
                                </p:commandLink>

                                <p:commandLink styleClass="btn btn-default"
                                               rendered="#{currentRow.autorizado eq 'Si'}"
                                               action="#{requisicionBean.cancelarItem(currentRow.idRequisicionDetalle)}" 
                                               title="Clic aqui para cancelar el item..."
                                               >
                                    <i class="fa fa-trash text-danger"/>
                                </p:commandLink>
                                <p:commandLink styleClass="btn btn-default"
                                               rendered="#{currentRow.autorizado eq 'No'}"
                                               action="#{requisicionBean.autorizarItem(currentRow.idRequisicionDetalle)}" 
                                               title="Clic aqui para autorizar el item..."
                                               >
                                    <i class="fa fa-check"/>
                                </p:commandLink>
                            </div>
                        </ui:fragment>
                    </div>
                </ui:repeat>
            </div>
        </div>
    </div>

</ui:composition>