<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"    
      
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      
      
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:body>
        <ui:composition template="../../../WEB-INF/template/template.xhtml">
            <ui:define name="tituloPagina">
                <h2 class="page-header">Contratos por vencer</h2>
            </ui:define>
            <ui:define name="content">
		<div class="row">
		    <div class="col-lg-12">
			<div class="card with-nav-tabs card-primary">
			    <!--div class="card-body"-->
			    <div class="card-heading">
				<h:form id="frmCabecera">
				    <ul class="nav nav-tabs">
					<li class="active">
					    <a href="#tab1primary" data-toggle="tab">Contratos</a></li>
					<c:forEach items="#{contratoBean.lstConveniosTabs}" var="cont" varStatus="indice" >
					    <li>
						<a href="##{cont.numero}" data-toggle="tab"
						   onclick="ejecutarFiltros('frmCabecera', 'btnPestana#{cont.id}')">#{cont.numero}</a>
						<span>
						    <p:commandLink action="#{contratoBean.seleccionarPestana(event)}" 
								   value="#{cont.numero}"
								   id="btnPestana#{cont.id}"
								   style="display:  none;">
							<f:param name="indice" value="#{indice.index}"/>
						    </p:commandLink>
						</span>
					    </li>
					</c:forEach>
				    </ul>
				</h:form>
			    </div>
			    <!--/div-->
			    <div class="card-body">			  
				<div class="tab-content">
				    <div class="tab-pane fade in active" id="tab1primary">
					<div class="table table-responsive">
					    <h:form id="frmContratoVencer">
                                                <!-- rowSelectListener="#{contratoBean.administrarContratoVencer}" 	
							       selectionMode="single"-->
						<p:dataTable id="dtConvenioVencer" value="#{contratoBean.listaConveniosVencer}" 
							       var="data" styleClass="table table-bordered table-striped" 
							       rows="10" paginator="true"  
							       paginatorPosition="bottom" 							       
							       style="font-size: 1em; width: 100%">
                                                    <p:ajax event="select" process="@this" update="@all" />
						    <ui:include src="/vistas/contrato/admin/fragmento/columnaContrato.xhtml"/>
						</p:dataTable>
					    </h:form>
					</div>
				    </div>
				    <c:forEach items="#{contratoBean.lstConveniosTabs}" var="contr">
					<div class="tab-pane" id="#{contr.numero}">
					    <ui:include src="../admin/administrarContrato.xhtml"/>
					</div>
				    </c:forEach>
				</div>
			    </div>
			</div>
		    </div>
		</div>

	    </ui:define>
	</ui:composition>
    </h:body>
</html>