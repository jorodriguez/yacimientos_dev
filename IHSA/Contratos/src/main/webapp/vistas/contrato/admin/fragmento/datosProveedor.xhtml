<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"

                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui">    
    <h:form id="frmAdminProveedor#{contr.id}" rendered="#{not empty sesion.usuarioSesion}" >
        <div class="card card-primary">
            <div class="card-header">
                <h1 class="card-title">Datos generales proveedor / Prestador de Servicio / Contratista</h1>
            </div>
            <div class="card-body">
                <ui:fragment rendered="#{contratoBean.editarProveedor or proveedorBean.editarProveedor}">
                    <div style="text-align: right;" class="col-lg-12">
                        <p:commandLink  action="#{proveedorBean.goDGP(contr.proveedorVo.idProveedor)}"                                                               
                                        styleClass="btn btn-primary" process="@this" update="frmDialogREG"
                                        rendered="#{proveedorBean.idProveedor gt 0}"
                                        >
                            <i class="fa fa-edit"/>
                        </p:commandLink>   
                    </div>
                </ui:fragment>
                <div class="row">
                    <div class="row form-group ">                           
                        <h:outputText class="col-lg-2 control-label" value="Nombre: "/>
                        <div class="col-lg-10">
                            <h:outputLabel value="#{contr.proveedorVo.nombre}"/>
                        </div>
                    </div>                        
                    <div class="row form-group">            
                        <h:outputText class="col-lg-2 control-label" value="Extranjera/Nacional: "/>
                        <div class="col-lg-4">
                            <h:outputLabel value="#{contr.proveedorVo.nacional eq 'True' ? 'Nacional' : 'Extranjera'}"/>
                        </div>
                        <h:outputText class="col-lg-2 control-label" value="P. Fisica/Moral: " 
                                      style="display: #{contr.proveedorVo.nacional eq 'True' ? 'block' : 'none'};"/>
                        <div class="col-lg-4"
                             style="display: #{contr.proveedorVo.nacional eq 'True' ? 'block' : 'none'};">
                            <h:outputLabel value="#{contr.proveedorVo.personaTxt}"/>
                        </div>				                            
                    </div>
                    <div class="row form-group">                           
                        <h:outputText class="col-lg-1 control-label" value="RFC: "/>
                        <div class="col-lg-3">
                            <h:outputLabel value="#{contr.proveedorVo.rfc}"/>
                        </div>                                    
                        <h:outputText class="col-lg-1 control-label" value="idCIF: "
                                      style="display: #{contr.proveedorVo.nacional eq 'True' ? 'block' : 'none'};"/>
                        <div class="col-lg-3" style="display: #{contr.proveedorVo.nacional eq 'True' ? 'block' : 'none'};">
                            <h:outputLabel value="#{contr.proveedorVo.idCIF}"/>
                        </div>
                        <h:outputText class="col-lg-1 control-label" value="CURP: "
                                      style="display: #{contr.proveedorVo.nacional eq 'True' and contr.proveedorVo.persona eq '2' ? 'block' : 'none'};"/>
                        <div class="col-lg-3" style="display: #{contr.proveedorVo.nacional eq 'True' and contr.proveedorVo.persona eq '2' ? 'block' : 'none'};">
                            <h:outputLabel value="#{contr.proveedorVo.curp}"/>
                        </div>

                    </div>
                    <div class="row form-group">                           
                        <h:outputText class="col-lg-1 control-label" value="Giro: "/>
                        <div class="col-lg-11">
                            <h:outputLabel value="#{contr.proveedorVo.giro}"/>
                        </div>
                    </div>    
                    <div class="row form-group">                           
                        <h:outputText class="col-lg-1 control-label" value="Archivo REPSE: "/>
                        <div class="col-lg-11">
                            <h:outputLabel value="#{contr.proveedorVo.repse eq true ? 'Si' : 'No'}"/>
                        </div>
                    </div>    
                </div>
            </div>
        </div>

        <p:tabView activeIndex="0" id="tabViewProv">
            <p:tab title="Domicilio Fiscal">
                <ui:fragment rendered="#{contratoBean.editarProveedor or proveedorBean.editarProveedor}">
                    <div style="text-align: right;" class="col-lg-12">                                                                                    
                        <p:commandLink  action="#{proveedorBean.goDF(contr.proveedorVo.idProveedor)}"                                                               
                                        styleClass="btn btn-primary" process="@this" update="frmDialogDF"
                                        rendered="#{proveedorBean.idProveedor gt 0}">
                            <i class="fa fa-edit"/>
                        </p:commandLink>   
                    </div>
                </ui:fragment>
                <div class="input-group col-lg-12 col-xs-12">                                
                    <div class="row form-group">                           
                        <h:outputText class="col-lg-1 control-label" value="Calle: "/>
                        <div class="col-lg-5">
                            <h:outputLabel value="#{contr.proveedorVo.calle}"/>
                        </div>
                        <h:outputText class="col-lg-1 control-label" value="No.Ext: "/>
                        <div class="col-lg-2">
                            <h:outputLabel value="#{contr.proveedorVo.numero}"/>
                        </div>
                        <h:outputText class="col-lg-1 control-label" value="No.Int: "/>
                        <div class="col-lg-2">
                            <h:outputLabel value="#{contr.proveedorVo.numeroInt}"/>
                        </div>
                    </div>
                    <div class="row form-group">                           
                        <h:outputText class="col-lg-1 control-label" value="Colonia: "/>
                        <div class="col-lg-5">
                            <h:outputLabel value="#{contr.proveedorVo.colonia}"/>
                        </div>
                        <h:outputText class="col-lg-1 control-label" value="Estado: "/>
                        <div class="col-lg-5">
                            <h:outputLabel value="#{contr.proveedorVo.estado}"/>
                        </div>                                     
                    </div>

                    <div class="row form-group">                           
                        <h:outputText class="col-lg-1 control-label" value="C.P.: "/>
                        <div class="col-lg-5">
                            <h:outputLabel value="#{contr.proveedorVo.codigoPostal}"/>
                        </div>
                        <h:outputText class="col-lg-1 control-label" value="Municipio "/>
                        <div class="col-lg-5">
                            <h:outputLabel value="#{contr.proveedorVo.ciudad}"/>
                        </div>                                     
                    </div>				
                </div>

            </p:tab>
            <p:tab title="Registros">
                <ui:fragment rendered="#{contratoBean.editarProveedor or proveedorBean.editarProveedor}">
                    <div style="text-align: right;" class="col-lg-12">                                                                                                                 
                        <p:commandLink  action="#{proveedorBean.goREG(contr.proveedorVo.idProveedor)}"                                                               
                                        styleClass="btn btn-primary" process="@this" update="frmDialogREG"
                                        rendered="#{proveedorBean.idProveedor gt 0}">
                            <i class="fa fa-edit"/>
                        </p:commandLink>   
                    </div>
                </ui:fragment>
                <div class="input-group col-lg-12 col-xs-12">                                

                    <div class="row form-group">                                                               
                        <h:outputText class="col-lg-3 control-label" value="No.Registro Patronal IMSS: "/>
                        <div class="col-lg-3">
                            <h:outputLabel value="#{contr.proveedorVo.imssPatronal}"/>
                        </div>                                
                        <h:outputText class="col-lg-3 control-label" value="No.Notaría Publica/Ciudad: "/>
                        <div class="col-lg-3">
                            <h:outputLabel value="#{contr.proveedorVo.noNotaria}"/>
                        </div>
                    </div>
                    <div class="row form-group"> 
                        <h:outputText class="col-lg-3 control-label" value="No.Boleta de Inscripción: "/>
                        <div class="col-lg-3">
                            <h:outputLabel value="#{contr.proveedorVo.noBoleta}"/>
                        </div>                                
                        <h:outputText class="col-lg-4 control-label" value="Escritura Acta Constitutiva No.: "/>
                        <div class="col-lg-2">
                            <h:outputLabel value="#{contr.proveedorVo.noActa}"/>
                        </div>
                    </div>
                    <div class="row form-group"> 
                        <h:outputText class="col-lg-3 control-label" value="Sede del Registro Publico: "/>
                        <div class="col-lg-3">
                            <h:outputLabel value="#{contr.proveedorVo.sede}"/>
                        </div>    
                    </div>

                    <div class="row form-group">                                                                                               
                        <h:outputText class="col-lg-3 control-label" value="Nombre Notario Publico: "/>
                        <div class="col-lg-9">
                            <h:outputLabel value="#{contr.proveedorVo.nombreNot}"/>
                        </div>
                    </div>
                    <div class="row form-group">                                                                                               
                        <h:outputText class="col-lg-4 control-label" value="Fecha Emisión Escritura Publica: "/>
                        <div class="col-lg-2">
                            <h:outputLabel value="#{contr.proveedorVo.emision}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputLabel>
                        </div>
                        <h:outputText class="col-lg-4 control-label" value="Fecha Inscripción Registro Publico: "/>
                        <div class="col-lg-2">
                            <h:outputLabel value="#{contr.proveedorVo.inscripcion}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputLabel>
                        </div>
                    </div>

                </div>
            </p:tab>
            <p:tab title=" Datos Bancarios">

                <ui:fragment rendered="#{contratoBean.editarProveedor or proveedorBean.editarProveedor}">
                    <div style="text-align: right;" class="col-lg-12">                                                     
                        <p:commandLink  action="#{proveedorBean.nuevaCuenta(contr.proveedorVo.idProveedor)}"                                                               
                                        styleClass="btn btn-primary" process="@this" update="frmDialogDB"
                                        rendered="#{proveedorBean.idProveedor gt 0}">
                            <i class="fa fa-plus"/>
                        </p:commandLink>   
                    </div>
                </ui:fragment>
                <p:dataTable id="bancos#{contr.id}" rows="10" 
                             value="#{contr.proveedorVo.cuentas}" var="currentRow" showGridlines="true"
                             size="small">                                                                                  
                    <p:column style="width: 40%">
                        <h:outputText value="#{currentRow.banco}"/>
                        <f:facet name="header">
                            <h:outputText value="Banco"/>
                        </f:facet>
                    </p:column>
                    <p:column style="width: 30%">
                        <h:outputText value="#{currentRow.cuenta}"/>
                        <f:facet name="header">
                            <h:outputText value="Cuenta"/>
                        </f:facet>
                    </p:column>
                    <p:column style="width: 10%">
                        <h:outputText value="#{currentRow.moneda}"/>
                        <f:facet name="header">
                            <h:outputText value="Moneda"/>
                        </f:facet>
                    </p:column>
                    <p:column style="width: 10%" rendered="#{contratoBean.editarProveedor or proveedorBean.editarProveedor}">
                        <p:commandLink 
                            styleClass="btn btn-info btn-sm"          
                            action="#{proveedorBean.editarCuenta(currentRow.idCuentaBanco)}"
                            title="Click aquí para editar cuenta..." 
                            process="@this" update="frmDialogDB">
                            <i class="fa fa-pencil"></i>
                        </p:commandLink>                                                        
                    </p:column>
                    <p:column style="width: 10%" rendered="#{contratoBean.editarProveedor or proveedorBean.editarProveedor}">
                        <p:commandLink 
                            styleClass="btn btn-info btn-sm"          
                            action="#{proveedorBean.borrarCuenta(currentRow.idCuentaBanco)}"
                            title="Click aquí para borrar cuenta..." 
                            process="@this" update="tabView">
                            <i class="fa fa-remove"></i>
                        </p:commandLink>                                                        
                    </p:column>
                </p:dataTable>
            </p:tab>
            <p:tab title="Representante Legal">

                <ui:fragment rendered="#{contratoBean.editarProveedor or proveedorBean.editarProveedor}">
                    <div style="text-align: right;" class="col-lg-12">                                                        
                        <p:commandLink  action="#{proveedorBean.nuevoRepLegal(contr.proveedorVo.idProveedor)}"                                                               
                                        styleClass="btn btn-primary"
                                        rendered="#{proveedorBean.idProveedor gt 0}"
                                        process="@this" update="frmDialogRL">
                            <i class="fa fa-plus"/>
                        </p:commandLink>   
                    </div>
                </ui:fragment>
                <p:dataTable id="rpL#{contr.id}" rows="10" 
                             value="#{contr.proveedorVo.lstRL}" var="currentRow" showGridlines="true"
                             size="small">                                                                                  
                    <p:column style="width: 50%">
                        <h:outputText value="#{currentRow.nombre}"/>
                        <f:facet name="header">
                            <h:outputText value="Nombre"/>
                        </f:facet>
                    </p:column>
                    <p:column style="width: 40%">
                        <h:outputText value="#{currentRow.curp}"/>
                        <f:facet name="header">
                            <h:outputText value="CURP"/>
                        </f:facet>
                    </p:column>
                    <p:column style="width: 10%" rendered="#{contratoBean.editarProveedor or proveedorBean.editarProveedor}">
                        <p:commandLink 
                            styleClass="btn btn-info btn-sm"       
                            action="#{proveedorBean.editContactoRL(currentRow.idContactoProveedor)}"
                            title="Click aquí para editar contacto..." process="@this " update="frmDialogRL">
                            <i class="fa fa-pencil"></i>
                        </p:commandLink>                                                        
                    </p:column>
                    <p:column style="width: 10%" rendered="#{contratoBean.editarProveedor or proveedorBean.editarProveedor}">
                        <p:commandLink process="@this"
                                       styleClass="btn btn-info btn-sm"       
                                       action="#{proveedorBean.borrarContactoRL(currentRow.idContactoProveedor)}"
                                       title="Click aquí para editar contacto..." >
                            <i class="fa fa-remove"></i>
                        </p:commandLink>                                                        
                    </p:column>                                        
                </p:dataTable>
            </p:tab>
            <p:tab title=" Representante Tecnico">
                <ui:fragment rendered="#{contratoBean.editarProveedor or proveedorBean.editarProveedor}">
                    <div style="text-align: right;" class="col-lg-12">                                                        
                        <p:commandLink  action="#{proveedorBean.nuevoRepTecnico(contr.proveedorVo.idProveedor)}"                                                               
                                        styleClass="btn btn-primary"
                                        rendered="#{proveedorBean.idProveedor gt 0}">
                            <i class="fa fa-plus"/>
                        </p:commandLink>   
                    </div>
                </ui:fragment>
                <p:dataTable id="rpT#{contr.id}" rows="10" 
                             value="#{contr.proveedorVo.lstRT}" var="currentRow" showGridlines="true"
                             size="small">                                                                                  
                    <p:column style="width: 50%">
                        <h:outputText value="#{currentRow.nombre}"/>
                        <f:facet name="header">
                            <h:outputText value="Nombre"/>
                        </f:facet>
                    </p:column>
                    <p:column style="width: 40%">
                        <h:outputText value="#{currentRow.curp}"/>
                        <f:facet name="header">
                            <h:outputText value="CURP"/>
                        </f:facet>
                    </p:column>
                    <p:column style="width: 10%" rendered="#{contratoBean.editarProveedor or proveedorBean.editarProveedor}">
                        <p:commandLink 
                            styleClass="btn btn-info btn-sm"  
                            action="#{proveedorBean.editContactoRT(currentRow.idContactoProveedor)}"
                            title="Click aquí para editar mapa..." >
                            <i class="fa fa-pencil"></i>
                        </p:commandLink>                                                        
                    </p:column>
                    <p:column style="width: 10%" rendered="#{contratoBean.editarProveedor or proveedorBean.editarProveedor}">
                        <p:commandLink 
                            styleClass="btn btn-info btn-sm"       
                            action="#{proveedorBean.borrarContactoRT(currentRow.idContactoProveedor)}"
                            title="Click aquí para editar contacto..." >
                            <i class="fa fa-remove"></i>
                        </p:commandLink>                                                        
                    </p:column>                                        
                </p:dataTable>  
            </p:tab>
            <p:tab title="Datos de contacto">
                <ui:fragment rendered="#{contratoBean.editarProveedor or proveedorBean.editarProveedor}">
                    <div style="text-align: right;" class="col-lg-12">                                                        
                        <p:commandLink  action="#{proveedorBean.nuevoContacto(contr.proveedorVo.idProveedor)}"                                                               
                                        styleClass="btn btn-primary" process="@this" update="frmDialogCO"
                                        rendered="#{proveedorBean.idProveedor gt 0}">
                            <i class="fa fa-plus"/>
                        </p:commandLink>   
                    </div>
                </ui:fragment>
                <p:dataTable id="cntcs#{contr.id}" rows="10" 
                             value="#{contr.proveedorVo.contactos}" var="currentRow" 
                             showGridlines="true"                             
                             size="small">                                                                                  
                    <p:column style="width: 50%">
                        <h:outputText value="#{currentRow.nombre}"/>
                        <f:facet name="header">
                            <h:outputText value="Nombre"/>
                        </f:facet>
                    </p:column>
                    <p:column style="width: 40%">
                        <h:outputText value="#{currentRow.curp}"/>
                        <f:facet name="header">
                            <h:outputText value="CURP"/>
                        </f:facet>
                    </p:column> 
                    <p:column style="width: 10%" rendered="#{contratoBean.editarProveedor or proveedorBean.editarProveedor}">
                        <p:commandLink 
                            styleClass="btn btn-info btn-sm"  
                            action="#{proveedorBean.editContacto(currentRow.idContactoProveedor)}"
                            title="Click aquí para editar mapa..."  process="@this" update="frmDialogCO">
                            <i class="fa fa-pencil"></i>
                        </p:commandLink>                                                        
                    </p:column>
                    <p:column style="width: 10%" rendered="#{contratoBean.editarProveedor or proveedorBean.editarProveedor}">
                        <p:commandLink 
                            styleClass="btn btn-info btn-sm"       process="@this"
                            action="#{proveedorBean.borrarContacto(currentRow.idContactoProveedor)}"
                            title="Click aquí para editar contacto..." >
                            <i class="fa fa-remove"></i>
                        </p:commandLink>                                                        
                    </p:column>                                        
                </p:dataTable>
            </p:tab>
            <p:tab title="Documentación"><ui:fragment rendered="#{contratoBean.editarProveedor or proveedorBean.editarProveedor}">
                    <div style="text-align: right;" class="col-lg-12">                                                        
                        <p:commandLink  action="#{proveedorBean.nuevoDocumento(contr.proveedorVo.idProveedor)}"
                                        styleClass="btn btn-primary" process="@this" update="frmDoctosProv"
                                        rendered="#{proveedorBean.idProveedor gt 0}">
                            <i class="fa fa-plus"/>
                        </p:commandLink>   
                    </div>
                </ui:fragment>
                <p:dataTable id="dtDoctosProv#{contr.id}" value="#{contr.proveedorVo.lstDocsProveedor}"
                             var="data" style="width: 100%; font-size: 1.0em;"
                             styleClass="table  table-striped"
                             paginator="true"  
                             paginatorPosition="bottom" 
                             rows="5">
                    <p:column headerText="Documento">
                        <h:outputText value="#{data.documento}" />
                    </p:column>
                    <p:column headerText="Oblig.">
                        <h:outputText value="#{data.obligatoria ? 'Si' : 'No'}" />
                    </p:column>
                    <p:column headerText="Recibida"  width="90">
                        <h:outputText value="#{data.fechaEntrega}">
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Inicio"  width="90">
                        <h:outputText value="#{data.inicioVigencia}" >
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Fin"  width="90">
                        <h:outputText value="#{data.finVigencia}" >
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Validado"  width="50"> 
                        <h:outputText value="#{data.valido eq 'True' ? 'Si'  : 'No'}"/>				    
                    </p:column>
                    <p:column >
                        <h:outputLink target="_blank"  
                                      value="/Sia/AbrirArchivo?ZWZ2W=#{data.adjuntoVO.id}&amp;ZWZ3W=#{data.adjuntoVO.uuid}"
                                      rendered="#{data.adjuntoVO.id gt 0}">
                            <span class="text-info" style="font-weight: bold;"> #{data.adjuntoVO.nombre}</span>
                        </h:outputLink>
                        <p:commandLink action="#{proveedorBean.quitarSoloArchivoDocumento(data.id, data.adjuntoVO.id)}"
                                       rendered="#{data.adjuntoVO.id gt 0 and (contratoBean.editarProveedor or proveedorBean.editarProveedor)}">
                            <i class="fa fa-remove text-danger btn btn-md"/>
                        </p:commandLink>
                    </p:column>
                    <p:column rendered="#{contratoBean.editarProveedor or proveedorBean.editarProveedor}" width="50">
                        <p:commandLink  rendered="#{data.adjuntoVO.id eq 0}"
                                        action="#{proveedorBean.agregarArchivoDocto(data.id)}"
                                        process="@this" update="frmArchivo">
                            <i class="fa fa-upload text-warning btn btn-md"/>
                        </p:commandLink>
                    </p:column>
                    <p:column rendered="#{contratoBean.editarProveedor or proveedorBean.editarProveedor}" width="50">
                        <p:commandLink action="#{proveedorBean.agregarArchivoDocumento(data.id)}"
                                       process="@this" update="frmArchivoDoctoProv">
                            <i class="fa fa-edit text-success btn btn-md"/>
                        </p:commandLink>
                    </p:column>
                    <p:column rendered="#{contratoBean.editarProveedor or proveedorBean.editarProveedor}" width="50">
                        <p:commandLink action="#{proveedorBean.quitarArchivoDocumento(data.id)}"
                                       process="@this" update="@this">
                            <i class="fa fa-remove text-danger btn btn-md"/>
                        </p:commandLink>
                    </p:column>                                
                </p:dataTable>
            </p:tab>
        </p:tabView>
    </h:form>
</ui:composition>