<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core">
    <p:tabView id="tabViewConsulta" activeIndex="0">
        <p:tab title="Datos generales">
            <ui:include src="../datosContrato/fragmento/datosGeneralesConsulta.xhtml"/>            
        </p:tab>
        <p:tab title="Artículos">
            <ui:include src="../datosContrato/fragmento/articuloTabla.xhtml"/>
        </p:tab>
        <p:tab title="Datos del proveedor">
            <div class="card card-primary">
                <div class="card-header">
                    <h1 class="card-title">Datos generales proveedor / Prestador de Servicio / Contratista</h1>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-4">
                            <div class="input-group">                           
                                <h:outputText class="control-label" value="Nombre: "/>
                                <div class="col-12">
                                    <h:outputLabel value="#{consultaContratoBean.contratoVo.proveedorVo.nombre}"/>
                                </div>
                            </div>                        
                            <div class="input-group">
                                <h:outputText class="control-label" value="Extranjera/Nacional: "/>
                                <div class="col-12">
                                    <h:outputLabel value="#{consultaContratoBean.contratoVo.proveedorVo.nacional eq 'True' ? 'Nacional' : 'Extranjera'}"/>
                                </div>
                            </div>
                            <div class="input-group">
                                <h:outputText class="control-label" value="P. Fisica/Moral: " 
                                              style="display: #{consultaContratoBean.contratoVo.proveedorVo.nacional eq 'True' ? 'block' : 'none'};"/>
                                <div class="col-12"
                                     style="display: #{consultaContratoBean.contratoVo.proveedorVo.nacional eq 'True' ? 'block' : 'none'};">
                                    <h:outputLabel value="#{consultaContratoBean.contratoVo.proveedorVo.personaTxt}"/>
                                </div>	
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="input-group">                      
                                <h:outputText class="control-label" value="RFC: "/>
                                <div class="col-12">
                                    <h:outputLabel value="#{consultaContratoBean.contratoVo.proveedorVo.rfc}"/>
                                </div>               
                            </div>
                            <div class="input-group">                     
                                <h:outputText class="control-label" value="idCIF: "
                                              style="display: #{consultaContratoBean.contratoVo.proveedorVo.nacional eq 'True' ? 'block' : 'none'};"/>
                                <div class="col-12" style="display: #{consultaContratoBean.contratoVo.proveedorVo.nacional eq 'True' ? 'block' : 'none'};">
                                    <h:outputLabel value="#{consultaContratoBean.contratoVo.proveedorVo.idCIF}"/>
                                </div>
                            </div>
                            <div class="input-group">
                                <h:outputText class="control-label" value="CURP: "
                                              style="display: #{consultaContratoBean.contratoVo.proveedorVo.nacional eq 'True' and consultaContratoBean.contratoVo.proveedorVo.persona eq '2' ? 'block' : 'none'};"/>
                                <div class="col-12" style="display: #{consultaContratoBean.contratoVo.proveedorVo.nacional eq 'True' and consultaContratoBean.contratoVo.proveedorVo.persona eq '2' ? 'block' : 'none'};">
                                    <h:outputLabel value="#{consultaContratoBean.contratoVo.proveedorVo.curp}"/>
                                </div>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="input-group">
                                <h:outputText class="control-label" value="Giro: "/>
                                <div class="col-11">
                                    <h:outputLabel value="#{consultaContratoBean.contratoVo.proveedorVo.giro}"/>
                                </div>
                            </div>
                            <div class="input-group">                          
                                <h:outputText class="control-label" value="Archivo REPSE: "/>
                                <div class="col-11">
                                    <h:outputLabel value="#{consultaContratoBean.contratoVo.proveedorVo.repse eq true ? 'Si' : 'No'}"/>
                                </div>
                            </div>    
                        </div>
                    </div>
                </div>
            </div>
            <p:tabView activeIndex="0" id="tabViewProv">
                <p:tab title="Domicilio Fiscal">
                    <div class="row">
                        <div class="col-4">
                            <div class="input-group">                             
                                <h:outputText class="control-label" value="Calle: "/>
                                <div class="col-12">
                                    <h:outputLabel value="#{consultaContratoBean.contratoVo.proveedorVo.calle}"/>
                                </div>
                            </div>
                            <div class="input-group">   
                                <h:outputText class="control-label" value="No.Ext: "/>
                                <div class="col-12">
                                    <h:outputLabel value="#{consultaContratoBean.contratoVo.proveedorVo.numero}"/>
                                </div>
                            </div>
                            <div class="input-group">   
                                <h:outputText class="control-label" value="No.Int: "/>
                                <div class="col-12">
                                    <h:outputLabel value="#{consultaContratoBean.contratoVo.proveedorVo.numeroInt}"/>
                                </div>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="input-group">                            
                                <h:outputText class="control-label" value="Colonia: "/>
                                <div class="col-12">
                                    <h:outputLabel value="#{consultaContratoBean.contratoVo.proveedorVo.colonia}"/>
                                </div>
                            </div>
                            <div class="input-group">   
                                <h:outputText class="control-label" value="Estado: "/>
                                <div class="col-12">
                                    <h:outputLabel value="#{consultaContratoBean.contratoVo.proveedorVo.estado}"/>
                                </div>     
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="input-group">   
                                <h:outputText class="control-label" value="C.P.: "/>
                                <div class="col-12">
                                    <h:outputLabel value="#{consultaContratoBean.contratoVo.proveedorVo.codigoPostal}"/>
                                </div>
                            </div>
                            <div class="input-group">                   
                                <h:outputText class="control-label" value="Municipio "/>
                                <div class="col-12">
                                    <h:outputLabel value="#{consultaContratoBean.contratoVo.proveedorVo.ciudad}"/>
                                </div>                      
                            </div>
                        </div>
                    </div>
                </p:tab>
                <p:tab title="Registros">
                    <div class="row">
                        <div class="col-4">
                            <div class="input-group">   
                                <h:outputText class="control-label" value="No.Registro Patronal IMSS: "/>
                                <div class="col-12">
                                    <h:outputLabel value="#{consultaContratoBean.contratoVo.proveedorVo.imssPatronal}"/>
                                </div>                                
                            </div>
                            <div class="input-group">   
                                <h:outputText class="control-label" value="No.Notaría Publica/Ciudad: "/>
                                <div class="col-12">
                                    <h:outputLabel value="#{consultaContratoBean.contratoVo.proveedorVo.noNotaria}"/>
                                </div>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="input-group">   
                                <h:outputText class="control-label" value="No.Boleta de Inscripción: "/>
                                <div class="col-12">
                                    <h:outputLabel value="#{consultaContratoBean.contratoVo.proveedorVo.noBoleta}"/>
                                </div>                      
                            </div>
                            <div class="input-group">   
                                <h:outputText class="control-label" value="Escritura Acta Constitutiva No.: "/>
                                <div class="col-12">
                                    <h:outputLabel value="#{consultaContratoBean.contratoVo.proveedorVo.noActa}"/>
                                </div>
                            </div>
                            <div class="input-group">   
                                <h:outputText class="control-label" value="Sede del Registro Publico: "/>
                                <div class="col-12">
                                    <h:outputLabel value="#{consultaContratoBean.contratoVo.proveedorVo.sede}"/>
                                </div> 
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="input-group">   
                                <h:outputText class="control-label" value="Nombre Notario Publico: "/>
                                <div class="col-9">
                                    <h:outputLabel value="#{consultaContratoBean.contratoVo.proveedorVo.nombreNot}"/>
                                </div>
                            </div>
                            <div class="input-group">   
                                <h:outputText class="control-label" value="Fecha Emisión Escritura Publica: "/>
                                <div class="col-12">
                                    <h:outputLabel value="#{consultaContratoBean.contratoVo.proveedorVo.emision}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputLabel>
                                </div>
                            </div>
                            <div class="input-group">   
                                <h:outputText class="control-label" value="Fecha Inscripción Registro Publico: "/>
                                <div class="col-12">
                                    <h:outputLabel value="#{consultaContratoBean.contratoVo.proveedorVo.inscripcion}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputLabel>
                                </div>
                            </div>
                        </div>
                    </div>
                </p:tab>
                <p:tab title=" Datos Bancarios">
                    <p:dataTable id="bancos#{consultaContratoBean.contratoVo.id}" rows="10" 
                                 value="#{consultaContratoBean.contratoVo.proveedorVo.cuentas}" var="currentRow" showGridlines="true"
                                 size="small">                                                                                  
                        <p:column style="width: 40%">
                            <h:outputText value="#{currentRow.banco}"/>
                            <f:facet name="header">
                                <h:outputText value="Banco"/>
                            </f:facet>
                        </p:column>
                        <p:column style="width: 30%">
                            <h:outputText value="#{currentRow.cuenta}"/>
                            <f:facet name="header">
                                <h:outputText value="Cuenta"/>
                            </f:facet>
                        </p:column>
                        <p:column style="width: 10%">
                            <h:outputText value="#{currentRow.moneda}"/>
                            <f:facet name="header">
                                <h:outputText value="Moneda"/>
                            </f:facet>
                        </p:column>
                    </p:dataTable>
                </p:tab>
                <p:tab title="Representante Legal">
                    <p:dataTable id="rpL#{consultaContratoBean.contratoVo.id}" rows="10" 
                                 value="#{consultaContratoBean.contratoVo.proveedorVo.lstRL}" var="currentRow" showGridlines="true"
                                 size="small">                                                                                  
                        <p:column style="width: 50%">
                            <h:outputText value="#{currentRow.nombre}"/>
                            <f:facet name="header">
                                <h:outputText value="Nombre"/>
                            </f:facet>
                        </p:column>
                        <p:column style="width: 40%">
                            <h:outputText value="#{currentRow.curp}"/>
                            <f:facet name="header">
                                <h:outputText value="CURP"/>
                            </f:facet>
                        </p:column>                                       
                    </p:dataTable>
                </p:tab>
                <p:tab title=" Representante Tecnico">
                    <p:dataTable id="rpT#{consultaContratoBean.contratoVo.id}" rows="10" 
                                 value="#{consultaContratoBean.contratoVo.proveedorVo.lstRT}" var="currentRow" showGridlines="true"
                                 size="small">                                                                                  
                        <p:column style="width: 50%">
                            <h:outputText value="#{currentRow.nombre}"/>
                            <f:facet name="header">
                                <h:outputText value="Nombre"/>
                            </f:facet>
                        </p:column>
                        <p:column style="width: 40%">
                            <h:outputText value="#{currentRow.curp}"/>
                            <f:facet name="header">
                                <h:outputText value="CURP"/>
                            </f:facet>
                        </p:column>                                       
                    </p:dataTable>  
                </p:tab>
                <p:tab title="Datos de contacto">
                    <p:dataTable id="cntcs#{consultaContratoBean.contratoVo.id}" rows="10" 
                                 value="#{consultaContratoBean.contratoVo.proveedorVo.contactos}" var="currentRow" 
                                 showGridlines="true"                             
                                 size="small">                                                                                  
                        <p:column style="width: 50%">
                            <h:outputText value="#{currentRow.nombre}"/>
                            <f:facet name="header">
                                <h:outputText value="Nombre"/>
                            </f:facet>
                        </p:column>
                        <p:column style="width: 40%">
                            <h:outputText value="#{currentRow.curp}"/>
                            <f:facet name="header">
                                <h:outputText value="CURP"/>
                            </f:facet>
                        </p:column>                                        
                    </p:dataTable>
                </p:tab>
                <p:tab title="Documentación">
                    <p:dataTable id="dtDoctosProv#{consultaContratoBean.contratoVo.id}" value="#{consultaContratoBean.contratoVo.proveedorVo.lstDocsProveedor}"
                                 var="data" showGridlines="true" size="small"
                                 paginator="true"  
                                 paginatorPosition="bottom" 
                                 rows="5">
                        <p:column headerText="Documento">
                            <h:outputText value="#{data.documento}" />
                        </p:column>
                        <p:column headerText="Oblig.">
                            <h:outputText value="#{data.obligatoria ? 'Si' : 'No'}" />
                        </p:column>
                        <p:column headerText="Recibida"  width="90">
                            <h:outputText value="#{data.fechaEntrega}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Inicio"  width="90">
                            <h:outputText value="#{data.inicioVigencia}" >
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Fin"  width="90">
                            <h:outputText value="#{data.finVigencia}" >
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Validado"  width="50"> 
                            <h:outputText value="#{data.valido eq 'True' ? 'Si'  : 'No'}"/>				    
                        </p:column>
                        <p:column >
                            <h:outputLink target="_blank"  
                                          value="/Sia/AbrirArchivo?ZWZ2W=#{data.adjuntoVO.id}&amp;ZWZ3W=#{data.adjuntoVO.uuid}"
                                          rendered="#{data.adjuntoVO.id gt 0}">
                                <span class="text-info" style="font-weight: bold;"> #{data.adjuntoVO.nombre}</span>
                            </h:outputLink>
                        </p:column>                                
                    </p:dataTable>
                </p:tab>
            </p:tabView>
        </p:tab>
        <p:tab title="Contratos Relacionados">
            <ui:include src="../datosContrato/fragmento/consultaContratosRelacionados.xhtml"/>
        </p:tab>
        <p:tab title="Órdenes de compra">
            <div id="graficaOCSConvenio#{consultaContratoBean.contratoVo.id}" style="min-width: 950px; height: 400px; margin: 0 auto;" ></div>
            <hr/>
            <p:commandLink id="btnBuscar#{consultaContratoBean.contratoVo.id}" value="Buscar" 
                           action="#{consultaContratoBean.buscarContratoPorGrafica}"
                           style="display: none"/>
            <div class="row-fluid">
                <p:commandLink action="#{consultaContratoBean.traerOcsPorconvenio}"
                               styleClass="btn btn-success  text-white"
                               title="Traer ordenes pr contrato"
                               style="float: right;" process="@this" update="frmConsultaConv:tabViewCons:tabViewConsulta">
                    <i class="fa fa-refresh"/>
                </p:commandLink> 
                <p:commandButton value="Exportar">
                    <p:dataExporter type="xls" fileName="ocsContrato" target="dtlOcsConvenio#{consultaContratoBean.contratoVo.id}"
                                    >
                    </p:dataExporter>
                </p:commandButton>
            </div>
            <div class="table table-responsive">
                <p:dataTable id="dtlOcsConvenio#{consultaContratoBean.contratoVo.id}" 
                             value="#{consultaContratoBean.contratoVo.listaOrdenConvenio}" var="data"
                             size="small" showGridlines="true"
                             paginator="true"  
                             paginatorPosition="bottom" 
                             rows="15">
                    <p:column headerText="OC/S">
                        <h:outputText value="#{data.consecutivo}"/>	    
                    </p:column>
                    <p:column headerText="Solicitó">
                        <h:outputText value="#{data.analista}"/>	    
                    </p:column>
                    <p:column headerText="Gerencia">
                        <h:outputText value="#{data.gerencia}"/>	    
                    </p:column>
                    <p:column headerText="Referencia">
                        <h:outputText value="#{data.referencia}"/>	    
                    </p:column>
                    <p:column headerText="Estado">
                        <h:outputText value="#{data.estatus}"/>	    
                    </p:column>
                    <p:column headerText="Subtotal">
                        <h:outputText value="#{data.subTotal}">
                            <f:convertNumber maxFractionDigits="4"/>
                        </h:outputText>	    
                    </p:column>
                    <p:column headerText="Moneda">
                        <h:outputText value="#{data.moneda}"/>
                    </p:column>
                </p:dataTable>
            </div>
        </p:tab>
    </p:tabView>
</ui:composition>