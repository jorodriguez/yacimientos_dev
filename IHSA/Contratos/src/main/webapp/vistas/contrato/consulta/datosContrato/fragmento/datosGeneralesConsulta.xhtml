<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"

                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui">

    <div class="row">
        Días restantes: <b class="text text-danger"> #{consultaContratoBean.contratoVo.diasRestantes} </b>, 
        Acumulado en oc/s: 
        <h:outputLabel value="#{consultaContratoBean.contratoVo.acumulado}" class="text text-danger">
            <f:convertNumber type="currency"/>
        </h:outputLabel>	    
        <ui:fragment rendered="#{consultaContratoBean.contratoVo.monto gt consultaContratoBean.contratoVo.acumulado}"> 
            , Remanente : 
            <h:outputLabel value="#{consultaContratoBean.contratoVo.remanente}" class="text text-danger">
                <f:convertNumber type="currency"/>
            </h:outputLabel>	    
        </ui:fragment>
    </div>
    <div class="card card-primary">
        <div class="card-header">
            <h1 class="card-title">Datos generales</h1>
        </div>
        <div class="row">
            <div class="col-6">
                <div class="input-group ">
                    <div class="form-group"> 
                        <h:outputText class="col-4 control-label" value="Número: "/>
                        <div class="col-8">
                            <h:outputLabel value="#{consultaContratoBean.contratoVo.numero}"/>
                        </div>
                    </div>
                    <div class="form-group ">                           
                        <h:outputText class="col-4 control-label" value="Objetivo: "/>
                        <div class="col-8">
                            <h:outputLabel value="#{consultaContratoBean.contratoVo.nombre}"/>
                        </div>
                    </div>
                    <div class="form-group">                           
                        <h:outputText class="col-4 control-label" value="Proveedor: "/>
                        <div class="col-8">
                            <h:outputLabel value="#{consultaContratoBean.contratoVo.nombreProveedor}"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-6">
                <div class="input-group">
                    <div class="form-group  col-12">
                        <h:outputText class="col-3 control-label" value="Gerencia: "/>
                        <div class="col-8">
                            <ul style="margin-left: -30px;">
                                <ui:repeat value="#{consultaContratoBean.contratoVo.listaGerencia}" var="data">
                                    <li>
                                        <h:outputLabel value="#{data.nombre}" class="text-md" />
                                    </li>
                                </ui:repeat>
                            </ul>
                        </div>
                    </div>
                    <div class="form-group col-12">
                        <h:outputText class="col-3 control-label" value="Tipo: "/>
                        <div class="col-8">
                            <h:outputLabel value="#{consultaContratoBean.contratoVo.tipo}"/>
                        </div>
                    </div>
                    <div class="form-group col-12">
                        <h:outputText class="col-3 control-label" value="Clasificación: "/>
                        <div class="col-8">
                            <h:outputLabel value="#{consultaContratoBean.contratoVo.clasificacion}">
                            </h:outputLabel>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <p:accordionPanel>
        <p:tab title="Datos complementarios">
            <div class="col-12 col-xs-12">
                <div class="col-4">
                    <div class="input-group">
                        <div class="form-group col-12">                           
                            <h:outputText class="col-4 control-label" value="Estado: "/>
                            <div class="col-8">
                                <h:outputLabel value="#{consultaContratoBean.contratoVo.estado}"/>
                            </div>
                        </div>
                        <div class="form-group  col-12">                           
                            <h:outputText class="col-4 control-label" value="Firma: "/>
                            <div class="col-8">
                                <h:outputLabel value="#{consultaContratoBean.contratoVo.fechaFirma}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputLabel>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-4">
                    <div class="input-group">
                        <div class="form-group col-12">                           
                            <h:outputText class="col-4 control-label" value="Inicio: "/>
                            <div class="col-8">
                                <h:outputLabel value="#{consultaContratoBean.contratoVo.fechaInicio}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputLabel>
                            </div>
                        </div>
                        <div class="form-group  col-12">                           
                            <h:outputText class="col-4 control-label" value="Fin: "/>
                            <div class="col-8">
                                <h:outputLabel value="#{consultaContratoBean.contratoVo.fechaVencimiento}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputLabel>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-4">
                    <div class="input-group">
                        <div class="form-group  col-12">                           
                            <h:outputText class="col-4 control-label" value="Vigencia: "/>
                            <div class="col-8">
                                <h:outputLabel value="#{consultaContratoBean.contratoVo.vigencia}"/>
                            </div>
                        </div>
                        <div class="form-group  col-12">                           
                            <h:outputText class="col-4 control-label" value="Monto: "/>
                            <div class="col-8">
                                <h:outputLabel value="#{consultaContratoBean.contratoVo.monto}" >
                                    <f:convertNumber type="currency"/>
                                </h:outputLabel>
                                #{consultaContratoBean.contratoVo.moneda}
                            </div>
                        </div>
                        <div class="form-group  col-12">                           
                            <h:outputText class="col-4 control-label" value="Deducción: "/>
                            <div class="col-6">
                                <h:outputLabel value="#{consultaContratoBean.contratoVo.porcentajeDeduccion} %"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </p:tab>
        <p:tab title="Documentación">
            <p:dataTable id="dtDoctos#{consultaContratoBean.contratoVo.id}" 
                         value="#{consultaContratoBean.contratoVo.listaConvenioDocumento}"
                         var="data" size="small" showGridlines="true"
                         paginator="true"  
                         paginatorPosition="bottom" 
                         rows="5">
                <p:column headerText="Documento" style="text-align: left">
                    <h:outputText value="#{data.documento}" />
                </p:column>
                <p:column headerText="Recibida">
                    <h:outputText value="#{data.fechaEntrega}">
                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                    </h:outputText>
                </p:column>
                <p:column headerText="Inicio">
                    <h:outputText value="#{data.inicioVigencia}" >
                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                    </h:outputText>
                </p:column>
                <p:column headerText="Fin">
                    <h:outputText value="#{data.finVigencia}" >
                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                    </h:outputText>
                </p:column>
                <p:column headerText="Validado">
                    <h:outputText value="#{data.valido eq 'True' ? 'Si'  : 'No'}"/>				    
                </p:column>
                <p:column rendered="#{contratoBean.consultaDocumentos}">
                    <h:outputLink target="_blank"  
                                  value="/Sia/AbrirArchivo?ZWZ2W=#{data.adjuntoVO.id}&amp;ZWZ3W=#{data.adjuntoVO.uuid}"
                                  rendered="#{data.adjuntoVO.id gt 0}">
                        <span class="text-info" style="font-weight: bold;"> #{data.adjuntoVO.nombre}</span>
                    </h:outputLink>
                </p:column>
            </p:dataTable>
        </p:tab>
        <p:tab title="Condiciones de pago">
            <p:dataTable id="dtConvCond#{consultaContratoBean.contratoVo.id}" value="#{consultaContratoBean.contratoVo.listaConvenioCondicion}"
                         var="data" size="small" showGridlines="true">
                <p:column headerText="Condición" style="text-align: left;">
                    <h:outputText value="#{data.nombre}" class="control-label" />
                </p:column>
            </p:dataTable>
        </p:tab>
        <p:tab title="Archivos del convenio">
            <p:dataTable id="dtConvArchivo#{consultaContratoBean.contratoVo.id}" value="#{consultaContratoBean.contratoVo.listaArchivoConvenio}"
                         var="data" size="small" showGridlines="true"
                         rendered="#{contratoBean.consultaDocumentos eq true}">
                <p:column headerText="Archivos" style="text-align: left;">
                    <h:outputLink target="_blank" styleClass="control-label"
                                  style="color: #0895d6;"
                                  value="/Sia/AbrirArchivo?ZWZ2W=#{data.id}&amp;ZWZ3W=#{data.uuid}">
                        <p class="control-label">#{data.nombre}</p>
                    </h:outputLink>
                </p:column>
            </p:dataTable>
        </p:tab>
        <p:tab title="Hitos de pago">
            <p:dataTable id="dtConvHito#{consultaContratoBean.contratoVo.id}" value="#{consultaContratoBean.contratoVo.listaConvenioHito}"
                         var="data" size="small" showGridlines="true">
                <p:column headerText="Hitos de pago" style="text-align: left;">
                    <h:outputText value="#{data.nombre}" class="control-label" />
                </p:column>
            </p:dataTable>
        </p:tab>
    </p:accordionPanel>
</ui:composition>