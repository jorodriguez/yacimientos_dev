<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
		xmlns:p="http://primefaces.org/ui">

    <h:form rendered="#{not empty sesion.usuarioSesion}" >
	<div class="row" style="margin-left: 1%;">
	    Días restantes: <b class="text text-danger"> #{contr.diasRestantes} </b>, 
	    Acumulado en oc/s: 
	    <h:outputLabel value="#{contr.acumulado}" class="text text-danger">
		<f:convertNumber type="currency"/>
	    </h:outputLabel>	    
	    <ui:fragment rendered="#{contr.monto gt contr.acumulado}"> 
		, Remanente : 
		<h:outputLabel value="#{contr.remanente}" class="text text-danger">
		    <f:convertNumber type="currency"/>
		</h:outputLabel>	    
	    </ui:fragment>
	</div>
	<div class="card card-primary">
	    <div class="card-heading">
		<h1 class="card-title">Datos generales</h1>
	    </div>
	    <div class="card-body">
		<div class="col-lg-6">
		    <div class="input-group ">
			<div class="form-group"> 
			    <h:outputText class="col-lg-4 control-label" value="Número: "/>
			    <div class="col-lg-8">
				<h:outputLabel value="#{contr.numero}"/>
			    </div>
			</div>
			<div class="form-group ">                           
			    <h:outputText class="col-lg-4 control-label" value="Objetivo: "/>
			    <div class="col-lg-8">
				<h:outputLabel value="#{contr.nombre}"/>
			    </div>
			</div>
			<div class="form-group">                           
			    <h:outputText class="col-lg-4 control-label" value="Proveedor: "/>
			    <div class="col-lg-8">
				<h:outputLabel value="#{contr.nombreProveedor}"/>
			    </div>
			</div>
		    </div>
		</div>
		<div class="col-lg-6">
		    <div class="input-group">
			<div class="form-group  col-lg-12">
			    <h:outputText class="col-lg-3 control-label" value="Gerencia: "/>
			    <div class="col-lg-8">
				<ul style="margin-left: -30px;">
				    <ui:repeat value="#{contr.listaGerencia}" var="data">
					<li>
					    <h:outputLabel value="#{data.nombre}" class="text-md" />
					</li>
				    </ui:repeat>
				</ul>
			    </div>
			</div>
			<div class="form-group col-lg-12">
			    <h:outputText class="col-lg-3 control-label" value="Tipo: "/>
			    <div class="col-lg-8">
				<h:outputLabel value="#{contr.tipo}"/>
			    </div>
			</div>
			<div class="form-group col-lg-12">
			    <h:outputText class="col-lg-3 control-label" value="Clasificación: "/>
			    <div class="col-lg-8">
				<h:outputLabel value="#{contr.clasificacion}">
				</h:outputLabel>
			    </div>
			</div>
		    </div>
		</div>
	    </div>
	</div>
	<div class = "card-group" id = "accordion">
	    <div class="card card-primary" id="panel1#{contr.id}">
		<div class="card-heading">
		    <h4 class="card-title">
			<a data-toggle="collapse"   href="#collapseOne#{contr.id}">
			    Datos Complementarios
			</a>
		    </h4>
		</div>
		<!-- Datos complementarios -->
		<div id="collapseOne#{contr.id}" class="card-collapse collapse in">
		    <div class="card-body">
			<div class="col-lg-12 col-xs-12">
			    <div class="col-lg-4">
				<div class="input-group">
				    <div class="form-group col-lg-12">                           
					<h:outputText class="col-lg-4 control-label" value="Estado: "/>
					<div class="col-lg-8">
					    <h:outputLabel value="#{contr.estado}"/>
					</div>
				    </div>
				    <div class="form-group  col-lg-12">                           
					<h:outputText class="col-lg-4 control-label" value="Firma: "/>
					<div class="col-lg-8">
					    <h:outputLabel value="#{contr.fechaFirma}">
						<f:convertDateTime pattern="dd/MM/yyyy"/>
					    </h:outputLabel>
					</div>
				    </div>
				</div>
			    </div>
			    <div class="col-lg-4">
				<div class="input-group">
				    <div class="form-group col-lg-12">                           
					<h:outputText class="col-lg-4 control-label" value="Inicio: "/>
					<div class="col-lg-8">
					    <h:outputLabel value="#{contr.fechaInicio}">
						<f:convertDateTime pattern="dd/MM/yyyy"/>
					    </h:outputLabel>
					</div>
				    </div>
				    <div class="form-group  col-lg-12">                           
					<h:outputText class="col-lg-4 control-label" value="Fin: "/>
					<div class="col-lg-8">
					    <h:outputLabel value="#{contr.fechaVencimiento}">
						<f:convertDateTime pattern="dd/MM/yyyy"/>
					    </h:outputLabel>
					</div>
				    </div>
				</div>
			    </div>
			    <div class="col-lg-4">
				<div class="input-group">
				    <div class="form-group  col-lg-12">                           
					<h:outputText class="col-lg-4 control-label" value="Vigencia: "/>
					<div class="col-lg-8">
					    <h:outputLabel value="#{contr.vigencia}"/>
					</div>
				    </div>
				    <div class="form-group  col-lg-12">                           
					<h:outputText class="col-lg-4 control-label" value="Monto: "/>
					<div class="col-lg-8">
					    <h:outputLabel value="#{contr.monto}" >
						<f:convertNumber type="currency"/>
					    </h:outputLabel>
					    #{contr.moneda}
					</div>
				    </div>
				    <div class="form-group  col-lg-12">                           
					<h:outputText class="col-lg-4 control-label" value="Deducción: "/>
					<div class="col-lg-6">
					    <h:outputLabel value="#{contr.porcentajeDeduccion} %"/>
					</div>
				    </div>
				</div>
			    </div>
			</div>
		    </div>
		</div>
	    </div>
	    <!-- Documentacion -->
	    <div class="card card-primary" id="panel2#{contr.id}">
		<div class="card-heading">
		    <h4 class="card-title">
			<a data-toggle="collapse"  href="#collapseTwo#{contr.id}">
			    Documentación
			</a>
		    </h4>
		</div>
		<div id="collapseTwo#{contr.id}" class="card-collapse collapse">
		    <div class="card-body">
			<div class="table table-responsive">
			    <p:dataTable id="dtDoctos#{contr.id}" value="#{contr.listaConvenioDocumento}"
					   var="data" style="width: 95%; font-size: 1.0em;"
					   rowStyleClass="table  table-striped"
					   paginator="true"  
					   paginatorPosition="bottom" 
					   rows="5">
                                <p:column headerText="Documento" style="text-align: left">
				    <h:outputText value="#{data.documento}" />
				</p:column>
				<p:column headerText="Recibida">
				    <h:outputText value="#{data.fechaEntrega}">
					<f:convertDateTime pattern="dd/MM/yyyy"/>
				    </h:outputText>
				</p:column>
				<p:column headerText="Inicio">
				    <h:outputText value="#{data.inicioVigencia}" >
					<f:convertDateTime pattern="dd/MM/yyyy"/>
				    </h:outputText>
				</p:column>
				<p:column headerText="Fin">
				    <h:outputText value="#{data.finVigencia}" >
					<f:convertDateTime pattern="dd/MM/yyyy"/>
				    </h:outputText>
				</p:column>
				<p:column headerText="Validado">
				    <h:outputText value="#{data.valido eq 'True' ? 'Si'  : 'No'}"/>				    
				</p:column>
				<p:column rendered="#{contratoBean.consultaDocumentos}">
				    <h:outputLink target="_blank"  
						    value="/Sia/AbrirArchivo?ZWZ2W=#{data.adjuntoVO.id}&amp;ZWZ3W=#{data.adjuntoVO.uuid}"
						    rendered="#{data.adjuntoVO.id gt 0}">
					<span class="text-info" style="font-weight: bold;"> #{data.adjuntoVO.nombre}</span>
				    </h:outputLink>
				</p:column>
			    </p:dataTable>
			</div>
		    </div>
		</div>
	    </div>
	    <!-- Condiciones de pago -->
	    <div class="card card-primary" id="panel3#{contr.id}">
		<div class="card-heading">
		    <h4 class="card-title">
			<a data-toggle="collapse" 
			   href="#collapseThree#{contr.id}">
			    Condiciones de pago
			</a>
		    </h4>

		</div>
		<div id="collapseThree#{contr.id}" class="card-collapse collapse">
		    <div class="card-body">
			<div class="table table-responsive">
			    <p:dataTable id="dtConvCond#{contr.id}" value="#{contr.listaConvenioCondicion}"
					   var="data" style="width: 60%"
					   rowStyleClass="table  table-striped table-bordered">
				<p:column headerText="Condición" style="text-align: left;">
				    <h:outputText value="#{data.nombre}" class="control-label" />
				</p:column>
			    </p:dataTable>
			</div>
		    </div>
		</div>
	    </div>
	    <!-- Archivos del convenio -->
	    <div class="card card-primary" id="panel4#{contr.id}">
		<div class="card-heading">
		    <h4 class="card-title">
			<a data-toggle="collapse" 
			   href="#collapseCuatro#{contr.id}">
			    Archivos del convenio
			</a>
		    </h4>

		</div>
		<div id="collapseCuatro#{contr.id}" class="card-collapse collapse">
		    <div class="card-body">
			<div class="table table-responsive">
			    <p:dataTable id="dtConvArchivo#{contr.id}" value="#{contr.listaArchivoConvenio}"
					   var="data" style="width: 60%"
					   rowStyleClass="table  table-striped table-bordered"
					   rendered="#{contratoBean.consultaDocumentos eq true}">
				<p:column headerText="Archivos" style="text-align: left;">
				    <h:outputLink target="_blank" styleClass="control-label"
						    style="color: #0895d6;"
						    value="/Sia/AbrirArchivo?ZWZ2W=#{data.id}&amp;ZWZ3W=#{data.uuid}">
					<p class="control-label">#{data.nombre}</p>
				    </h:outputLink>
				</p:column>
			    </p:dataTable>
			</div>
		    </div>
		</div>
	    </div>
	    <!-- Hitos de pago -->
	    <div class="card card-primary" id="panel5#{contr.id}">
		<div class="card-heading">
		    <h4 class="card-title">
			<a data-toggle="collapse" 
			   href="#collapseCinco#{contr.id}">
			    Hitos de pago de pago
			</a>
		    </h4>

		</div>
		<div id="collapseCinco#{contr.id}" class="card-collapse collapse">
		    <div class="card-body">			
			<div class="table table-responsive">
			    <p:dataTable id="dtConvHito#{contr.id}" value="#{contr.listaConvenioHito}"
					   var="data" style="width: 60%"
					   rowStyleClass="table  table-striped table-bordered">
				<p:column headerText="Hitos de pago" style="text-align: left;">
				    <h:outputText value="#{data.nombre}" class="control-label" />
				</p:column>
			    </p:dataTable>
			</div>
		    </div>
		</div>
	    </div>
	</div>
    </h:form>
</ui:composition>