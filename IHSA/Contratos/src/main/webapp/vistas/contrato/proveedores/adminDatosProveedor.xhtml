<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"

                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui">    
    <h:form id="frmRevisaProveedor">  
        <div class="card card-primary">
            <div class="card-header">
                <h1 class="card-title">Datos generales proveedor / Prestador de Servicio / Contratista</h1>
            </div>
            <div class="card-body">
                <ui:fragment rendered="#{proveedorAdminBean.editarProveedor}">
                    <div style="text-align: right;" class="col-12">
                        <p:commandLink  action="#{proveedorAdminBean.goDGP(proveedorAdminBean.proveedor.idProveedor)}"                                                               
                                        styleClass="btn btn-primary" process="@this" update="frmDialogREG"
                                        rendered="#{proveedorAdminBean.idProveedor gt 0}"
                                        >
                            <i class="fa fa-edit text-white"/>
                        </p:commandLink>   
                    </div>
                </ui:fragment>
                <div class="row">
                    <div class="col-4">
                        <div class="input-group">                           
                            <h:outputText class="control-label" value="Nombre: "/>
                            <div class="col-12">
                                <h:outputLabel value="#{proveedorAdminBean.proveedor.nombre}"/>
                            </div>
                        </div>                        
                        <div class="input-group">
                            <h:outputText class="control-label" value="Extranjera/Nacional: "/>
                            <div class="col-12">
                                <h:outputLabel value="#{proveedorAdminBean.proveedor.nacional eq 'True' ? 'Nacional' : 'Extranjera'}"/>
                            </div>
                        </div>
                        <div class="input-group">
                            <h:outputText class="control-label" value="P. Fisica/Moral: " 
                                          style="display: #{proveedorAdminBean.proveedor.nacional eq 'True' ? 'block' : 'none'};"/>
                            <div class="col-12"
                                 style="display: #{proveedorAdminBean.proveedor.nacional eq 'True' ? 'block' : 'none'};">
                                <h:outputLabel value="#{proveedorAdminBean.proveedor.personaTxt}"/>
                            </div>	
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="input-group">                      
                            <h:outputText class="control-label" value="RFC: "/>
                            <div class="col-12">
                                <h:outputLabel value="#{proveedorAdminBean.proveedor.rfc}"/>
                            </div>               
                        </div>
                        <div class="input-group">                     
                            <h:outputText class="control-label" value="idCIF: "
                                          style="display: #{proveedorAdminBean.proveedor.nacional eq 'True' ? 'block' : 'none'};"/>
                            <div class="col-12" style="display: #{proveedorAdminBean.proveedor.nacional eq 'True' ? 'block' : 'none'};">
                                <h:outputLabel value="#{proveedorAdminBean.proveedor.idCIF}"/>
                            </div>
                        </div>
                        <div class="input-group">
                            <h:outputText class="control-label" value="CURP: "
                                          style="display: #{proveedorAdminBean.proveedor.nacional eq 'True' and proveedorAdminBean.proveedor.persona eq '2' ? 'block' : 'none'};"/>
                            <div class="col-12" style="display: #{proveedorAdminBean.proveedor.nacional eq 'True' and proveedorAdminBean.proveedor.persona eq '2' ? 'block' : 'none'};">
                                <h:outputLabel value="#{proveedorAdminBean.proveedor.curp}"/>
                            </div>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="input-group">
                            <h:outputText class="control-label" value="Giro: "/>
                            <div class="col-11">
                                <h:outputLabel value="#{proveedorAdminBean.proveedor.giro}"/>
                            </div>
                        </div>
                        <div class="input-group">                          
                            <h:outputText class="control-label" value="Archivo REPSE: "/>
                            <div class="col-11">
                                <h:outputLabel value="#{proveedorAdminBean.proveedor.repse eq true ? 'Si' : 'No'}"/>
                            </div>
                        </div>    
                    </div>
                </div>
            </div>
        </div>
        <p:tabView activeIndex="0" id="tabViewProv">
            <p:tab title="Domicilio Fiscal">
                <ui:fragment rendered="#{proveedorAdminBean.editarProveedor}">
                    <div style="text-align: right;" class="col-12">                                                                                    
                        <p:commandLink  action="#{proveedorAdminBean.goDF(proveedorAdminBean.proveedor.idProveedor)}"                                                               
                                        styleClass="btn btn-primary" process="@this" update="frmDialogDF"
                                        rendered="#{proveedorAdminBean.idProveedor gt 0}">
                            <i class="fa fa-edit text-white"/>
                        </p:commandLink>   
                    </div>
                </ui:fragment>
                <div class="row">
                    <div class="col-4">
                        <div class="input-group">                             
                            <h:outputText class="control-label" value="Calle: "/>
                            <div class="col-12">
                                <h:outputLabel value="#{proveedorAdminBean.proveedor.calle}"/>
                            </div>
                        </div>
                        <div class="input-group">   
                            <h:outputText class="control-label" value="No.Ext: "/>
                            <div class="col-12">
                                <h:outputLabel value="#{proveedorAdminBean.proveedor.numero}"/>
                            </div>
                        </div>
                        <div class="input-group">   
                            <h:outputText class="control-label" value="No.Int: "/>
                            <div class="col-12">
                                <h:outputLabel value="#{proveedorAdminBean.proveedor.numeroInt}"/>
                            </div>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="input-group">                            
                            <h:outputText class="control-label" value="Colonia: "/>
                            <div class="col-12">
                                <h:outputLabel value="#{proveedorAdminBean.proveedor.colonia}"/>
                            </div>
                        </div>
                        <div class="input-group">   
                            <h:outputText class="control-label" value="Estado: "/>
                            <div class="col-12">
                                <h:outputLabel value="#{proveedorAdminBean.proveedor.estado}"/>
                            </div>     
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="input-group">   
                            <h:outputText class="control-label" value="C.P.: "/>
                            <div class="col-12">
                                <h:outputLabel value="#{proveedorAdminBean.proveedor.codigoPostal}"/>
                            </div>
                        </div>
                        <div class="input-group">                   
                            <h:outputText class="control-label" value="Municipio "/>
                            <div class="col-12">
                                <h:outputLabel value="#{proveedorAdminBean.proveedor.ciudad}"/>
                            </div>                      
                        </div>
                    </div>
                </div>
            </p:tab>
            <p:tab title="Registros">
                <ui:fragment rendered="#{proveedorAdminBean.editarProveedor}">
                    <div style="text-align: right;" class="col-12">                                                                                                                 
                        <p:commandLink  action="#{proveedorAdminBean.goREG(proveedorAdminBean.proveedor.idProveedor)}"                                                               
                                        styleClass="btn btn-primary" process="@this" update="frmDialogREG"
                                        rendered="#{proveedorAdminBean.idProveedor gt 0}">
                            <i class="fa fa-edit text-white"/>
                        </p:commandLink>   
                    </div>
                </ui:fragment>
                <div class="row">
                    <div class="col-4">
                        <div class="input-group">   
                            <h:outputText class="control-label" value="No.Registro Patronal IMSS: "/>
                            <div class="col-12">
                                <h:outputLabel value="#{proveedorAdminBean.proveedor.imssPatronal}"/>
                            </div>                                
                        </div>
                        <div class="input-group">   
                            <h:outputText class="control-label" value="No.Notaría Publica/Ciudad: "/>
                            <div class="col-12">
                                <h:outputLabel value="#{proveedorAdminBean.proveedor.noNotaria}"/>
                            </div>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="input-group">   
                            <h:outputText class="control-label" value="No.Boleta de Inscripción: "/>
                            <div class="col-12">
                                <h:outputLabel value="#{proveedorAdminBean.proveedor.noBoleta}"/>
                            </div>                      
                        </div>
                        <div class="input-group">   
                            <h:outputText class="control-label" value="Escritura Acta Constitutiva No.: "/>
                            <div class="col-12">
                                <h:outputLabel value="#{proveedorAdminBean.proveedor.noActa}"/>
                            </div>
                        </div>
                        <div class="input-group">   
                            <h:outputText class="control-label" value="Sede del Registro Publico: "/>
                            <div class="col-12">
                                <h:outputLabel value="#{proveedorAdminBean.proveedor.sede}"/>
                            </div> 
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="input-group">   
                            <h:outputText class="control-label" value="Nombre Notario Publico: "/>
                            <div class="col-9">
                                <h:outputLabel value="#{proveedorAdminBean.proveedor.nombreNot}"/>
                            </div>
                        </div>
                        <div class="input-group">   
                            <h:outputText class="control-label" value="Fecha Emisión Escritura Publica: "/>
                            <div class="col-12">
                                <h:outputLabel value="#{proveedorAdminBean.proveedor.emision}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputLabel>
                            </div>
                        </div>
                        <div class="input-group">   
                            <h:outputText class="control-label" value="Fecha Inscripción Registro Publico: "/>
                            <div class="col-12">
                                <h:outputLabel value="#{proveedorAdminBean.proveedor.inscripcion}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputLabel>
                            </div>
                        </div>
                    </div>
                </div>
            </p:tab>
            <p:tab title=" Datos Bancarios">
                <ui:fragment rendered="#{proveedorAdminBean.editarProveedor}">
                    <div style="text-align: right;" class="col-12">                                                     
                        <p:commandLink  action="#{proveedorAdminBean.nuevaCuenta(proveedorAdminBean.proveedor.idProveedor)}"                                                               
                                        styleClass="btn btn-primary" process="@this" update="frmDialogDB"
                                        rendered="#{proveedorAdminBean.idProveedor gt 0}">
                            <i class="fa fa-plus text-white"/>
                        </p:commandLink>   
                    </div>
                </ui:fragment>
                <p:dataTable id="bancos" rows="10" 
                             value="#{proveedorAdminBean.proveedor.cuentas}" var="currentRow" showGridlines="true"
                             size="small" lazy="true">                                                                                  
                    <p:column style="width: 40%">
                        <h:outputText value="#{currentRow.banco}"/>
                        <f:facet name="header">
                            <h:outputText value="Banco"/>
                        </f:facet>
                    </p:column>
                    <p:column style="width: 30%">
                        <h:outputText value="#{currentRow.cuenta}"/>
                        <f:facet name="header">
                            <h:outputText value="Cuenta"/>
                        </f:facet>
                    </p:column>
                    <p:column style="width: 10%">
                        <h:outputText value="#{currentRow.moneda}"/>
                        <f:facet name="header">
                            <h:outputText value="Moneda"/>
                        </f:facet>
                    </p:column>
                    <p:column style="width: 3%" rendered="#{proveedorAdminBean.editarProveedor}">
                        <p:commandLink 
                            styleClass="btn btn-info btn-sm text-white"          
                            action="#{proveedorAdminBean.editarCuenta(currentRow.idCuentaBanco)}"
                            title="Click aquí para editar cuenta..." 
                            process="@this" update="frmDialogDB">
                            <i class="fa fa-edit text-white"></i>
                        </p:commandLink>                                                        
                    </p:column>
                    <p:column style="width: 3%" rendered="#{proveedorAdminBean.editarProveedor}">
                        <p:commandLink 
                            styleClass="btn btn-info btn-sm text-white"          
                            action="#{proveedorAdminBean.borrarCuenta(currentRow.idCuentaBanco)}"
                            title="Click aquí para borrar cuenta..." 
                            process="@this" update="frmRevisaProveedor">
                            <i class="fa fa-trash"></i>
                        </p:commandLink>                                                        
                    </p:column>
                </p:dataTable>
            </p:tab>
            <p:tab title="Representante Legal">

                <ui:fragment rendered="#{proveedorAdminBean.editarProveedor}">
                    <div style="text-align: right;" class="col-12">                                                        
                        <p:commandLink  action="#{proveedorAdminBean.nuevoRepLegal(proveedorAdminBean.proveedor.idProveedor)}"                                                               
                                        styleClass="btn btn-primary"
                                        rendered="#{proveedorAdminBean.idProveedor gt 0}"
                                        process="@this" update="frmDialogRL">
                            <i class="fa fa-plus text-white"/>
                        </p:commandLink>   
                    </div>
                </ui:fragment>
                <p:dataTable id="rpL" rows="10" 
                             value="#{proveedorAdminBean.proveedor.lstRL}" var="currentRow" showGridlines="true"
                             size="small" lazy="true">                                                                                  
                    <p:column style="width: 50%">
                        <h:outputText value="#{currentRow.nombre}"/>
                        <f:facet name="header">
                            <h:outputText value="Nombre"/>
                        </f:facet>
                    </p:column>
                    <p:column style="width: 40%">
                        <h:outputText value="#{currentRow.curp}"/>
                        <f:facet name="header">
                            <h:outputText value="CURP"/>
                        </f:facet>
                    </p:column>
                    <p:column style="width: 3%" rendered="#{proveedorAdminBean.editarProveedor}">
                        <p:commandLink 
                            styleClass="btn btn-info btn-sm text-white"       
                            action="#{proveedorAdminBean.editContactoRL(currentRow.idContactoProveedor)}"
                            title="Click aquí para editar contacto..." process="@this " update="frmDialogRL">
                            <i class="fa fa-edit text-white"></i>
                        </p:commandLink>                                                        
                    </p:column>
                    <p:column style="width: 3%" rendered="#{proveedorAdminBean.editarProveedor}">
                        <p:commandLink process="@this"
                                       styleClass="btn btn-info btn-sm text-white"       
                                       action="#{proveedorAdminBean.borrarContactoRL(currentRow.idContactoProveedor)}"
                                       title="Click aquí para editar contacto..." >
                            <i class="fa fa-trash text-danger"></i>
                        </p:commandLink>                                                        
                    </p:column>                                        
                </p:dataTable>
            </p:tab>
            <p:tab title=" Representante Tecnico">
                <ui:fragment rendered="#{proveedorAdminBean.editarProveedor}">
                    <div style="text-align: right;" class="col-12">                                                        
                        <p:commandLink  action="#{proveedorAdminBean.nuevoRepTecnico(proveedorAdminBean.proveedor.idProveedor)}"                                                               
                                        styleClass="btn btn-primary"
                                        rendered="#{proveedorAdminBean.idProveedor gt 0}">
                            <i class="fa fa-plus text-white"/>
                        </p:commandLink>   
                    </div>
                </ui:fragment>
                <p:dataTable id="rpT" rows="10" 
                             value="#{proveedorAdminBean.proveedor.lstRT}" var="currentRow" showGridlines="true"
                             size="small" lazy="true">                                                                                  
                    <p:column style="width: 50%">
                        <h:outputText value="#{currentRow.nombre}"/>
                        <f:facet name="header">
                            <h:outputText value="Nombre"/>
                        </f:facet>
                    </p:column>
                    <p:column style="width: 40%">
                        <h:outputText value="#{currentRow.curp}"/>
                        <f:facet name="header">
                            <h:outputText value="CURP"/>
                        </f:facet>
                    </p:column>
                    <p:column style="width: 3%" rendered="#{proveedorAdminBean.editarProveedor}">
                        <p:commandLink 
                            styleClass="btn btn-info btn-sm text-white"  
                            action="#{proveedorAdminBean.editContactoRT(currentRow.idContactoProveedor)}"
                            title="Click aquí para editar mapa..." process="@this" update="frmDialogRT">
                            <i class="fa fa-edit text-white"></i>
                        </p:commandLink>                                                        
                    </p:column>
                    <p:column style="width: 3%" rendered="#{proveedorAdminBean.editarProveedor}">
                        <p:commandLink 
                            styleClass="btn btn-info btn-sm "       
                            action="#{proveedorAdminBean.borrarContactoRT(currentRow.idContactoProveedor)}"
                            title="Click aquí para editar contacto..." process="@this" update="frmRevisaProveedor:tabViewProv">
                            <i class="fa fa-trash text-danger"></i>
                        </p:commandLink>                                                        
                    </p:column>                                        
                </p:dataTable>  
            </p:tab>
            <p:tab title="Datos de contacto">
                <ui:fragment rendered="#{proveedorAdminBean.editarProveedor}">
                    <div style="text-align: right;" class="col-12">                                                        
                        <p:commandLink  action="#{proveedorAdminBean.nuevoContacto(proveedorAdminBean.proveedor.idProveedor)}"                                                               
                                        styleClass="btn btn-primary text-white" process="@this" update="frmDialogCO"
                                        rendered="#{proveedorAdminBean.idProveedor gt 0}">
                            <i class="fa fa-plus text-white"/>
                        </p:commandLink>   
                    </div>
                </ui:fragment>
                <p:dataTable id="cntcs" rows="10" 
                             value="#{proveedorAdminBean.proveedor.contactos}" var="currentRow" 
                             showGridlines="true"     lazy="true"                         
                             size="small">                                                                                  
                    <p:column style="width: 50%">
                        <h:outputText value="#{currentRow.nombre}"/>
                        <f:facet name="header">
                            <h:outputText value="Nombre"/>
                        </f:facet>
                    </p:column>
                    <p:column style="width: 40%">
                        <h:outputText value="#{currentRow.curp}"/>
                        <f:facet name="header">
                            <h:outputText value="CURP"/>
                        </f:facet>
                    </p:column> 
                    <p:column style="width: 3%" rendered="#{proveedorAdminBean.editarProveedor}">
                        <p:commandLink 
                            styleClass="btn btn-info btn-sm text-white"  
                            action="#{proveedorAdminBean.editContacto(currentRow.idContactoProveedor)}"
                            title="Click aquí para editar mapa..."  process="@this" update="frmDialogCO">
                            <i class="fa fa-edit text-white"></i>
                        </p:commandLink>                                                        
                    </p:column>
                    <p:column style="width: 3%" rendered="#{proveedorAdminBean.editarProveedor}">
                        <p:commandLink 
                            styleClass="btn btn-info btn-sm text-danger "       process="@this" update="frmRevisaProveedor:tabViewProv"
                            action="#{proveedorAdminBean.borrarContacto(currentRow.idContactoProveedor)}"
                            title="Click aquí para editar contacto..." >
                            <i class="fa fa-trash"></i>
                        </p:commandLink>                                                        
                    </p:column>                                        
                </p:dataTable>
            </p:tab>
            <p:tab title="Documentación">
                <ui:fragment rendered="#{proveedorAdminBean.editarProveedor}">
                    <div style="text-align: right;" class="col-12">                                                        
                        <p:commandLink  action="#{proveedorAdminBean.nuevoDocumento(proveedorAdminBean.proveedor.idProveedor)}"
                                        styleClass="btn btn-primary" process="@this" update="frmDoctosProv"
                                        rendered="#{proveedorAdminBean.idProveedor gt 0}">
                            <i class="fa fa-plus text-white"/>
                        </p:commandLink>   
                    </div>
                </ui:fragment>
                <p:dataTable id="dtDoctosProv" value="#{proveedorAdminBean.proveedor.lstDocsProveedor}"
                             var="data" showGridlines="true" size="small"
                             paginator="true"   lazy="true"
                             paginatorPosition="bottom" 
                             rows="5">
                    <p:column headerText="Documento">
                        <h:outputText value="#{data.documento}" />
                    </p:column>
                    <p:column headerText="Oblig.">
                        <h:outputText value="#{data.obligatoria ? 'Si' : 'No'}" />
                    </p:column>
                    <p:column headerText="Recibida"  width="90">
                        <h:outputText value="#{data.fechaEntrega}">
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Inicio"  width="90">
                        <h:outputText value="#{data.inicioVigencia}" >
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Fin"  width="90">
                        <h:outputText value="#{data.finVigencia}" >
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Validado"  width="50"> 
                        <h:outputText value="#{data.valido eq 'True' ? 'Si'  : 'No'}"/>				    
                    </p:column>
                    <p:column >
                        <h:outputLink target="_blank"  
                                      value="/Sia/AbrirArchivo?ZWZ2W=#{data.adjuntoVO.id}&amp;ZWZ3W=#{data.adjuntoVO.uuid}"
                                      rendered="#{data.adjuntoVO.id gt 0}">
                            <span class="text-info" style="font-weight: bold;"> #{data.adjuntoVO.nombre}</span>
                        </h:outputLink>
                        <p:commandLink action="#{proveedorAdminBean.quitarSoloArchivoDocumento(data.id, data.adjuntoVO.id)}"
                                       rendered="#{data.adjuntoVO.id gt 0 and (proveedorAdminBean.editarProveedor)}"
                                       process="@this" update="frmRevisaProveedor:tabViewProv:dtDoctosProv">
                            <i class="fa fa-trash"/>
                        </p:commandLink>
                    </p:column>
                    <p:column rendered="#{proveedorAdminBean.editarProveedor}" width="50">
                        <p:commandLink  rendered="#{data.adjuntoVO.id eq 0}"
                                        action="#{proveedorAdminBean.agregarArchivoDocto(data.id)}"
                                        process="@this" update="frmArchivo">
                            <i class="fa fa-upload"/>
                        </p:commandLink>
                    </p:column>
                    <p:column rendered="#{proveedorAdminBean.editarProveedor}" width="50">
                        <p:commandLink action="#{proveedorAdminBean.agregarArchivoDocumento(data.id)}"
                                       process="@this" update="frmArchivoDoctoProvPRO">
                            <i class="fa fa-edit"/>
                        </p:commandLink>
                    </p:column>
                    <p:column rendered="#{proveedorAdminBean.editarProveedor}" width="50">
                        <p:commandLink action="#{proveedorAdminBean.quitarArchivoDocumento(data.id)}"
                                       process="@this" update="frmRevisaProveedor:tabViewProv:dtDoctosProv">
                            <i class="fa fa-trash"/>
                        </p:commandLink>
                    </p:column>                                
                </p:dataTable>
            </p:tab>
        </p:tabView>
    </h:form>
</ui:composition>