<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core">
    <!-- Navigation -->
    <h:form id="frmmenu" class="navbar-nav">
        <ul class="navbar-nav">
            <li class="nav-item">
                <p:commandLink action="/principal.xhtml?faces-redirect=true"  
                               class="nav-link">
                    Principal
                </p:commandLink>
            </li>
            <li class="nav-item">
                <p:commandLink action="/vistas/compra/cartaIntencion.xhtml?faces-redirect=true" class="nav-link">
                    Cartas Intención
                </p:commandLink>
            </li>
            <li  class="nav-item dropdown">
                <a id="dropdownSubMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="nav-link dropdown-toggle">
                    Contactos
                    <span class="caret"></span></a>
                <ul aria-labelledby="dropdownSubMenu1" class="dropdown-menu border-0 shadow">
                    <li class="nav-item">                             
                        <p:commandLink action="/vistas/notificaciones.xhtml?faces-redirect=true" >
                            Notifaciones
                        </p:commandLink>
                    </li>
                </ul>
            </li>
            <li class="nav-item">
                <p:commandLink action="/vistas/documentacion.xhtml?faces-redirect=true" class="nav-link">
                    Documentación
                </p:commandLink>
            </li>
            <li class="nav-item dropdown">
                <a data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="nav-item dropdown-toggle nav-link">Contratos
                    <span class="caret"></span></a>
                <ul  class="dropdown-menu border-0 shadow"> 
                    <li class="nav-item">
                        <p:commandLink action="/vistas/contratosActivos.xhtml?faces-redirect=true" class="nav-link">
                            Contratos activos
                        </p:commandLink>
                    </li>
                    <li class="nav-item">
                        <p:commandLink action="/vistas/exhortos.xhtml?faces-redirect=true" class="nav-link" >
                            Exhortos
                        </p:commandLink>
                    </li>
                    <li class="nav-item">
                        <p:commandLink action="/vistas/finiquitos.xhtml?faces-redirect=true" class="nav-link">
                            Finiquitos
                        </p:commandLink>
                    </li>
                    <li class="nav-item">
                        <p:commandLink action="/vistas/procesoFiniquito.xhtml?faces-redirect=true" class="nav-link">
                            Proceso de finiquito
                        </p:commandLink>
                    </li>
                </ul>
            </li>

            <li class="dropdown">
                <a  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="nav-link dropdown-toggle">
                    Manual de Usuario
                    <span class="caret"></span></a>
                <ul  class="dropdown-menu border-0 shadow"> 
                    <li class="nav-item">
                        <h:outputLink                                         
                            value="/Proveedor/AbrirArchivo?ZWZ2W=1&amp;ZWZ3W=fe07c42a-f535-4989-82d6-226712ff94e3" 
                            target="_blank">
                            Manual
                        </h:outputLink>
                    </li>
                    <li class="nav-item">
                        <h:outputLink 
                            value="/Proveedor/AbrirArchivo?ZWZ2W=2&amp;ZWZ3W=9164c032-aa83-41b0-a525-0da1a87a158b" 
                            target="_blank">
                            Preguntas frecuentes
                        </h:outputLink>
                    </li>
                </ul>
            </li>
        </ul>
        <ul class="navbar-nav ml-auto">
            <li class="nav-item">
                <strong><h:outputLabel value="#{sesion.proveedorVo.nombre}"/></strong>
            </li>
            <li class="nav-item">
                <p:commandLink title="Formas pendientes de procesar #{sesion.formasPendientes}" 
                               action="/vistas/finiquitos.xhtml?faces-redirect=true"
                               rendered="#{sesion.formasPendientes gt 0}">
                    <span class="fa fa-bell fa-2x text-danger"/>
                </p:commandLink>

            </li>
            <li class="nav-item">
                <p:commandLink title="Principal" action="/principal.xhtml?faces-redirect=true">
                    <i class="fa fa-home fa-2x"></i>
                </p:commandLink>

            </li>
            <li class="nav-item">
                <p:commandLink title="Cambiar la clave" onclick="$(dialogoCambiarClave).modal('show');"
                               process="@this" update="frmCambioClave">
                    <i class="fa fa-key fa-2x"></i>
                </p:commandLink>            
            </li>
            <li class="nav-item">
                <p:commandLink title="Salir del sistema" 
                               id="linkLogout"
                               action="#{sesion.cerrarSesion}" ajax="false">
                    <i class="fa fa-sign fa-fw fa-2x text-danger"></i>
                </p:commandLink>

            </li>
        </ul>
    </h:form>
    <!-- Cambio de contrseña-->
    <div class="modal fade" id="dialogoCambiarClave" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Cambiar contraseña</h4>
                </div>
                <h:form id="frmCambioClave">
                    <div class="modal-body">
                        <div class="row">
                            <div class="input-group">
                                <div class="form-group-addon col-4">
                                    <label>Contraseña *</label>
                                </div>
                                <h:inputSecret id="claveInp" styleClass="form-control" 
                                               value="#{sesion.clave}" 
                                               required="true"
                                               requiredMessage="Por favor introduzca la contraseña"/>
                                <h:messages  for="claveInp" styleClass="text-danger"/>
                            </div>
                            <div class="input-group">
                                <div class="form-group-addon  col-4">
                                    <label>Confirmar contraseña *</label>
                                </div>
                                <h:inputSecret styleClass="form-control" 
                                               value="#{sesion.claveNueva}" 
                                               required="true"
                                               id="claveRep"
                                               requiredMessage="Por favor introduzca la contraseña"/>
                                <h:messages for="claveRep"  styleClass="text-danger"/>
                            </div>  
                        </div>
                        <div>
                            <h:outputLabel id="lblMensajeClave" value="#{sesion.mensajeClave}" styleClass="text-danger"/>
                        </div>

                    </div>
                    <div class="modal-footer">
                        <p:commandLink value="Cerrar" styleClass="btn btn-default"
                                       immediate="true"
                                       action="#{sesion.cerrarCambioClave}"/>                                       
                        <p:commandLink id="btnGuardarclave" value="Guadar" styleClass="btn btn-primary text-white" action="#{sesion.cambioClave}"
                                       process="@form" update="@all frmCambioClave">
                        </p:commandLink>
                    </div>
                </h:form>
            </div>
        </div>
    </div>
    <!-- Soportes-->
    <div class="modal fade" id="dialogoAyuda" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Soporte del sistema</h4>
                </div>
                <div class="modal-body">
                    <p>Enviar al correo:</p>
                    <ul>
                        <li>
                            <b>soportesia@ihsa.mx</b>
                        </li>
                    </ul>
                </div>
                <div class="modal-footer">
                    <h:form>
                        <p:commandLink value="Cerrar" styleClass="btn btn-default" onclick="$(dialogoAyuda).modal('hide');"/>
                    </h:form>
                </div>
            </div>
        </div>
    </div>
</ui:composition>