<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      
      >

    <body>
        <ui:composition template="./../templates/template.xhtml">
            <ui:define name="tituloPagina">
                Notas de OC/S
            </ui:define>
            <ui:define name="contenido">
                <h:form id="frmNoticiaOCS" rendered="#{not empty usuarioBean.usuarioConectado}">
                    <ui:include src="../Orden/fragmento/noticia.xhtml"/>
                </h:form>
                <!-- Modal Panel Popup Crear Respuesta -->
                <!--h:form>
                   
                    <p:dialog 
                        autoCentre="#{popupRespuestaNotaBean.autoCentre}"
                        draggable="false" modal="true" styleClass="corePopup"
                        visible="#{popupRespuestaNotaBean.modalRendered}">
                        <f:facet name="header">
                            <h:panelGroup styleClass="popupHeaderWrapper">
                                <p:panel  >
                                    <h:outputText styleClass="popupHeaderText" value="Crear Respuesta"/>
                                </p:panel>
                            </h:panelGroup>
                        </f:facet>
                        <f:facet name="body">
                            <h:panelGroup styleClass="popupBody" >
                                <p:panel >
                                    <h:outputText value="Titulo:"/>
                                    <h:inputText disabled="true" size="70" value="#{notaOrdenBean.notaActual.titulo}"/>
                                    <h:outputText value=""/>
                                    <h:outputText value="Nota:"/>
                                    <h:inputText disabled="true" size="70" value="#{notaOrdenBean.notaActual.mensaje}"/>
                                    <h:outputText value=""/>
                                    <h:outputText style="color: rgb(0, 0, 51); font-family: Arial,Helvetica,sans-serif; font-size: 18px; font-weight: bold" value="Titulo Respuesta:"/>
                                    <h:inputText id="tituloResp" required="true" size="70" value="#{notaOrdenBean.respuestaActual.titulo}"/>
                                    <h:message errorClass="errorMessage" fatalClass="fatalMessage" for="tituloResp" id="msjTituloResp" infoClass="infoMessage"
                                                 style="color: rgb(204, 0, 0);width: 214px" warnClass="warnMessage"/>
                                    <h:outputText style="color: rgb(0, 0, 51); font-family: Arial,Helvetica,sans-serif; font-size: 18px; font-weight: bold" value="Respuesta:"/>
                                    <h:inputTextarea cols="100" id="respuesta" required="true" rows="5" value="#{notaOrdenBean.respuestaActual.mensaje}"/>
                                    <h:message errorClass="errorMessage" fatalClass="fatalMessage" for="respuesta" id="msjRespuesta" infoClass="infoMessage"
                                                 style="color: rgb(204, 0, 0);width: 214px" warnClass="warnMessage"/>
                                </p:panel>
                                <center>
                                    <p:panel >
                                        <p:commandButton action="#{notaOrdenBean.completarCreacionRespuesta(actionEvent)}" value="Aceptar"
                                                           styleClass="confirmar"/>
                                        <p:commandButton action="#{popupRespuestaNotaBean.toggleModal(event)}" title="Cerrar ventana..." value="Cancelar"
                                                           styleClass="cancelar"/>
                                    </p:panel>
                                </center>
                            </h:panelGroup>
                        </f:facet>
                    </p:dialog>
                </h:form-->
                <!-- Termina Popup Crear respuesta-->
                <!--h:form id="form1">
                    <p:panel id="panelPrincipal" >
                        <h:outputText value="Selecione una nota de la lista para ver sus Respuestas por favor..."/>
                        <p:dataTable size="small" stripedRows="true" showGridlines="true"  value="#{notaOrdenBean.notasPorInvitado}" var="currentRow" >
                            <p:column>
                                <h:outputText value="#{currentRow['id']}"/>
                                <f:facet name="header">
                                    <h:outputText value="NÃºm."/>
                                </f:facet>
                            </p:column>
                            <p:column>
                                <h:outputText value="#{currentRow['consecutivo']}"/>
                                <f:facet name="header">
                                    <h:outputText value="Orden"/>
                                </f:facet>
                            </p:column>
                            <p:column>
                                <h:outputText value="#{currentRow['fechaGenero']}">
                                    <f:convertDateTime dateStyle="default" type="date"/>
                                </h:outputText>
                                <f:facet name="header">
                                    <h:outputText value="Fecha"/>
                                </f:facet>
                            </p:column>
                            <p:column>
                                <h:outputText value="#{currentRow['horaGenero']}">
                                    <f:convertDateTime pattern="hh:mm" timeStyle="default" type="time"/>
                                </h:outputText>
                                <f:facet name="header">
                                    <h:outputText value="Hora"/>
                                </f:facet>
                            </p:column>
                            <p:column>
                                <h:outputText value="#{currentRow['autor']}"/>
                                <f:facet name="header">
                                    <h:outputText value="Autor"/>
                                </f:facet>
                            </p:column>
                            <p:column>
                                <h:outputText value="#{currentRow['titulo']}"/>
                                <f:facet name="header">
                                    <h:outputText value="Titulo"/>
                                </f:facet>
                            </p:column>
                            <p:column>
                                <h:inputTextarea cols="80"  readonly="true" rows="2" value="#{currentRow['mensaje']}"/>
                                <f:facet name="header">
                                    <h:outputText value="Nota"/>
                                </f:facet>
                            </p:column>
                            <p:column>
                                <h:outputText value="#{currentRow['respuestas']}"/>
                                <f:facet name="header">
                                    <h:outputText value="Respuestas"/>
                                </f:facet>
                            </p:column>
                            <p:column>
                                <h:outputText value="#{currentRow['ultRespuesta']}">
                                    <f:convertDateTime dateStyle="default" type="date"/>
                                </h:outputText>
                                <f:facet name="header">
                                    <h:outputText value="Ult. Respuesta"/>
                                </f:facet>
                            </p:column>
                            <p:column>
                                <p:commandLink value="Responder" styleClass="link"  action="#{notaOrdenBean.crearRespuesta(actionEvent)}" title="Clic aqui para Crear una Respuesta..."/>
                            </p:column>
                            <p:column>
                                <p:commandLink value="Seleccionar" styleClass="link" action="#{notaOrdenBean.seleccionarNota(actionEvent)}" title="Clic aqui para ver Respuestas..."/>
                            </p:column>

                            <p:column>

                            </p:column>
                        </p:dataTable>
                        <hr align="LEFT" size="1" width="300" color="Red" />
                        <h:outputText value="Respuestas de la Nota: #{notaOrdenBean.notaActual.id}" style="font-weight: bold"/>
                        <hr align="LEFT" size="1" width="300" color="Red" />
                        <p:dataTable size="small" stripedRows="true" showGridlines="true"  value="#{notaOrdenBean.respuestas}" var="currentRow" >
                            <p:column>
                                <h:outputText value="#{currentRow['fechaGenero']}">
                                    <f:convertDateTime dateStyle="default" type="date"/>
                                </h:outputText>
                                <f:facet name="header">
                                    <h:outputText value="Fecha"/>
                                </f:facet>
                            </p:column>
                            <p:column>
                                <h:outputText value="#{currentRow['horaGenero']}">
                                    <f:convertDateTime pattern="hh:mm" timeStyle="default" type="time"/>
                                </h:outputText>
                                <f:facet name="header">
                                    <h:outputText value="Hora"/>
                                </f:facet>
                            </p:column>
                            <p:column>
                                <h:outputText value="#{currentRow['autor']}"/>
                                <f:facet name="header">
                                    <h:outputText value="Autor"/>
                                </f:facet>
                            </p:column>
                            <p:column>
                                <h:outputText value="#{currentRow['titulo']}"/>
                                <f:facet name="header">
                                    <h:outputText value="Titulo"/>
                                </f:facet>
                            </p:column>
                            <p:column>
                                <h:inputTextarea cols="120"  readonly="true" rows="2" value="#{currentRow['mensaje']}"/>
                                <f:facet name="header">
                                    <h:outputText value="Respuesta"/>
                                </f:facet>
                            </p:column>
                        </p:dataTable>
                    </p:panel>
                </h:form-->

                <ui:include src="/vistas/SiaWeb/Orden/fragmento/popUpNoticia.xhtml"/>
            </ui:define>

        </ui:composition>

    </body>
</html>
