<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html">

    <style>
        .table {
            margin-bottom: 5px;            
        }
        .mm{
            padding-left: 5px;
            padding-right: 5px;
        }
        .iceOutLbl {    
            font-weight: normal;
        }        
        .form-horizontal .form-group  {
            margin-left: 0px;
            margin-right: 0px;
        }        
    </style>   

    <div class="row" style="margin-top: 15px;">                    
        <div class="col-lg-12 col-xs-12">
            <div scope="colgroup" colspan="7" class="iceDatTblHdr tableHdr table-stripedHdr" style="font-weight: normal;"><span>Inf. de la OC/S</span></div>
            <div class="input-group panel panel-default" style="border: white; border-style: solid; border-width: 1px;">
                <div class="form-group col-lg-12 col-xs-12" style="margin-top: 10px; border: white; border-bottom: #eee; border-top: white;  border-style: solid; border-width: 2px;">
                    <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                        <strong><h:outputLabel styleClass="control-label"   value="Compañia: "/></strong>
                    </div>
                    <div class="col-lg-4 col-xs-12">
                        <h:outputText styleClass="control-label"  value="#{ordenBean.ordenActual.compania.nombre}"/>
                    </div>

                    <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                        <strong><h:outputLabel styleClass="control-label" value="Estatus:"/></strong>
                    </div>
                    <div class="col-lg-4 col-xs-12">
                        <h:outputText styleClass="control-label" value="#{ordenBean.ordenActual.autorizacionesOrden.estatus.nombre}"/>
                    </div>
                </div>
                <div class="form-group col-lg-12 col-xs-12" style="border: white; border-bottom: #eee; border-top: white;  border-style: solid; border-width: 2px;">
                    <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                        <strong><h:outputLabel styleClass="control-label"   value="Bloque:"/></strong>
                    </div>
                    <div class="col-lg-4 col-xs-12">
                        <h:outputText styleClass="control-label"  value="#{ordenBean.ordenActual.apCampo.nombre}"/>
                    </div>

                    <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                        <strong><h:outputLabel styleClass="control-label" value="Destino:"/></strong>
                    </div>
                    <div class="col-lg-4 col-xs-12">                        
                        <h:outputText styleClass="control-label" value="#{ordenBean.ordenActual.destino}"/>
                    </div>
                </div>
                <div class="form-group col-lg-12 col-xs-12" style="border: white; border-bottom: #eee; border-top: white;  border-style: solid; border-width: 2px;">
                    <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                        <strong><h:outputLabel styleClass="control-label"   value="Pago:"/></strong>
                    </div>
                    <div class="col-lg-4 col-xs-12">
                        <h:outputText styleClass="control-label"  value="#{ordenBean.ordenActual.ocTerminoPago.nombre}"/>
                    </div>

                    <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                        <strong><h:outputLabel styleClass="control-label" value="Elaboro:"/></strong>
                    </div>
                    <div class="col-lg-4 col-xs-12">
                        <h:outputText styleClass="control-label" value="#{ordenBean.ordenActual.analista.nombre}"/>
                    </div>
                </div>
                <div class="form-group col-lg-12 col-xs-12" style="border: white; border-bottom: #eee; border-top: white;  border-style: solid; border-width: 2px;">
                    <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                        <strong><h:outputLabel styleClass="control-label"   value="Solicitó:"/></strong>
                    </div>
                    <div class="col-lg-4 col-xs-12">
                        <h:outputText styleClass="control-label"   value="#{ordenBean.ordenActual.gerencia.nombre}"/>
                    </div>

                    <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                        <strong><h:outputLabel styleClass="control-label" value="Proveedor:"/></strong>
                    </div>
                    <div class="col-lg-4 col-xs-12">                        
                        <h:outputText styleClass="control-label" value="#{ordenBean.ordenActual.proveedor.nombre}"/>
                    </div>
                </div>
                <div class="form-group col-lg-12 col-xs-12" style="border: white; border-bottom: #eee; border-top: white;  border-style: solid; border-width: 2px;">
                    <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                        <strong><h:outputLabel styleClass="control-label"   value="Responsable:"/></strong>
                    </div>
                    <div class="col-lg-4 col-xs-12">
                        <h:outputText styleClass="control-label"   value="#{ordenBean.ordenActual.responsableGerencia.nombre}"/>
                    </div>

                    <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                        <strong><h:outputLabel styleClass="control-label" value="Contrato Marco:"/></strong>
                    </div>
                    <div class="col-lg-4 col-xs-12">
                        <h:panelGroup  rendered="#{ordenBean.ordenActual.contrato ne 'OCS_SIN_CONTRATO'}">
                            <p:commandLink value="#{ordenBean.ordenActual.contrato}" action="#{ordenBean.llenarListaConvenio(event)}"
                                           onclick="$(dialogoContratos).modal('show');"
                                           style="color: blue;">
                                <f:param name="codigo" value="#{ordenBean.ordenActual.contrato}"/>
                            </p:commandLink>
                        </h:panelGroup>
                        <h:panelGroup rendered="#{ordenBean.ordenActual.contrato eq 'OCS_SIN_CONTRATO'}">
                            <h:outputLabel value="#{ordenBean.ordenActual.contrato}"/>
                        </h:panelGroup>
                        <h:outputText styleClass="control-label" value="#{data.ordenActual.contrato}"/>
                    </div>
                </div>
                <div class="form-group col-lg-12 col-xs-12" style="border: white; border-bottom: #eee; border-top: white;  border-style: solid; border-width: 2px;">
                    <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                        <strong><h:outputLabel styleClass="control-label"   value="OT:"/></strong>
                    </div>
                    <div class="col-lg-4 col-xs-12">
                        <ui:fragment rendered="#{ordenBean.ordenActual.multiproyecto eq 'False'}">
                            <h:outputText styleClass="control-label"  value="#{ordenBean.ordenActual.proyectoOt.nombre}"/>
                        </ui:fragment>
                        <ui:fragment rendered="#{ordenBean.ordenActual.multiproyecto eq 'True'}">
                            <h:outputText styleClass="control-label"  value="Multiproyecto OT"/>
                        </ui:fragment>
                    </div>

                    <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                        <strong><h:outputLabel styleClass="control-label" value="Revisa:"/></strong>
                    </div>
                    <div class="col-lg-4 col-xs-12">
                        <h:outputText styleClass="control-label" value="#{ordenBean.ordenActual.autorizacionesOrden.autorizaMpg.nombre}"/>
                    </div>
                </div>
                <div class="form-group col-lg-12 col-xs-12" style="border: white; border-bottom: #eee; border-top: white;  border-style: solid; border-width: 2px;">
                    <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                        <strong><h:outputLabel styleClass="control-label"    value="Destino:"/></strong>
                    </div>
                    <div class="col-lg-4 col-xs-12">
                        <h:outputText styleClass="control-label"  value="#{ordenBean.ordenActual.destino}"/>
                    </div>                    
                    <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                        <strong><h:outputLabel styleClass="control-label" value="Tipo de orden:"/></strong>
                    </div>
                    <ui:fragment rendered="#{ordenBean.ordenActual.tipo eq 'PS'}">
                        <div class="col-lg-4 col-xs-12">
                            <h:outputText styleClass="control-label" value="Producto / Servicio"/>
                        </div>
                    </ui:fragment>
                    <ui:fragment rendered="#{ordenBean.ordenActual.tipo eq 'AF'}">
                        <div class="col-lg-4 col-xs-12">
                            <h:outputText styleClass="control-label" value="Activo Fijo"/>
                        </div>
                    </ui:fragment>
                    <ui:fragment rendered="#{ordenBean.ordenActual.tipo eq 'AI'}">
                        <div class="col-lg-2 col-xs-12">
                            <h:outputText styleClass="control-label" value="Antes de integración" />
                        </div>
                    </ui:fragment>                    
                </div>
                <ui:fragment rendered="#{usuarioBean.usuarioConectado.apCampo.cartaIntencion eq true}">
                    <div class="form-group col-lg-12 col-xs-12" style="border: white; border-bottom: #eee; border-top: white;  border-style: solid; border-width: 2px;">
                        <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                            <strong><h:outputLabel styleClass="control-label"    value="REPSE:"/></strong>
                        </div>
                        <div class="col-lg-4 col-xs-12">
                            <h:outputText styleClass="control-label"  value="#{(ordenBean.ordenActual.repse eq true) ? 'Si' : 'No'} "/>
                        </div>          
                    </div>
                </ui:fragment>                
            </div>
            <div class="col-lg-12 col-xs-12 input-group panel panel-default" style="border: white; border-style: solid; border-width: 1px;">
                <div class="form-group col-lg-12 col-xs-12" style="margin-top: 10px; border: white; border-bottom: #eee; border-top: white;  border-style: solid; border-width: 2px;">
                    <div class="col-lg-3 col-xs-12" style="text-align: left;" >
                        <strong><h:outputText styleClass="control-label"    value="Observ. Requisición:"/></strong>
                    </div>
                    <div class="col-lg-9 col-xs-12">
                        <h:outputText styleClass="control-label" rendered="#{ordenBean.ordenActual.requisicion.observaciones != null}" value="#{ordenBean.ordenActual.requisicion.observaciones}"/>
                        <h:outputText styleClass="control-label" rendered="#{ordenBean.ordenActual.requisicion.observaciones == null}" value=" "/>
                    </div>  
                </div>
                <div class="form-group col-lg-12 col-xs-12" style="border: white; border-bottom: #eee; border-top: white;  border-style: solid; border-width: 2px;">
                    <div class="col-lg-3 col-xs-12" style="text-align: left;" >
                        <strong><h:outputText styleClass="control-label"   value="Observ. proveedor:"/></strong>
                    </div>
                    <div class="col-lg-9 col-xs-12">
                        <h:outputText styleClass="control-label" rendered="#{ordenBean.ordenActual.nota != null}"  value="#{ordenBean.ordenActual.nota}"/>
                        <h:outputText styleClass="control-label" rendered="#{ordenBean.ordenActual.nota == null}"  
                                      style="color: #eee;"
                                      value="_"/>
                    </div>
                </div>                    
                <div class="form-group col-lg-12 col-xs-12" style="border: white; border-bottom: #eee; border-top: white;  border-style: solid; border-width: 2px;">
                    <div class="col-lg-3 col-xs-12" style="text-align: left;" >
                        <strong><h:outputText styleClass="control-label"   value="Coment. Internos:"/></strong>
                    </div>
                    <div class="col-lg-9 col-xs-12">
                        <h:outputText styleClass="control-label" rendered="#{ordenBean.ordenActual.observaciones != null}" value="#{ordenBean.ordenActual.observaciones}"/>
                        <h:outputText styleClass="control-label" rendered="#{ordenBean.ordenActual.observaciones == null}" 
                                      style="color: #eee;"
                                      value="_"/>
                    </div>
                </div>
            </div>
        </div>    
    </div>
    <div class="row">  
        <div class="col-lg-12">
            <div class="table table-responsive">
                <ui:include src="../../Orden/fragmento/itemsOrden.xhtml"/>
            </div>
            <div class="table table-responsive">
                <div class="col-lg-12">
                    <div class="col-lg-12">
                        <div class="row">
                            <div class="col-lg-12 col-sm-12 col-xs-12 mm">
                                <div class="col-lg-6"></div>
                                <div class="col-lg-6">
                                    <div class="col-lg-8 col-sm-12 col-xs-12" style="text-align: right;">
                                        <strong><h:outputLabel styleClass="control-label" value="SubTotal:"/></strong>
                                    </div>
                                    <div class="col-lg-4 col-sm-12 col-xs-12 mm" style="text-align: right;">
                                        <h:outputLabel value="#{ordenBean.ordenActual.subtotal}">
                                            <f:convertNumber currencySymbol="$" groupingUsed="true" maxFractionDigits="2" type="currency"/>
                                        </h:outputLabel>
                                    </div>

                                </div>
                            </div>
                            <div class="col-lg-12 col-sm-12 col-xs-12 mm">
                                <div class="col-lg-6"></div>
                                <div class="col-lg-6">
                                    <div class="col-lg-8 col-sm-12 col-xs-12" style="text-align: right;">
                                        <strong><h:outputLabel styleClass="control-label" value="IVA:"/></strong>
                                    </div>
                                    <div class="col-lg-4 col-sm-12 col-xs-12 mm" style="text-align: right;">
                                        <h:outputLabel value="#{ordenBean.ordenActual.iva}">
                                            <f:convertNumber currencySymbol="$" groupingUsed="true" maxFractionDigits="2" type="currency"/>
                                        </h:outputLabel>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-12 col-sm-12 col-xs-12 mm">
                                <div class="col-lg-6"></div>
                                <div class="col-lg-6">
                                    <div class="col-lg-8 col-sm-12 col-xs-12" style="text-align: right;">
                                        <strong><h:outputLabel styleClass="control-label" value="Descuento:"/></strong>
                                    </div>
                                    <div class="col-lg-4 col-sm-12 col-xs-12 mm" style="text-align: right;">
                                        <h:outputLabel value="#{ordenBean.ordenActual.descuento}">
                                            <f:convertNumber currencySymbol="$" groupingUsed="true" maxFractionDigits="2" type="currency"/>
                                        </h:outputLabel>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-12 col-sm-12 col-xs-12 mm">
                                <div class="col-lg-6"></div>
                                <div class="col-lg-6">
                                    <div class="col-lg-8 col-sm-12 col-xs-12" style="text-align: right;">
                                        <strong><h:outputLabel styleClass="control-label" value="Total:"/></strong>
                                    </div>
                                    <div class="col-lg-4 col-sm-12 col-xs-12 mm" style="text-align: right;">
                                        <h:outputLabel value="#{ordenBean.ordenActual.total}">
                                            <f:convertNumber currencySymbol="$" groupingUsed="true" maxFractionDigits="2" type="currency"/>
                                        </h:outputLabel>
                                    </div>  
                                </div>
                            </div>
                            <div class="col-lg-12 col-sm-12 col-xs-12 mm">
                                <div class="col-lg-6"></div>                                
                                <div class="col-lg-6">
                                    <div class="col-lg-8 col-sm-8 col-xs-8" style="text-align: right;">
                                        <strong><h:outputLabel styleClass="control-label" value="Móneda:"/></strong>
                                    </div>
                                    <div class="col-lg-4 col-sm-4 col-xs-4 mm" style="text-align: right;">
                                        <h:outputLabel value="#{ordenBean.ordenActual.moneda.siglas}"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>   
    <div class="row">  
        <div class="col-lg-12">
            <div class="table table-responsive">
                <p:dataTable size="small" stripedRows="true" showGridlines="true"  value="#{ordenBean.listaItems}" 
                               var="data" styleClass="table table-striped" style="margin-bottom: 5px;">
                    <f:facet name="header"><h:outputText value="Decripción adicional por partida: #{ordenBean.ordenActual.consecutivo}"/></f:facet>
                    <p:column>                        
                        <f:facet name="header">
                            <h:outputText value="Partida"/>
                        </f:facet>
                        #{data.artNumeroParte}
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Descripción"/>
                        </f:facet>
                        <h:outputText value="#{data.observaciones}"/>

                    </p:column>
                </p:dataTable>                
            </div>
        </div>
    </div>   
</ui:composition>