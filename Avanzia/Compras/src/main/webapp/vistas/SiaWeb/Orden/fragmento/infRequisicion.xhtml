<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html">

    <script>
        $(function () {
            $("#tabsReq").tabs({active: 0});
        });
    </script>    
    <style>   
     .form-horizontal .form-group  {
            margin-left: 0px;
            margin-right: 0px;
        }
    </style>   
    <div class="row" style="margin-top: 15px;">                    
        <div class="col-lg-12 col-xs-12">
            <div scope="colgroup" colspan="7" class="iceDatTblHdr tableHdr table-stripedHdr" style="font-weight: normal;"><span>Requisición</span></div>
            <div class="input-group panel panel-default" style="border: white; border-style: solid; border-width: 1px;">
                <div class="form-group col-lg-12 col-xs-12" style="margin-top: 10px; border: white; border-bottom: #eee; border-top: white;  border-style: solid; border-width: 2px;">
                    <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                        <h:outputLabel styleClass="control-label" value="Requisición:"/>                        
                    </div>
                    <div class="col-lg-4 col-xs-12">
                        <h:outputText styleClass="control-label" value="#{ordenBean.ordenActual.requisicion.consecutivo}" style="text-align: left;"/>                    
                    </div>                
                    <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                        <h:outputLabel styleClass="control-label" value="Status:"/>
                    </div>
                    <div class="col-lg-4 col-xs-12">
                        <h:outputText styleClass="control-label"   value="#{ordenBean.ordenActual.requisicion.estatus.nombre}"/>
                    </div>
                </div>
                <div class="form-group col-lg-12 col-xs-12" style="margin-top: 10px; border: white; border-bottom: #eee; border-top: white;  border-style: solid; border-width: 2px;">
                    <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                        <h:outputLabel styleClass="control-label" value="Prioridad:"/>
                    </div>
                    <div class="col-lg-4 col-xs-12">
                        <h:outputText styleClass="control-label" value="#{ordenBean.ordenActual.requisicion.prioridad.nombre}"/>                    
                    </div>                
                    <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                        <h:outputLabel styleClass="control-label"  value="Proveedor:"/>
                    </div>
                    <div class="col-lg-4 col-xs-12">
                        <h:outputText styleClass="control-label"    value="#{ordenBean.ordenActual.requisicion.proveedor}"/>
                    </div>
                </div>
                <div class="form-group col-lg-12 col-xs-12" style="margin-top: 10px; border: white; border-bottom: #eee; border-top: white;  border-style: solid; border-width: 2px;">
                    <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                        <h:outputLabel styleClass="control-label" value="Requerida:"/>                    
                    </div>
                    <div class="col-lg-4 col-xs-12">
                        <h:outputText  styleClass="control-label" value="#{ordenBean.ordenActual.requisicion.fechaRequerida}">
                            <f:convertDateTime dateStyle="default" type="date"/>
                        </h:outputText>
                    </div>

                    <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                        <h:outputLabel styleClass="control-label" value="Contrato:"/>
                    </div>
                    <div class="col-lg-4 col-xs-12">
                        <h:outputText  styleClass="control-label"  value="#{ordenBean.ordenActual.requisicion.contrato}"/>
                    </div>
                </div>
                <div class="form-group col-lg-12 col-xs-12" style="margin-top: 10px; border: white; border-bottom: #eee; border-top: white;  border-style: solid; border-width: 2px;">
                    <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                        <h:outputLabel styleClass="control-label" value="Dpto Sol:"/>
                    </div>
                    <div class="col-lg-4 col-xs-12">
                        <h:outputText styleClass="control-label" value="#{ordenBean.ordenActual.requisicion.gerencia.nombre}"/>
                    </div>                
                    <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                        <h:outputLabel styleClass="control-label" value="Elaboro:"/>
                    </div>
                    <div class="col-lg-4 col-xs-12">
                        <h:outputText  styleClass="control-label"   value="#{ordenBean.ordenActual.requisicion.solicita.nombre}"/>
                    </div>
                </div>
                <div class="form-group col-lg-12 col-xs-12" style="margin-top: 10px; border: white; border-bottom: #eee; border-top: white;  border-style: solid; border-width: 2px;">
                    <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                        <h:outputLabel styleClass="control-label" value="ProyectoOT:"/>
                    </div>
                    <div class="col-lg-4 col-xs-12">
                        <h:outputText styleClass="control-label" value="#{ordenBean.ordenActual.requisicion.proyectoOt.nombre}"/>
                    </div>                
                    <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                        <h:outputLabel styleClass="control-label"  value="Destino:"/>
                    </div>
                    <div class="col-lg-4 col-xs-12">
                        <h:outputText styleClass="control-label"    value="#{ordenBean.ordenActual.requisicion.lugarEntrega}"/>
                    </div>
                </div>
                <ui:fragment rendered="#{ordenBean.ordenActual.ocUnidadCosto ne null}">                  
                    <div class="form-group col-lg-12 col-xs-12" style="margin-top: 10px; border: white; border-bottom: #eee; border-top: white;  border-style: solid; border-width: 2px;">
                        <div class="col-lg-2 col-xs-12" style="text-align: left;" >
                            <h:outputLabel styleClass="control-label" value="Tipo tarea:"/>
                        </div>
                        <div class="col-lg-4 col-xs-12">
                            <h:outputText 
                                styleClass="control-label" 
                                value="#{ordenBean.ordenActual.requisicion.ocUnidadCosto.nombre}" 
                                />
                        </div>
                        <div class="col-lg-6 col-xs-12">                            
                        </div>
                    </div>   
                </ui:fragment>
            </div>
            <div class="col-lg-12 col-xs-12 input-group panel panel-default" style="border: white; border-style: solid; border-width: 1px;">
                <div class="form-group col-lg-12 col-xs-12" style="margin-top: 10px; border: white; border-bottom: #eee; border-top: white;  border-style: solid; border-width: 2px;">
                    <div class="col-lg-3" style="text-align: left;" >
                        <strong><h:outputText styleClass="control-label"    value="Observación:"/></strong>
                    </div>
                    <div class="col-lg-9 col-xs-12">
                        <h:outputText styleClass="control-label" rendered="#{ordenBean.ordenActual.requisicion.observaciones != null}" value="#{ordenBean.ordenActual.requisicion.observaciones}"/>
                        <h:outputText styleClass="control-label" rendered="#{ordenBean.ordenActual.requisicion.observaciones == null}" value=" "/>
                    </div>    
                </div>
            </div>
        </div>
    </div>
    <div id="tabsReq">
        <ul>
            <li><a href="#itemsReq">Ítems requisición</a></li>
            <li><a href="#Autorizaciones" >Autorizaciones</a></li>                        
            <li><a href="#ETSReq">ETS Requisición</a></li>
            <li><a href="#DevolucionesReq">Devolución</a></li>
            <li><a href="#canceladaReq">Requisición cancelada</a></li>
        </ul>
        <div id="itemsReq" class="textoIzquierda">
            <div class="container-fluid">
                <div class="table table-responsive">
                    <p:dataTable size="small" stripedRows="true" showGridlines="true"  
                                 value="#{ordenBean.itemsRequisicion}" var="currentRow" styleClass="table table-striped">
                        <f:facet name="header" ><h:outputText value="Items"/></f:facet>
                        <p:column>
                            <h:outputText value="#{currentRow['artNumeroParte']}"/>
                            <f:facet name="header">
                                <h:outputText value="Núm. parte"/>
                            </f:facet>
                        </p:column>
                        <p:column>
                            <h:outputText value="#{currentRow['cantidadSolicitada']}"/>
                            <f:facet name="header">
                                <h:outputText value="Solicitda(s)"/>
                            </f:facet>
                        </p:column>
                        <p:column>
                            <h:outputText value="#{currentRow['cantidadAutorizada']}"/>
                            <f:facet name="header">
                                <h:outputText value="Autorizada(s)"/>
                            </f:facet>
                        </p:column>
                        <p:column>
                            <h:outputText value="#{currentRow['artUnidad']}"/>
                            <f:facet name="header">
                                <h:outputText value="Unidad"/>
                            </f:facet>
                        </p:column>
                        <p:column>
                            <h:outputText  value="#{currentRow['artDescripcion']}"/>
                            <f:facet name="header">
                                <h:outputText value="Descripción"/>
                            </f:facet>
                        </p:column>
                        <p:column>
                            <h:outputText value="#{currentRow['autorizado']  ? 'Si' : 'No'}"/>
                            <f:facet name="header">
                                <h:outputText value="Autorizado"/>
                            </f:facet>
                        </p:column>
                    </p:dataTable>
                </div>                
            </div>
        </div>
        <div id="Autorizaciones" class="textoIzquierda">
            <div class="container-fluid ">
                <div class="card input-group form-control">
                    <div class="form-group col-lg-12 col-xs-12" style="border: white; border-bottom: #eee; border-top: white; border-style: solid; border-width: 2px;">
                        <strong><h:outputText styleClass="col-lg-2 control-label" value="Solicitada el:"/></strong>
                        <div class="col-lg-2" style="text-align: left;">
                            <h:outputText styleClass="control-label"  value="#{ordenBean.ordenActual.requisicion.fechaSolicito}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </div>
                        <strong><h:outputText styleClass="col-lg-1 control-label" value="  hora: "/></strong>
                        <div class="col-lg-2">
                            <h:outputText styleClass="control-label"  value="#{ordenBean.ordenActual.requisicion.horaSolicito}">
                                <f:convertDateTime pattern="hh:mm" timeStyle="default" type="time"/>
                            </h:outputText>
                        </div>
                        <strong><h:outputText styleClass="col-lg-1 control-label" value="Por:"/></strong>
                        <div class="col-lg-4" style="text-align: left;">
                            <h:outputText styleClass="control-label"  value="#{ordenBean.ordenActual.requisicion.solicita.nombre}"/>
                        </div>
                    </div>
                    <ui:fragment rendered="#{ordenBean.ordenActual.requisicion.vistoBueno ne null}">                    
                        <div class="form-group col-lg-12 col-xs-12" style="border: white; border-bottom: #eee; border-top: white; border-style: solid; border-width: 2px;">
                            <strong><h:outputText styleClass="col-lg-2 col-xs-12 control-label" value="Visto Bueno el:"/></strong>
                            <div class="col-lg-2 col-xs-12">
                                <h:outputText styleClass="control-label"  value="#{ordenBean.ordenActual.requisicion.fechaVistoBueno}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </div>
                            <strong><h:outputText styleClass="col-lg-1 col-xs-12 control-label" value=" hora: "/></strong>
                            <div class="col-lg-2 col-xs-12">
                                <h:outputText styleClass="control-label"  value="#{ordenBean.ordenActual.requisicion.horaVistoBueno}">
                                    <f:convertDateTime pattern="hh:mm" timeStyle="default" type="time"/>
                                </h:outputText>
                            </div>
                            <strong><h:outputText styleClass="col-lg-1 col-xs-12 control-label" value="Por:"/></strong>
                            <div class="col-lg-4 col-xs-12">
                                <h:outputText class="control-label"  value="#{ordenBean.ordenActual.requisicion.vistoBueno.nombre}"/>
                            </div>
                        </div>                    
                    </ui:fragment>   
                    <div class="form-group col-lg-12 col-xs-12" style="border: white; border-bottom: #eee; border-top: white; border-style: solid; border-width: 2px;">
                        <strong><h:outputText styleClass="col-lg-2 control-label" value="Revisada el:"/></strong>
                        <div class="col-lg-2" style="text-align: left;">
                            <h:outputText styleClass="control-label"  value="#{ordenBean.ordenActual.requisicion.fechaReviso}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </div>
                        <strong><h:outputText styleClass="col-lg-1 control-label" value="  hora: "/></strong>
                        <div class="col-lg-2">
                            <h:outputText styleClass="control-label"  value="#{ordenBean.ordenActual.requisicion.horaReviso}">
                                <f:convertDateTime pattern="hh:mm" timeStyle="default" type="time"/>
                            </h:outputText>
                        </div>
                        <strong><h:outputText styleClass="col-lg-1 control-label" value="Por:"/></strong>
                        <div class="col-lg-4" style="text-align: left;">
                            <h:outputText styleClass="control-label"  value="#{ordenBean.ordenActual.requisicion.revisa.nombre}"/>
                        </div>
                    </div>
                    <div class="form-group col-lg-12 col-xs-12" style="border: white; border-bottom: #eee; border-top: white; border-style: solid; border-width: 2px;">
                        <strong><h:outputText styleClass="col-lg-2 control-label" value="Aprobada el:"/></strong>
                        <div class="col-lg-2" style="text-align: left;">
                            <h:outputText styleClass="control-label"   value="#{ordenBean.ordenActual.requisicion.fechaAprobo}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </div>
                        <strong><h:outputText styleClass="col-lg-1 control-label" value="  hora: "/></strong>
                        <div class="col-lg-2">
                            <h:outputText styleClass="control-label" value="#{ordenBean.ordenActual.requisicion.horaAprobo}">
                                <f:convertDateTime pattern="hh:mm" timeStyle="default" type="time"/>
                            </h:outputText>
                        </div>
                        <strong><h:outputText styleClass="col-lg-1 control-label" value="Por:"/></strong>
                        <div class="col-lg-4" style="text-align: left;">
                            <h:outputText styleClass="control-label"  value="#{ordenBean.ordenActual.requisicion.aprueba.nombre}"/>
                        </div>
                    </div>
                    <div class="form-group col-lg-12 col-xs-12" style="border: white; border-bottom: #eee; border-top: white; border-style: solid; border-width: 2px;">
                        <strong><h:outputText styleClass="col-lg-2 control-label" value="Asignada el:"/></strong>
                        <div class="col-lg-2" style="text-align: left;">
                            <h:outputText styleClass="control-label"  value="#{ordenBean.ordenActual.requisicion.fechaAsigno}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </div>
                        <strong><h:outputText styleClass="col-lg-1 control-label" value="  hora: "/></strong>
                        <div class="col-lg-2">
                            <h:outputText styleClass="control-label"  value="#{ordenBean.ordenActual.requisicion.horaAsigno}">
                                <f:convertDateTime pattern="hh:mm" timeStyle="default" type="time"/>
                            </h:outputText>
                        </div>
                        <strong><h:outputText styleClass="col-lg-1 control-label" value="Por:"/></strong>
                        <div class="col-lg-4" style="text-align: left;">
                            <h:outputText styleClass="control-label"  value="#{ordenBean.ordenActual.requisicion.asigna.nombre}"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="ETSReq" class="textoIzquierda">
            <div class="table table-responsive">
                <p:dataTable size="small" stripedRows="true" showGridlines="true"  value="#{cargaEtsBean.listaEts}" var="data"
                             styleClass="table table-striped">
                    <f:facet name="header">
                        <h:outputLabel value="Requisición #{ordenBean.ordenActual.requisicion.consecutivo}"/>
                    </f:facet>
                    <p:column>
                        <f:facet name="header">
                            <h:outputLabel value="Nombre"/>
                        </f:facet>
                        <h:outputText value="#{data['siAdjunto'].nombreSinUUID}"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputLabel value="Tamaño"/>
                        </f:facet>
                        <h:outputText  value="#{data['siAdjunto'].peso}"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputLabel value="Descripción"/>
                        </f:facet>
                        <h:outputText value="#{data['siAdjunto'].descripcion}"/>
                    </p:column>
                    <p:column>
                        <p:panel style="margin:0px auto 0px auto;">
                            <h:outputLink target="_blank"  value="/Compras/AbrirArchivo?ZWZ2W=#{data['siAdjunto'].id}&amp;ZWZ3W=#{data['siAdjunto'].uuid}">
                                <h:outputText value=" Abrir"/>
                            </h:outputLink>
                        </p:panel>
                    </p:column>
                </p:dataTable>
            </div>
        </div>
        <div id="DevolucionesReq" class="textoIzquierda">
            <div class="table table-responsive">
                <p:dataTable size="small" stripedRows="true" showGridlines="true"  value="#{ordenBean.rechazosRequisicion}" var="currentRow" styleClass="table table-striped">
                    <p:column rendered="false">
                        <h:outputText value="#{currentRow['id']}"/>
                        <f:facet name="header">
                            <h:outputText value="id"/>
                        </f:facet>
                    </p:column>
                    <p:column>
                        <h:outputText value="#{currentRow['rechazo'].nombre}"/>
                        <f:facet name="header">
                            <h:outputText value="Devolvió"/>
                        </f:facet>
                    </p:column>
                    <p:column>
                        <h:outputText value="#{currentRow['fecha']}">
                            <f:convertDateTime dateStyle="default" type="date"/>
                        </h:outputText>
                        <f:facet name="header">
                            <h:outputText value="Fecha"/>
                        </f:facet>
                    </p:column>
                    <p:column>
                        <h:outputText value="#{currentRow['hora']}">
                            <f:convertDateTime pattern="hh:mm" timeStyle="default" type="time"/>
                        </h:outputText>
                        <f:facet name="header">
                            <h:outputText value="Hora"/>
                        </f:facet>
                    </p:column>
                    <p:column>
                        <h:outputText value="#{currentRow['motivo']}"/>
                        <f:facet name="header">
                            <h:outputText value="Motivo"/>
                        </f:facet>
                    </p:column>
                </p:dataTable>
            </div>
        </div>
        <div id="canceladaReq" class="textoIzquierda">                            
            <ui:fragment rendered="#{ordenBean.ordenActual.requisicion.estatus.id eq 50}">
                <div class="form-group col-lg-12 col-xs-12">                
                    <!-- aquí va la informacion de cancelado -->
                    <strong><h:outputText styleClass="col-lg-2 col-xs-12 control-label" value="Cancelada el:"/></strong>
                    <div class="col-lg-2 col-xs-12" style="text-align: left;">
                        <h:outputText   value="#{ordenBean.ordenActual.requisicion.fechaCancelo}">
                            <f:convertDateTime dateStyle="default" type="date"/>
                        </h:outputText>
                        <h:outputText   value="#{ordenBean.ordenActual.requisicion.horaCancelo}">
                            <f:convertDateTime pattern="hh:mm" timeStyle="default" type="time"/>
                        </h:outputText>
                    </div>
                    <strong><h:outputText styleClass="col-lg-2 col-xs-12 control-label" value="Por:"/></strong>
                    <div class="col-lg-2 col-xs-12" style="text-align: left;">
                        <h:outputText  value="#{ordenBean.ordenActual.requisicion.cancelo.nombre}"/>
                    </div>
                </div>

                <strong><h:outputText styleClass="col-lg-2 col-xs-12 control-label" value="Motivo:"/></strong>
                <div class="bordePanelGrid"><h:outputText styleClass="col-lg-2 col-xs-12 control-label" value="#{ordenBean.ordenActual.requisicion.motivoCancelo}"/></div>
            </ui:fragment>
        </div>
    </div>
</ui:composition>