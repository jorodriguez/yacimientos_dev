<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:my="http://www.mytags.com/schema/mytags">      

    <body>

        <ui:composition template="./../../../WEB-INF/facelets/templates/templateGrupos.xhtml">
	    <h:panelGroup  rendered="#{empty sesion.usuario}" styleClass="altura">
		<ui:include src="./../../../login.xhtml"/>
	    </h:panelGroup>
	    <ui:define name="contenido" >
		<div id="page">
		    <div class="row">
			<ui:include src="./../menuAdministracion.xhtml" rendered="#{not empty sesion.usuario}" />
		    </div>
		    <div class="row">
			<h:form styleClass="textoIzquierda" rendered="#{not empty sesion.usuario}">
			    <center><h:messages globalOnly="true" errorClass="errorMessage" infoClass="infoMessage"/></center>
			    <div class="col-lg-12">
				<div class="col-lg-4"></div>
				<div class="col-lg-6">
				    <h2 class="page-header">Cat√°logo de Ciudades</h2>
				</div>
			    </div>
			    <div class="col-lg-12 col-xs-12">
				<h:outputLabel value="#{msgs['siPais']}: " styleClass="f11" />
				<p:selectOneMenu id="somSiPais" 
						   value="#{direccionBean.id}"
						  
						   valueChangeListener="#{direccionBean.loadSiEstadoBySiPaisOnComboListener}"
						   styleClass="w209f10">
				    <f:selectItem itemLabel="#{msgs['sistema.seleccionar']} #{msgs['siPais']}..." itemValue="-1" />
				    <f:selectItems value="#{direccionBean.allSiPaisSelectItem}" />
				</p:selectOneMenu>
				<p:commandLink type="submit" value="+" title="#{msgs['sistema.crear']} #{msgs['siPais']}" action="#{direccionBean.openPopupCreateSiPais(actionEvent)}" styleClass="btn btn-default" />
			    </div>
			    <div class="col-lg-12 col-xs-12">
				<h:outputLabel value="#{msgs['siEstado']}: " styleClass="f11" />
				<p:selectOneMenu id="somSiEstado" 
						   value="#{direccionBean.idSiEstado}"
						  
						   valueChangeListener="#{direccionBean.loadSiCiudadBySiEstadoOnTableListener}"
						   styleClass="w209f10">
				    <f:selectItem itemLabel="#{msgs['sistema.seleccionar']} #{msgs['siEstado']}..." itemValue="-1" />
				    <f:selectItems value="#{direccionBean.selectItemList}" />
				</p:selectOneMenu>
				<p:commandLink type="submit" value="+" title="#{msgs['sistema.crear']} #{msgs['siEstado']}" action="#{direccionBean.openPopupCreateSiEstadoFromCatalogoSiCiudad(actionEvent)}" styleClass="btn btn-default" />
			    </div>
			    <div class="col-lg-12 col-xs-12">
				<p:commandLink title="#{msgs['sistema.crear']} #{msgs['siCiudad']}" 
						 actionListener="#{direccionBean.openPopupCreateSiCiudad(event)}" styleClass="btn btn-default">
				    <p:graphicImage title="#{msgs['sistema.crear']} #{msgs['siCiudad']}" alt="#{msgs['sistema.crear']} #{msgs['siCiudad']}" url="./resources/imagenes/button_create.png" styleClass="imagenSinBorde"/>
				</p:commandLink>
				<p:commandLink value="#{msgs['sistema.crear']} #{msgs['siCiudad']}" title="#{msgs['sistema.crear']} #{msgs['siCiudad']}"  actionListener="#{direccionBean.openPopupCreateSiCiudad(event)}" styleClass="linkPequenio" />
			    </div>
			    <div class="col-lg-12 col-xs-12">
				<my:dataGrid id="dgsiCiudad" class="table table-bordered table-responsive table-striped" rows="10" value="#{direccionBean.allSiCiudadDataModel}" showPaginator="true" textoResultado="#{msgs['sistema.paginador.mostrando']} #{msgs['siCiudad']} " textoPagina="#{msgs['sistema.paginador.pagina']}" textoDe="#{msgs['sistema.paginador.de']}" >
				    <p:column>
					<f:facet name="header"><h:outputText value="#{msgs['siCiudad']}"/></f:facet>
					<h:outputText value="#{data.nombre}"/>
				    </p:column>
				    <p:column>
					<center>
					    <p:commandLink value="#{msgs['sistema.modificar']}" actionListener="#{direccionBean.openPopupUpdateSiCiudad(event)}" styleClass="link" />
					</center>
				    </p:column>
				    <p:column>
					<center>
					    <p:commandLink value="#{msgs['sistema.eliminar']}" actionListener="#{direccionBean.deleteSiCiudad(event)}" styleClass="link" />
					</center>
                                        <p:confirmDialog id="pnlCon" message="#{msgs['siCiudad.msg.delete']}"
							       style="margin-top: 30px;" />
				    </p:column>
				</my:dataGrid>
			    </div>
			</h:form>           
			<!--Crear SiCiudad-->
			<h:form id="formPopupCreateSiCiudad" styleClass="textoIzquierda">
			    <my:panelPopup tituloPanel="#{msgs['sistema.crear']} #{msgs['siCiudad']}" mostrarPanel="#{sesion.controladorPopups['popupCreateSiCiudad']}" conBoton="false" >
				<h:outputText id="msgsPopupCreateSiCiudad" value="" />
				<center><h:message for="msgsPopupCreateSiCiudad" errorClass="errorMessage" infoClass="infoMessage"/></center>                    

				<p:panelGrid columns="2">
				    <h:outputLabel value="#{msgs['siPais']}: " />
				    <h:outputText value="#{direccionBean.siPais.nombre}" />                             
				    <h:outputLabel value="#{msgs['siEstado']}: " />
				    <h:outputText value="#{direccionBean.siEstado.nombre}" />                               
				    <p:panelGrid columns="2">
					<h:outputLabel value="#{msgs['generales.nombre']}: "/>
					<h:outputText value="*" styleClass="textoRojo" />
				    </p:panelGrid>
				    <p:panelGrid columns="2">
					<p:inputText id="inpTxtNombre" value="#{direccionBean.siCiudad.nombre}" 
                                                     maxlength="64" size="32" required="true" requiredMessage="#{msgs['generales.nombre']} #{msgs['sistema.mensaje.error.esRequerido']}"/>
					<h:message id="nombre" for="inpTxtNombre" errorClass="errorMessage" infoClass="infoMessage"/>
				    </p:panelGrid>
				</p:panelGrid>

				<center>
				    <p:panelGrid columns="2">
					<p:commandLink value="#{msgs['sistema.aceptar']}" actionListener="#{direccionBean.saveSiCiudad(event)}" styleClass="btn btn-info" />
					<p:commandLink value="#{msgs['sistema.cancelar']}" actionListener="#{direccionBean.closePopupCreateSiCiudad(event)}" immediate="true" styleClass="btn btn-default" />
				    </p:panelGrid>
				</center>                                  
			    </my:panelPopup>
			</h:form>

			<!--Modificar SiCiudad-->
			<h:form id="formPopupUpdateSiCiudad" styleClass="textoIzquierda">
			    <my:panelPopup tituloPanel="#{msgs['sistema.modificar']} #{msgs['siCiudad']}" mostrarPanel="#{sesion.controladorPopups['popupUpdateSiCiudad']}" conBoton="false" >
				<h:outputText id="msgsPopupUpdateSiCiudad" value="" />
				<center><h:message for="msgsPopupUpdateSiCiudad" errorClass="errorMessage" infoClass="infoMessage"/></center>       

				<p:panelGrid columns="2">
				    <h:outputLabel value="#{msgs['siPais']}: " />
				    <h:outputText value="#{direccionBean.siPais.nombre}" />                            
				    <h:outputLabel value="#{msgs['siEstado']}: " />
				    <h:outputText value="#{direccionBean.siEstado.nombre}" />                            
				    <p:panelGrid columns="2">
					<h:outputLabel value="#{msgs['generales.nombre']}: "/>
					<h:outputText value="*" styleClass="textoRojo" />
				    </p:panelGrid>
				    <p:panelGrid columns="2">
					<p:inputText id="inpTxtNombre" value="#{direccionBean.siCiudad.nombre}" 
                                                     maxlength="64" size="32" required="true" requiredMessage="#{msgs['generales.nombre']} #{msgs['sistema.mensaje.error.esRequerido']}"/>
					<h:message id="nombre" for="inpTxtNombre" errorClass="errorMessage" infoClass="infoMessage"/>
				    </p:panelGrid>
				</p:panelGrid>

				<center>
				    <p:panelGrid columns="2">
					<p:commandLink value="#{msgs['sistema.actualizar']}" actionListener="#{direccionBean.updateSiCiudad(event)}" styleClass="btn btn-info" />
					<p:commandLink value="#{msgs['sistema.cancelar']}" actionListener="#{direccionBean.closePopupUpdateSiCiudad(event)}" immediate="true" styleClass="btn btn-default" />
				    </p:panelGrid>
				</center>                                 
			    </my:panelPopup>
			</h:form> 

			<!--Crear SiPais-->
			<h:form id="formPopupCreateSiPais" styleClass="textoIzquierda">
			    <my:panelPopup tituloPanel="#{msgs['sistema.crear']} #{msgs['siPais']}" mostrarPanel="#{sesion.controladorPopups['popupCreateSiPais']}" conBoton="false" >
				<h:outputText id="msgsPopupCreateSiPais" value="" />
				<center><h:message for="msgsPopupCreateSiPais" errorClass="errorMessage" infoClass="infoMessage"/></center>                    

				<p:panelGrid columns="2">
				    <p:panelGrid columns="2">
					<h:outputLabel value="#{msgs['generales.nombre']}: "/>
					<h:outputText value="*" styleClass="textoRojo" />
				    </p:panelGrid>
				    <p:panelGrid columns="2">
					<p:inputText id="inpTxtNombre" value="#{direccionBean.siPais.nombre}" 
                                                     maxlength="64" size="32" required="true" requiredMessage="#{msgs['generales.nombre']} #{msgs['sistema.mensaje.error.esRequerido']}"/>
					<h:message id="nombre" for="inpTxtNombre" errorClass="errorMessage" infoClass="infoMessage"/>
				    </p:panelGrid>
				</p:panelGrid>

				<center>
				    <p:panelGrid columns="2">
					<p:commandLink value="#{msgs['sistema.aceptar']}" actionListener="#{direccionBean.saveSiPaisOnly}" styleClass="btn btn-info" />
					<p:commandLink value="#{msgs['sistema.cancelar']}" actionListener="#{direccionBean.closePopupCreateSiPais}" immediate="true" styleClass="btn btn-default" />
				    </p:panelGrid>
				</center>                                  
			    </my:panelPopup>
			</h:form>  

			<!--Crear SiEstado-->
			<h:form id="formPopupCreateSiEstado" styleClass="textoIzquierda">
			    <my:panelPopup tituloPanel="#{msgs['sistema.crear']} #{msgs['siEstado']}" mostrarPanel="#{sesion.controladorPopups['popupCreateSiEstado']}" conBoton="false" >
				<h:outputText id="msgsPopupCreateSiEstado" value="" />
				<center><h:message for="msgsPopupCreateSiEstado" errorClass="errorMessage" infoClass="infoMessage"/></center>                    

				<p:panelGrid columns="2">
				    <h:outputLabel value="#{msgs['siPais']}: " />
				    <h:outputText value="#{direccionBean.siPais.nombre}" />                               
				    <p:panelGrid columns="2">
					<h:outputLabel value="#{msgs['generales.nombre']}: "/>
					<h:outputText value="*" styleClass="textoRojo" />
				    </p:panelGrid>
				    <p:panelGrid columns="2">
					<p:inputText id="inpTxtNombre" value="#{direccionBean.siEstado.nombre}" maxlength="64" size="32" required="true" requiredMessage="#{msgs['generales.nombre']} #{msgs['sistema.mensaje.error.esRequerido']}"/>
					<h:message id="nombre" for="inpTxtNombre" errorClass="errorMessage" infoClass="infoMessage"/>
				    </p:panelGrid>
				</p:panelGrid>

				<center>
				    <p:panelGrid columns="2">
					<p:commandLink value="#{msgs['sistema.aceptar']}" actionListener="#{direccionBean.saveSiEstadoFromSiCiudad(event)}" styleClass="btn btn-info" />
					<p:commandLink value="#{msgs['sistema.cancelar']}" actionListener="#{direccionBean.closePopupCreateSiEstado(event)}" immediate="true" styleClass="btn btn-default" />
				    </p:panelGrid>
				</center>                                  
			    </my:panelPopup>
			</h:form>                
		    </div>
		</div>
            </ui:define>

        </ui:composition>

    </body>
</html>
