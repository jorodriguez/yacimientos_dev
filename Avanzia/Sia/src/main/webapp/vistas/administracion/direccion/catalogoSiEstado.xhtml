<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"

      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:my="http://www.mytags.com/schema/mytags">      

    <body>

        <ui:composition template="./../../../WEB-INF/facelets/templates/templateGrupos.xhtml">
            <ui:define name="contenido" >
                <div id="page">
                    <div class="row">
                        <h:form styleClass="textoIzquierda" rendered="#{not empty sesion.usuario}">
                            <div class="col-lg-12">
                                <div class="col-lg-4"></div>
                                <div class="col-lg-6">
                                    <h2 class="page-header">Cat√°logo de Estados</h2>
                                </div>
                            </div>
                            <center><h:messages globalOnly="true" errorClass="errorMessage" infoClass="infoMessage"/></center>
                            <div class="col-lg-12 col-xs-12">
                                <h:outputLabel value="#{msgs['siPais']}: " styleClass="f11" />
                                <p:selectOneMenu id="somSiPais" 
                                                 value="#{direccionBean.id}"

                                                 valueChangeListener="#{direccionBean.loadOnTableSiEstadoBySiPaisListener}"
                                                 styleClass="w209f10">
                                    <f:selectItem itemLabel="#{msgs['sistema.seleccionar']} #{msgs['siPais']}..." itemValue="-1" />
                                    <f:selectItems value="#{direccionBean.allSiPaisSelectItem}" />
                                </p:selectOneMenu>
                                <p:commandLink type="submit" value="+" title="#{msgs['sistema.crear']} #{msgs['siPais']}" action="#{direccionBean.openPopupCreateSiPais(actionEvent)}" styleClass="btn btn-default" />                        
                            </div>
                        </h:form>
                        <h:form styleClass="textoIzquierda">
                            <div class="col-lg-12 col-xs-12">
                                <p:commandLink title="#{msgs['sistema.crear']} #{msgs['siEstado']}" action="#{direccionBean.openPopupCreateSiEstado(event)}" styleClass="btn btn-default">
                                    <p:graphicImage title="#{msgs['sistema.crear']} #{msgs['siEstado']}" alt="#{msgs['sistema.crear']} #{msgs['siEstado']}" url="./resources/imagenes/button_create.png" styleClass="imagenSinBorde"/>
                                </p:commandLink>
                                <p:commandLink value="#{msgs['sistema.crear']} #{msgs['siEstado']}" title="#{msgs['sistema.crear']} #{msgs['siEstado']}"  action="#{direccionBean.openPopupCreateSiEstado}" styleClass="linkPequenio" />
                            </div>
                        </h:form>
                        <h:form id="catSiEstado" styleClass="textoIzquierda">
                            <div class="col-lg-12 col-xs-12">
                                <my:dataGrid id="dgsiEstado" rows="10" value="#{direccionBean.allSiEstadoDataModel}" showPaginator="true" textoResultado="#{msgs['sistema.paginador.mostrando']} #{msgs['siEstado']} " textoPagina="#{msgs['sistema.paginador.pagina']}" textoDe="#{msgs['sistema.paginador.de']}" >
                                    <p:column>
                                        <f:facet name="header"><h:outputText value="#{msgs['siEstado']}"/></f:facet>
                                        <h:outputText value="#{data.nombre}"/>
                                    </p:column>
                                    <p:column>
                                        <center>
                                            <p:commandLink value="#{msgs['sistema.modificar']}" action="#{direccionBean.openPopupUpdateSiEstado(event)}" styleClass="link" />
                                        </center>
                                    </p:column>
                                    <p:column>
                                        <center>
                                            <p:commandLink value="#{msgs['sistema.eliminar']}" action="#{direccionBean.deleteSiEstado(event)}"  styleClass="link" />
                                        </center>
                                        <p:confirmDialog id="pnlCon" message="#{msgs['siEstado.msg.delete']}"
                                                         style="margin-top: 30px;"/>
                                    </p:column>
                                </my:dataGrid>
                            </div>
                        </h:form>           

                        <!--Crear SiEstado-->
                        <h:form id="formPopupCreateSiEstado" styleClass="textoIzquierda">

                            <my:panelPopup tituloPanel="#{msgs['sistema.crear']} #{msgs['siEstado']}" mostrarPanel="#{sesion.controladorPopups['popupCreateSiEstado']}" conBoton="false" >
                                <h:outputText id="msgsPopupCreateSiEstado" value="" />
                                <center><h:message for="msgsPopupCreateSiEstado" errorClass="errorMessage" infoClass="infoMessage"/></center>                    

                                <p:panelGrid columns="2">
                                    <h:outputLabel value="#{msgs['siPais']}: " />
                                    <h:outputText value="#{direccionBean.siPais.nombre}" />                               
                                    <p:panelGrid columns="2">
                                        <h:outputLabel value="#{msgs['generales.nombre']}: "/>
                                        <h:outputText value="*" styleClass="textoRojo" />
                                    </p:panelGrid>
                                    <p:panelGrid columns="2">
                                        <p:inputText id="inpTxtNombre" value="#{direccionBean.siEstado.nombre}" maxlength="64" size="32" required="true" requiredMessage="#{msgs['generales.nombre']} #{msgs['sistema.mensaje.error.esRequerido']}"/>
                                        <h:message id="nombre" for="inpTxtNombre" errorClass="errorMessage" infoClass="infoMessage"/>
                                    </p:panelGrid>
                                </p:panelGrid>

                                <center>
                                    <p:panelGrid columns="2">
                                        <p:commandLink value="#{msgs['sistema.aceptar']}" action="#{direccionBean.saveSiEstado(event)}" styleClass="btn btn-info" />
                                        <p:commandLink value="#{msgs['sistema.cancelar']}" action="#{direccionBean.closePopupCreateSiEstado(event)}" immediate="true" styleClass="btn btn-default" />
                                    </p:panelGrid>
                                </center>                                  
                            </my:panelPopup>
                        </h:form>

                        <!--Modificar SiEstado-->
                        <h:form id="formPopupUpdateSiEstado" styleClass="textoIzquierda">
                            <my:panelPopup tituloPanel="#{msgs['sistema.modificar']} #{msgs['siEstado']}" mostrarPanel="#{sesion.controladorPopups['popupUpdateSiEstado']}" conBoton="false" >
                                <h:outputText id="msgsPopupUpdateSiEstado" value="" />
                                <center><h:message for="msgsPopupUpdateSiEstado" errorClass="errorMessage" infoClass="infoMessage"/></center>       

                                <p:panelGrid columns="2">
                                    <h:outputLabel value="#{msgs['siPais']}: " />
                                    <h:outputText value="#{direccionBean.siPais.nombre}" />                            
                                    <p:panelGrid columns="2">
                                        <h:outputLabel value="#{msgs['generales.nombre']}: "/>
                                        <h:outputText value="*" styleClass="textoRojo" />
                                    </p:panelGrid>
                                    <p:panelGrid columns="2">
                                        <p:inputText id="inpTxtNombre" value="#{direccionBean.siEstado.nombre}"  maxlength="64" size="32" required="true" requiredMessage="#{msgs['generales.nombre']} #{msgs['sistema.mensaje.error.esRequerido']}"/>
                                        <h:message id="nombre" for="inpTxtNombre" errorClass="errorMessage" infoClass="infoMessage"/>
                                    </p:panelGrid>
                                </p:panelGrid>

                                <center>
                                    <p:panelGrid columns="2">
                                        <p:commandLink value="#{msgs['sistema.actualizar']}" action="#{direccionBean.updateSiEstado(event)}" styleClass="btn btn-info" />
                                        <p:commandLink value="#{msgs['sistema.cancelar']}" action="#{direccionBean.closePopupUpdateSiEstado(event)}" immediate="true" styleClass="btn btn-default" />
                                    </p:panelGrid>
                                </center>                                 
                            </my:panelPopup>
                        </h:form> 

                        <!--Crear SiPais-->
                        <h:form id="formPopupCreateSiPais" styleClass="textoIzquierda">
                            <my:panelPopup tituloPanel="#{msgs['sistema.crear']} #{msgs['siPais']}" mostrarPanel="#{sesion.controladorPopups['popupCreateSiPais']}" conBoton="false" >
                                <h:outputText id="msgsPopupCreateSiPais" value="" />
                                <center><h:message for="msgsPopupCreateSiPais" errorClass="errorMessage" infoClass="infoMessage"/></center>                    

                                <p:panelGrid columns="2">
                                    <p:panelGrid columns="2">
                                        <h:outputLabel value="#{msgs['generales.nombre']}: "/>
                                        <h:outputText value="*" styleClass="textoRojo" />
                                    </p:panelGrid>
                                    <p:panelGrid columns="2">
                                        <p:inputText id="inpTxtNombre" value="#{direccionBean.siPais.nombre}" maxlength="64" size="32" required="true" requiredMessage="#{msgs['generales.nombre']} #{msgs['sistema.mensaje.error.esRequerido']}"/>
                                        <h:message id="nombre" for="inpTxtNombre" errorClass="errorMessage" infoClass="infoMessage"/>
                                    </p:panelGrid>
                                </p:panelGrid>

                                <center>
                                    <p:panelGrid columns="2">
                                        <p:commandLink value="#{msgs['sistema.aceptar']}" action="#{direccionBean.saveSiPaisOnly(event)}" styleClass="btn btn-info" />
                                        <p:commandLink value="#{msgs['sistema.cancelar']}" action="#{direccionBean.closePopupCreateSiPais(event)}" immediate="true" styleClass="btn btn-default" />
                                    </p:panelGrid>
                                </center>                                  
                            </my:panelPopup>
                        </h:form>                
                    </div>
                </div>
            </ui:define>

        </ui:composition>

    </body>
</html>
