<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"    
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"  
      
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:my="http://www.mytags.com/schema/mytags">

    <body>

        <ui:composition template="./../../../WEB-INF/facelets/templates/templateGrupos.xhtml">
	    <ui:define name="contenido" >
		<div id="Pa">
		    <div class="row">
			<h:form styleClass="textoIzquierda" id="frmUser"  rendered="#{not empty sesion.usuario}" >
			    <div class="col-lg-12">
				<div class="col-lg-4"></div>
				<div class="col-lg-6">
				    <h2 class="page-header">Administración de roles</h2>
				</div>
			    </div>
			    <h:messages infoClass="textoMensajeError"/>     
			    <!--h:outputText value="Campo  #{usuarioBean.usuarioVO.idCampo}"/-->
			    <div class="col-lg-12 col-xs-12">
				<my:dataGrid id="dtUser"
					     rows="10" value="#{usuarioBean.listaRoles}" 
					     showPaginator="true"
					     textoResultado="#{msgs['sistema.paginador.mostrando']} " textoPagina="#{msgs['sistema.paginador.pagina']}" textoDe="#{msgs['sistema.paginador.de']}" >                                    

				    <f:facet name="header"><h:outputText value="Lista de Roles"/></f:facet>
				    <p:column>
					<f:facet name="header"><h:outputText value="Nombre"/></f:facet>
					<center><h:outputText value="#{data.nombre}"/></center>
				    </p:column>
				    <p:column>
					<f:facet name="header"><h:outputText value="Modulo"/></f:facet>
					<center><h:outputText value="#{data.modulo}"/></center>
				    </p:column>
				    <p:column>
					<f:facet name="header"><h:outputText value="Opciones"/></f:facet>
					<center><h:outputText value="#{data.opciones}"/></center>
				    </p:column>
				    <p:column>
					<f:facet name="header"></f:facet>
					<center>
					    <p:commandLink value="#{msgs['sistema.agregar.roles']}" 
							   title="#{msgs['sistema.agregar.roles']}"                       
							   action="#{usuarioBean.openAgregarRoles(actionEvent)}"                                                              
							   styleClass="link">            
						<f:param name="id" value="#{data.id}"/>
					    </p:commandLink>
					</center>
				    </p:column>
				    <p:column>
					<f:facet name="header"></f:facet>
					<center>
					    <p:commandLink value="#{msgs['sistema.agregar.opcion']}" 
							   title="#{msgs['sistema.agregar.opcion']}"                       
							   action="#{usuarioBean.openPopupAgregarOpcionesRol(actionEvent)}"                                                              
							   styleClass="link">            
						<f:param name="id" value="#{data.id}"/>
					    </p:commandLink>
					</center>
				    </p:column>
				</my:dataGrid>
			    </div>
			</h:form>

			<h:form id="popupOpcionesRoles" styleClass="textoIzquierda" >
			    <my:panelPopup tituloPanel="Opciones de #{usuarioBean.rol}"
					   mostrarPanel="#{usuarioBean.flag}" conBoton="false">
				<p:panelGrid columns="1" >
				    <my:dataGrid id="dtRolesOpciones"
						 rows="10" value="#{usuarioBean.listaOpciones}" 
						 showPaginator="true"
						 textoResultado="" textoPagina="#{msgs['sistema.paginador.pagina']}" textoDe="#{msgs['sistema.paginador.de']}" >                                    

					<f:facet name="header"><h:outputText value="Lista de Opciones"/></f:facet>
					<p:column>
					    <f:facet name="header"><h:outputText value="Opción Padre"/></f:facet>
					    <center><h:outputText value="#{data.padre}"/></center>
					</p:column>
					<p:column>
					    <f:facet name="header"><h:outputText value="Opción"/></f:facet>
					    <center><h:outputText value="#{data.nombre}"/></center>
					</p:column>
					<p:column>
					    <f:facet name="header"><h:outputText value=""/></f:facet>
					    <center><p:commandLink 
						    value="#{msgs['presupuesto.nuevos.eliminar']}" 
						    title="#{msgs['presupuesto.nuevos.eliminar']}"
						    action="#{usuarioBean.quitarOpcionRol(event)}">

						</p:commandLink> </center>
					</p:column>

				    </my:dataGrid>

				    <br/>

				</p:panelGrid>
				<center>
				    <p:panelGrid columns="2">
					<p:commandButton value="#{msgs['sistema.cancelar']}" action="#{usuarioBean.ocultarPopupOpcionesRol(event)}" styleClass="btn btn-default" immediate="true" />        
				    </p:panelGrid>                        
				</center>
			    </my:panelPopup>                    
			</h:form>  

			<h:form id="popupAgregarOpcionesRoles" styleClass="textoIzquierda" >
			    <my:panelPopup tituloPanel="Opciones"
					   mostrarPanel="#{usuarioBean.usuarioCampoPop}" conBoton="false">
				<p:panelGrid columns="1" >
				    <my:dataGrid id="dtRolesOpciones"
						 rows="10" value="#{usuarioBean.listaOpciones}" 
						 showPaginator="true"
						 textoResultado="" textoPagina="#{msgs['sistema.paginador.pagina']}" textoDe="#{msgs['sistema.paginador.de']}" >                                    

					<f:facet name="header"><h:outputText value="Lista de Opciones"/></f:facet>
					<p:column>
					    <f:facet name="header"><h:outputText value="Opción Padre"/></f:facet>
					    <center><h:outputText value="#{data.padre}"/></center>
					</p:column>
					<p:column>
					    <f:facet name="header"><h:outputText value="Opción"/></f:facet>
					    <center><h:outputText value="#{data.nombre}"/></center>
					</p:column>
					<p:column>
					    <f:facet name="header"><h:outputText value=""/></f:facet>
					    <center><p:commandLink 
						    value="#{msgs['sia.agregar']}" 
						    title="#{msgs['sia.agregar']}"
						    action="#{usuarioBean.agregarOpcionRol(event)}">

						</p:commandLink> </center>
					</p:column>

				    </my:dataGrid>

				    <br/>

				</p:panelGrid>
				<center>
				    <p:panelGrid columns="2">
					<p:commandButton value="#{msgs['sistema.cancelar']}" action="#{usuarioBean.ocultarPopupAgregarOpcionesRol(event)}" styleClass="btn btn-default" immediate="true" />        
				    </p:panelGrid>                        
				</center>
			    </my:panelPopup>                    
			</h:form>  
		    </div>
		</div>
	    </ui:define>

        </ui:composition>

    </body>
</html>
