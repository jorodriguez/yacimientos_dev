<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:my="http://www.mytags.com/schema/mytags"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <body>
        <ui:composition template="./../../../WEB-INF/facelets/templates/templateGrupos.xhtml">
            <ui:define name="contenido">
		<div id="Pa">
		    <div class="row">
			<ui:include src="/vistas/recursos/menuRecursos.xhtml" rendered="#{not empty sesion.usuario}" />
		    </div>
		    <div class="row"> 
			<h:form id="formPrincipal" rendered="#{not empty sesion.usuario}" styleClass="textoIzquierda" >
			    <div class="col-lg-12">
				<div class="col-lg-4"></div>
				<div class="col-lg-6">
				    <h2 class="page-header">#{msgs['rhPuesto.catalogo']}</h2>
				</div>
			    </div> 
			    <center><h:messages globalOnly="true" errorClass="errorMessage" infoClass="infoMessage"/></center>  
			    <div class="col-lg-12">
				<p:panelGrid  >
				    <f:facet name="header"><h:outputLabel value="#{msgs['cabecera.buscar']} #{msgs['rhPuesto']}"/></f:facet>
				    <p:selectOneRadio value="#{puestosBean.opcionSeleccionada}" valueChangeListener="#{puestosBean.traerPorFiltro}" immediate="true" >
					<f:selectItem itemLabel="Todos" itemValue="todo"/>
					<f:selectItem itemLabel="Filtro" itemValue="filtro"/>
				    </p:selectOneRadio>
				    <p:panelGrid  columns="2">
					<p:inputText value="#{puestosBean.cadenaBuscar}" size="20" id="buscarPuesto"/>
					<p:commandLink styleClass="btn btn-default" action="#{puestosBean.buscarPuesto(actionEvent)}">
					    <p:graphicImage alt="#{msgs['cabecera.buscar']}" title="#{msgs['cabecera.buscar']}" url="./resources/imagenes/search.png" styleClass="imagenSinBorde" />
					</p:commandLink>
				    </p:panelGrid>
				</p:panelGrid>
				<p:commandLink type="submit" title="#{msgs['sistema.crear']} #{msgs['rhPuesto']}" 
						 action="#{puestosBean.openPopupCreateRhPuesto(actionEvent)}" styleClass="btn btn-default" >
				    <p:graphicImage url="resources/imagenes/button_create.png" alt="Crear Puesto" styleClass="imagenSinBorde" width="16px" height="16px" />
				</p:commandLink>
				<p:commandLink title="#{msgs['sistema.crear']} #{msgs['rhPuesto']}" value="#{msgs['sistema.crear']} #{msgs['rhPuesto']}" styleClass="linkPequenio" action="#{puestosBean.openPopupCreateRhPuesto(actionEvent)}" />
			    </div>
			    <div class="col-lg-12">
				<my:dataGrid id="dataGridModulo" rows="10"  value="#{puestosBean.allRhPuestoDataModel}" showPaginator="true" textoResultado="#{msgs['sistema.paginador.mostrando']} #{msgs['rhPuesto']}s" textoPagina="#{msgs['sistema.paginador.pagina']}" textoDe="#{msgs['sistema.paginador.de']}" >
				    <p:column>
					<f:facet name="header">
					    <h:outputText value="#{msgs['rhPuesto']}"/>
					</f:facet>
					<h:outputText value="#{data.nombre}" />
				    </p:column>
				    <p:column>
					<f:facet name="header">
					    <h:outputText value="#{msgs['presupuesto.nuevos.campoDescripcion']}"/>
					</f:facet>
					<h:outputText value="#{(data.descripcion!='null') ? data.descripcion : ''}" />
				    </p:column>
				    <p:column>

					<p:commandLink title="#{msgs['presupuesto.nuevos.modificar']} #{msgs['rhPuesto']}" value="#{msgs['presupuesto.nuevos.modificar']}" action="#{puestosBean.openPopupUpdateRhPuesto(actionEvent)}" styleClass="link" />
				    </p:column>
				    <p:column>

					<p:commandLink title="#{msgs['sistema.eliminar']} #{msgs['rhPuesto']}" value="#{msgs['sistema.eliminar']}" action="#{puestosBean.deleteRhPuesto(actionEvent)}" styleClass="link" />

					<p:confirmDialog id="pnlCon"   message="#{msgs['rhPuesto.msg.delete']}"
							       style="margin-top: 30px;" />
				    </p:column>          
				</my:dataGrid>
			    </div>
			</h:form>
			<h:form id="popupCreateRhPuesto">
			    <my:panelPopup tituloPanel="#{msgs['sistema.crear']} #{msgs['rhPuesto']}" mostrarPanel="#{sesion.controladorPopups['popupCreateRhPuesto']}" conBoton="false" >
				<h:outputText id="msgsPopupCreateRhPuesto" value="" />
				<center><h:messages for="msgsPopupCreateRhPuesto" errorClass="errorMessage" infoClass="infoMessage"/></center>  

				<table width="300px" cellpadding="0" cellspacing="0">
				    <tr>
					<td align="right"><h:outputLabel value="#{msgs['generales.nombre']}: "/><h:outputText value="*" styleClass="textoRojo" /></td>
					<td><p:inputText id="inpTxtNombre"  value="#{puestosBean.nombrePuesto}" style="width: 200px" styleClass="f11" maxlength="100"/></td> 
				    </tr>
				    <tr>
					<td align="right"><h:outputLabel value="#{msgs['presupuesto.nuevos.campoDescripcion']}: "/></td>
					<td><p:inputText id="inpTxtDescripcion" value="#{puestosBean.descripcionPuesto}" style="width: 200px" styleClass="f11" maxlength="256" /></td>
				    </tr>
				</table>    
				<center>
				    <p:panelGrid columns="2">
					<p:commandButton value="#{msgs['sistema.crear']}" action="#{puestosBean.saveRhPuesto(actionEvent)}" styleClass="btn btn-info"/>
					<p:commandButton value="#{msgs['sistema.cancelar']}" action="#{puestosBean.closePopupCreateRhPuesto(actionEvent)}" styleClass="btn btn-default" immediate="true" />        
				    </p:panelGrid>                        
				</center>
			    </my:panelPopup>
			</h:form>
			<h:form id="popupUpdateRhPuesto">
			    <my:panelPopup tituloPanel="#{msgs['sistema.actualizar']} #{msgs['rhPuesto']}" mostrarPanel="#{sesion.controladorPopups['popupUpdateRhPuesto']}" conBoton="false">
				<center><h:messages errorClass="errorMessage" infoClass="infoMessage"/></center>  
				<table width="300px" cellpadding="0" cellspacing="0">
				    <tr>
					<td align="right"><h:outputLabel value="#{msgs['generales.nombre']}: "/> <h:outputText value="*" styleClass="textoRojo" /></td>
					<td><p:inputText  id="inpTxtNombre" required="true" requiredMessage="#{msgs['generales.nombre']} #{msgs['sistema.mensaje.error.esRequerido']}" value="#{puestosBean.nombrePuesto}" style="width: 200px" styleClass="f11" maxlength="32"/></td>
				    </tr>
				    <tr>
					<td align="right"><h:outputLabel value="#{msgs['presupuesto.nuevos.campoDescripcion']}: "/> </td>
					<td><p:inputText  id="inpTxtDescripcion" value="#{puestosBean.descripcionPuesto}" style="width: 200px" styleClass="f11" maxlength="256" /></td>
				    </tr>
				</table>
				<center>
				    <p:panelGrid columns="2">
					<p:commandButton value="#{msgs['sistema.actualizar']}" action="#{puestosBean.updateRhPuesto(actionEvent)}" styleClass="btn btn-info"/>
					<p:commandButton value="#{msgs['sistema.cancelar']}" action="#{puestosBean.closePopupUpdateRhPuesto(actionEvent)}" styleClass="btn btn-default" immediate="true"/>        
				    </p:panelGrid>                        
				</center>
			    </my:panelPopup>
			</h:form>  
		    </div>
		</div>
	    </ui:define>
	</ui:composition>
    </body>
</html>
