<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"    
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"  
      
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <body>
        <ui:composition template="./../../../WEB-INF/facelets/templates/templateGrupos.xhtml">
	    <h:panelGroup  rendered="#{empty sesion.usuario}" styleClass="altura">
		<ui:include src="./../../../login.xhtml"/>
	    </h:panelGroup>
            <ui:define name="contenido">
		<div id="Pa">
		    <div class="row">
			<ui:include src="../menuAdministracion.xhtml" rendered="#{not empty sesion.usuario}" />
		    </div>
		    <div class="row"> 
			<h:form rendered="#{not empty sesion.usuario}" styleClass="textoIzquierda" id="frmUser">

			    <div class="col-lg-12">
				<div class="col-lg-4"></div>
				<div class="col-lg-6">
				    <h2 class="page-header">#{msgs['sia.usuario.adiministrar.titulo']}</h2>
				</div>
			    </div>
			    <div class="col-lg-12 col-xs-12">
				<div class="col-lg-3"></div>
				<div class="col-lg-8">
				    <h:outputText value="Usuario" />   
				    <p:inputText id="autocompleteUsuario" size="40" 
						   onclick="autocompletarUsuario(this, 'hidenDesUsuario', 'frmUser');"/>                            
				    <h:inputHidden id="hidenDesUsuario" value="#{usuarioBean.u}"/>
				    <p:commandLink value="Buscar" action="#{usuarioBean.buscarUsuarioConsulta(event)}" styleClass="btn btn-default"/>
				</div>

			    </div>
			    <br/> 
			    <div class="col-lg-12 col-xs-12">
				<h:messages infoClass="textoMensajeError"/>     
				<p:panelGrid columns="2" >
				    <p:panelGrid columns="1" style="text-align: center;" styleClass="bordePanelGrid">
					<h:outputLabel value="#{msgs['sistema.filtro']}"/>
					<p:selectOneRadio value="#{usuarioBean.idCampo}" 
							    valueChangeListener="#{usuarioBean.cambiarSeleccionCampo}" 
							     layout="lineDirection" >
					    <f:selectItems value="#{usuarioBean.listaCampoPorUsuario}"/> 
					</p:selectOneRadio>
				    </p:panelGrid>
				    <p:panelGrid  style="text-align: center;" styleClass="bordePanelGrid">
					<h:outputLabel value="#{msgs['sia.usuario.tipo']}"/>
					<p:selectOneRadio value="#{usuarioBean.preguntaEntero}"  valueChangeListener="#{usuarioBean.cambiarTipoUsuario}">
					    <f:selectItem itemLabel="#{msgs['sia.usuario.compradores']}" itemValue="1"/>
					    <f:selectItem itemLabel="#{msgs['sia.usuario.solicitan.requisicion']}" itemValue="2"/>
					</p:selectOneRadio>
				    </p:panelGrid>
				</p:panelGrid>
			    </div>

			    <div class="col-lg-12 col-xs-12">
				<p:dataTable value="#{usuarioBean.listaUsuarios}" var="user" 
					       id="dtUser" styleClass="table table-striped table-bordered" 
					       rows="15" >
				    <!--f:facet name="header"><h:panelGroup><h:outputLabel value="Compradores"/></h:panelGroup></f:facet-->
				    <p:column>
					<f:facet name="header"><h:outputText value="#{msgs['generales.nombre']}"/></f:facet>
					<h:outputText value="#{user.nombre}"/>
				    </p:column>
				    <p:column>
					<f:facet name="header"><h:outputText value="#{msgs['sia.bloque.nombre']}"/></f:facet>
					<h:outputText value="#{user.campo}"/>
				    </p:column>
				    <p:column>
					<f:facet name="header"><h:outputText value="#{msgs['sia.usuario.correo']}"/></f:facet>
					<center>
					    <h:outputText value="#{user.mail}"/>
					</center>
				    </p:column>
				</p:dataTable>
				
				<br/>
				<p:panelGrid columns="2" style="float: right;">
				    <h:outputText value="Exportar"/>
                                    <p:dataExporter type="xls" target="dtUser" />
				</p:panelGrid>
			    </div>
			</h:form>
		    </div>
		</div>
            </ui:define>

        </ui:composition>

    </body>
</html>
