<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml"
       xmlns:ui="http://xmlns.jcp.org/jsf/facelets"  
       xmlns:p="http://primefaces.org/ui"      
       xmlns:f="http://xmlns.jcp.org/jsf/core"
       xmlns:h="http://xmlns.jcp.org/jsf/html"
       xmlns:my="http://www.mytags.com/schema/mytags"> 
    <body>
        <ui:composition template="./../../WEB-INF/facelets/templates/templateSistema.xhtml">

            <ui:define name="menu" rendered="#{not empty sesion.usuario}">
                <h:form rendered="#{not empty sesion.usuario}">                
                    <ui:include src="menuAdministracion.xhtml"/>
                </h:form>
            </ui:define>

            <ui:define name="contenido">
                <center><h:messages errorClass="errorMessage" infoClass="infoMessage"/></center>  

                <br />

                <h:panelGroup  rendered="#{empty sesion.usuario}" styleClass="altura">
                    <ui:include src="./../../login.xhtml"/>
                </h:panelGroup>

                <center><h:outputText value="Catálogo de Condiciones de Pago" styleClass="tituloEncabezado" /></center>

                <br />

                <h:form rendered="#{not empty sesion.usuario}" styleClass="textoIzquierda" >
                    <p:panelGrid columns="2">
                        <p:panelGrid columns="1" style="margin-left: 10px;">
                            <p:commandLink type="submit" title="Crear Condición de Pago" action="#{catalogoConPagoB.mostrarPopupCrear(actionEvent)}" styleClass="btn btn-default" >
                                <p:graphicImage url="resources/imagenes/button_create.png" alt="Crear Módulo" styleClass="imagenSinBorde" style="width: 16px; height:16px;" />
                            </p:commandLink>
                            <p:commandLink title="Crear Condición de Pago" value="Crear Condición de Pago" styleClass="linkPequenio" action="#{catalogoConPagoB.mostrarPopupCrear(actionEvent)}" />
                        </p:panelGrid>  
                        <p:panelGrid columns="1" style="margin-left: 10px;">
                            <p:commandLink title="Ir a Ligar CP con Proveedor y compania" style="margin-left: 15px;"
                                             action="/vistas/administracion/condicionPago" 
                                             styleClass="btn btn-default"
                                             action="#{condicionPagoB.entrarDesdeCatalogo(event)}">
                                             <p:graphicImage url="resources/imagenes/button_create.png" alt="Crear Relación proveedor.compania" styleClass="imagenSinBorde" style="width: 16px; height:16px;" />
                            </p:commandLink>     
                            <p:commandLink title="Ir a Ligar CP con Proveedor y compania" value="Ligar Condición de Pago con Proveedor"
                                             styleClass="linkPequenio" action="/vistas/administracion/condicionPago" 
                                             action="#{condicionPagoB.entrarDesdeCatalogo(event)}"/>
                        </p:panelGrid>
                    </p:panelGrid>
                    <my:dataGrid id="dtGP" styleClass="contenidoTabla"
                                 rows="15" value="#{catalogoConPagoB.listData}"                                         
                                 showPaginator="true"                                  
                                 textoResultado="#{msgs['sistema.paginador.mostrando']} #{msgs['orden.conPago']} " 
                                 textoPagina="#{msgs['sistema.paginador.pagina']}" 
                                 textoDe="#{msgs['sistema.paginador.de']}" 
                                 >                                   
                        <p:column style="width:75%;">
                            <f:facet name="header"><h:outputText value="Nombre"/></f:facet>
                            <h:outputText value="#{data.nombre}"/>
                        </p:column>
                        <p:column style="text-align: center; width: 5%; text-align: center;">
                            <f:facet name="header"><h:outputText value="Notificar"/></f:facet>
                            <h:outputText value="#{data.anticipo eq true?'Si':'No'}"/>
                        </p:column>
                        <p:column style="width:8%;">
                            <center>
                                <f:facet name="header"><h:outputText value="#{msgs['orden.proveedores.relacionados']}"/></f:facet>
                                <p:commandLink value="#{msgs['sistema.detalle']}" title="#{msgs['sistema.detalle']}" 
                                                 action="#{catalogoConPagoB.goToRelacionConPagoPro(actionEvent)}"
                                                 action="#{relacionConPagoProB.entrar(actionEvent)}" type="submit" styleClass="link" />
                            </center>
                        </p:column>
                        <p:column style="width:6%;">
                            <center>
                                <f:facet name="header"><h:outputText value="#{msgs['sistema.modificar']}"/></f:facet>
                                <p:commandLink value="#{msgs['sistema.modificar']}" title="#{msgs['sistema.modificar']}" 
                                                 action="#{catalogoConPagoB.mostrarPopupActualizar(actionEvent)}" type="submit" styleClass="link" />
                            </center>
                        </p:column> 
                        <p:column style="width:6%;">
                            <center>
                                <f:facet name="header"><h:outputText value="#{msgs['sistema.eliminar']}"/></f:facet>
                                <p:commandLink value="#{msgs['sistema.eliminar']}" title="#{msgs['sistema.eliminar']}" 
                                                 action="#{catalogoConPagoB.mostrarPopupEliminar(actionEvent)}" type="submit" styleClass="link" />
                            </center>
                        </p:column>                                           
                    </my:dataGrid>
                </h:form>            


                <h:form id="formPopupCrearConPago" rendered="#{not empty sesion.usuario}" styleClass="textoIzquierda">
                    <my:panelPopup tituloPanel="#{msgs['sistema.crear']} #{msgs['orden.conPago']}" mostrarPanel="#{genericPanelPopup.modalRenderedCrear}" conBoton="false" >

                        <h:outputText id="msgsPopupCrearConPago" value="" />                        
                        <center><h:message for="msgsPopupCrearConPago" errorClass="errorMessage" infoClass="infoMessage"/></center>                                              
                        <p:panelGrid columns="2" styleClass="f11">
                            <p:panelGrid columns="2" styleClass="f11">
                                <h:outputLabel value="#{msgs['generales.nombre']}:  " />
                                <h:outputText value="*" styleClass="textoRojo" />
                            </p:panelGrid>
                            <p:panelGrid columns="2">
                                <p:inputText id="inpTxtnombreConPago" value="#{catalogoConPagoB.catalogoConPagoModel.nomConPago}" 
                                               styleClass="f11" maxlength="150" size="32" required="true" requiredMessage="#{msgs['generales.nombre']} #{msgs['sistema.mensaje.error.esRequerido']}"/>
                                <h:message id="nombreConPagoMessage" for="inpTxtnombreConPago" errorClass="errorMessage" infoClass="infoMessage"/>
                            </p:panelGrid>
                        </p:panelGrid>                        

                        <center>
                            <p:panelGrid columns="2">
                                <p:commandLink value="#{msgs['sistema.crear']}" action="#{catalogoConPagoB.crearConPago(actionEvent)}" styleClass="btn btn-info"/>
                                <p:commandLink value="#{msgs['sistema.cancelar']}" action="#{catalogoConPagoB.cancelarCrearConPago(actionEvent)}" immediate="true" styleClass="btn btn-default" />        
                            </p:panelGrid>                        
                        </center> 
                    </my:panelPopup>
                </h:form>                                   

                <h:form id="formPopupActualizarConPago" rendered="#{not empty sesion.usuario}" styleClass="textoIzquierda">
                    <my:panelPopup tituloPanel="#{msgs['sistema.modificar']} #{msgs['orden.conPago']}" mostrarPanel="#{genericPanelPopup.modalRenderedActualizar}" conBoton="false" >

                        <h:outputText id="msgsPopupActualizarConPago" value="" />                        
                        <center><h:message for="msgsPopupActualizarConPago" errorClass="errorMessage" infoClass="infoMessage"/></center>       

                        <p:panelGrid columns="2" styleClass="f11">
                            <p:panelGrid columns="2">
                                <h:outputLabel value="#{msgs['orden.conPago']}: " />
                                <h:outputText value="*" styleClass="textoRojo" />
                            </p:panelGrid>
                            <p:panelGrid columns="2">
                                <p:inputText id="inpTxtnombreConPagoEdit" value="#{catalogoConPagoB.catalogoConPagoModel.condicionPagoVO.nombre}" 
                                              styleClass="f11" maxlength="150" size="32" required="true" requiredMessage="#{msgs['generales.nombre']} #{msgs['sistema.mensaje.error.esRequerido']}"/>
                                <h:message id="nombreConPagoEditMessage" for="inpTxtnombreConPagoEdit" errorClass="errorMessage" infoClass="infoMessage"/>
                            </p:panelGrid>                                                    
                        </p:panelGrid>

                        <center>
                            <p:panelGrid columns="2">
                                <p:commandLink value="#{msgs['sistema.actualizar']}" action="#{catalogoConPagoB.actualizarConPago(actionEvent)}" styleClass="btn btn-info" />
                                <p:commandLink value="#{msgs['sistema.cancelar']}" action="#{catalogoConPagoB.cancelarActualizarConPago(actionEvent)}" immediate="true" styleClass="btn btn-default" />
                            </p:panelGrid>
                        </center>                                                       
                    </my:panelPopup>
                </h:form> 

                <h:form id="formPopupEliminarConPago" rendered="#{not empty sesion.usuario}" styleClass="textoIzquierda">
                    <my:panelPopup tituloPanel="#{msgs['sistema.eliminar']} #{msgs['orden.conPago']}" mostrarPanel="#{genericPanelPopup.modalRenderedEliminar}" conBoton="false">
                        <h:outputText id="msgsPopupEliminarConPago" value="" />
                        <center><h:messages for="msgsPopupEliminarConPago" errorClass="errorMessage" infoClass="infoMessage"/></center>  

                        <p:panelGrid columns="3" styleClass="f11">
                            <h:outputText value="Está seguro que desea eliminar la Condición de Pago " />
                            <h:outputText value="#{catalogoConPagoB.catalogoConPagoModel.condicionPagoVO.nombre}" style="font-weight: bold;" />
                            <h:outputText value="?" />
                        </p:panelGrid>

                        <center>
                            <p:panelGrid columns="2">
                                <p:commandButton value="Confirmar" action="#{catalogoConPagoB.eliminarConPago(actionEvent)}" styleClass="btn btn-info"/>
                                <p:commandButton value="Cancelar" action="#{catalogoConPagoB.cancelarEliminarConPago(actionEvent)}" immediate="true" styleClass="btn btn-default"/>        
                            </p:panelGrid>                        
                        </center>
                    </my:panelPopup>
                </h:form>            
            </ui:define>
        </ui:composition>
    </body>
</html>

